<!DOCTYPE html>
<!-- saved from url=(0736)https://www23.53kf.com/webCompany.php?kf_sign=TM4NzMTU5NkzMzExMTc2MjQ5OTU0MDA4NzIxMzk5NDc=&arg=10139947&style=2&kflist=off&kf=3314346980%40qq.com%2C3270342009%40qq.com%2C3544266363%40qq.com%2C3263446264%40qq.com%2C3180318236%40qq.com%2C3544415368%40qq.com%2C2687396713%40qq.com%2C3400277363%40qq.com%2C3533211705%40qq.com%2C1420301830%40qq.com&zdkf_type=1&lnk_overflow=0&language=zh-cn&charset=gbk&username=&userinfo=&introurl=&lyurl=&lytype=0&copartner=&referer=https%3A%2F%2Fwww.huaduocai.net%2Fuser%2Flogin.html&keyword=https%3A%2F%2Fwww.huaduocai.net%2F17095.html&brief=&logo=&question=&uid=5cbef5b36fcc04cee1410fdf00fe67af&guest_id=0&tfrom=2&tpl=minichat2&timeStamp=1595387939705&interface_color=1&interface_theme=1&minchat_style=1 -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--引入头部文件-->
    <script>
var company_id = "72139947";//公司id
var obj_id = 0; // 客服ID
var myid = "-1"; // 访客id
var style = "2";
var style_id = "106206543";
var guest_id = "11176249954008";//备用访客编号
var http_pro = (document.location.protocol == 'https:')?'https://':'http://';//区分HTTP和HTTPS
var host = "www23.53kf.com";
</script>
<link rel="stylesheet" type="text/css" href="./code.css"><link href="./default.css" rel="stylesheet"></head><body><span id="plugin_snapshot" style="display: none;"></span>    <!--引入CSS-->
    <link rel="stylesheet" type="text/css" href="./swiper.min.css">
    <link rel="stylesheet" href="./minichat.css">

    <!-- 别删这段注释=====================start===================== -->

    <!--ie8下给他边框-->
    <!--[if IE 8]>
    <style>
        .newWindow {
            border:1px solid #ccc;
            width:358px;
            height:422px;
        }
        .newWindow.window_size400 {
            height:362px;
        }
    </style>
    <![endif]-->

    <!-- 别删这段注释=====================end===================== -->
    <style>
        /*
        消息展示区域高度判断 19.2.4 
        */

       /* 存在底部外链  */
       
        .talk .pc-visitor-main {padding-bottom: 109px;}
        .talk.hasCallBack .pc-visitor-main {padding-bottom: 139px;}
        .talk.hasScene .pc-visitor-main {padding-bottom: 18px;}


        #pcWrap .pc-visitor-footer {bottom: 15px;}
        #float_to53{z-index: 210;position: absolute; bottom: 0; width: 100%; height: 18px; background: #f8f7f7;  font-size: 12px; text-align: center; line-height: 18px;}
        #float_to53 a{text-decoration: none;color: #8DA2B5;}
        #float_to53 a:hover{color: #218BFC; text-decoration: underline; }
        .sm_triangle{display: none !important; }
       


       /* 不存在底部外链  */
       
        .loading_box{
            width: 50px;
            height: 47px;
            position: relative;
        }
        .message_loading {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            position: absolute;
            animation: loader 0.5s linear alternate infinite;
            top: -25px;
            left: 15px;
        }

        @keyframes loader {
            0% {
                box-shadow: -14px 40px 0 2px #8DA2B5,  0 40px 0 0 #8DA2B5,  14px 40px 0 0 #8DA2B5; }
            50% {
                box-shadow: -14px 40px 0 0 #8DA2B5, 0 40px 0 2px #8DA2B5, 14px 40px 0 0 #8DA2B5; }
            100% {
                box-shadow: -14px 40px 0 0 #8DA2B5, 0 40px 0 0 #8DA2B5, 14px 40px 0 2px #8DA2B5; }
        }

       /* ------------------------*/

        
       /* 互动菜单预览 */
       #scroll_menu_box_by53kf{width:100%; height:30px;position: absolute; top: -33px; z-index: 0;display: none; }
       .menu_open{position: absolute; top: 0;background: #FFF; left: 0; height: 32px; width: 24px; z-index: 99; display: none; font-size: 18px;line-height: 38px;border-radius:0 4px 4px 0; border:1px solid #D8DFEA; cursor: pointer;color:#62778C; }
       .menu_open .open_btn_line{float: left; width: 2px; height: 24px; background: #CED5E0; margin-right: 4px; }
       .scroll_body{width:100%; height:30px;padding-right: 16px; }
       #scroll_menu{width: 100%; height: 32px;padding: 4px 10px 0 6px;  overflow: hidden; background:#FAF9F8; position: relative; margin: 0 !important; cursor: move;  position: relative; }
       #scroll_menu.btn_left{padding: 3px 6px 0 44px; }
       #scroll_menu_box_by53kf .menu_btn{cursor: pointer;font-size: 12px; color: #62778C; padding: 0 8px; line-height: 22px;height: 24px; border-radius:15px; border:1px solid #CED5E0; text-align: center; display: inline-block; width: auto;margin: 0 4px; background: #FFF; }
       #scroll_menu_box_by53kf .menu_btn:hover {background: #3B99FC; border-color: #3B99FC; color: #fff;}
       #scroll_menu_box_by53kf .menu_btn:active{background: #3489E2; border-color:#3B99FC; color: #fff; }
       #scroll_menu_box_by53kf .menu_close{display: none !important; height: 100%; width: 48px; background: #FFF; position: absolute; top: 0; right: 0; padding-top: 4px; z-index: 100; text-align: center; cursor: pointer;}
       #scroll_menu_box_by53kf .menu_up{height: 100%; width: 48px; background: #FAF9F8; position: absolute; top: 0; left: 0; padding-top: 3px; z-index: 100; text-align: center; cursor: pointer; display: none;}
       #scroll_menu_box_by53kf .menu_close .menu_btn{width: 32px; }
       #scroll_menu_box_by53kf .menu_up .menu_btn{width: 32px; }
       .iconfont.icon-Mobilephonemodel-new:after{content:' ▼';font-size: 8px; margin-right: 2px;vertical-align: 1px; }
       .menu_lv2{display: none;}
       .iconfont.icon-Close-new:before{font-size: 12px; line-height: 18px; }
       .iconfont.icon-xiangqian-new:before{font-size: 12px; line-height: 18px; }
       /* 访客表单 */
       .phone_visitor_form{margin: 16px auto;border:1px solid #CED5E0;border-radius: 2px;width: 296px;padding: 12px;}
       .phone_visitor_form .visitor_form_title{width: 100%;height:20px;text-align: center;font-size:14px;line-height: 20px; overflow: hidden;text-overflow: ellipsis; white-space: nowrap;margin-bottom: 12px}
       .phone_visitor_form .visitor_form_ques{width: 100%;margin-bottom: 12px}
       .phone_visitor_form .visitor_form_ques input{width: 100%;border:1px solid #CED5E0;border-radius: 2px;height: 30px;padding-left: 5px}
       .phone_visitor_form .visitor_form_ques .tip_error{font-size: 12px;text-align: left;width: 100%;height: 18px;line-height: 18px;color: #F44024;margin-top: 4px;display: none}
       .phone_visitor_form .visitor_form_ques.single_choose{position: relative;}
       .phone_visitor_form .visitor_form_ques.single_choose .slide_down_btn{position:absolute;width: 16px;height: 16px;top: 12px;right: 5px}
       .phone_visitor_form .visitor_form_ques.single_choose .slide_down_btn:after{content: '';height: 0;width: 0;position: absolute;right: 5px;top: 50%;border: 4px solid transparent;border-top: 5px solid #466080;border-bottom: none;margin-top: -2px;}
       
       .phone_visitor_form .visitor_form_submit{width: 100%;border-radius: 2px;height: 30px;text-align: center;color: #fff;background: #218BFC;font-size: 14px;line-height: 30px}
       .phone_visitor_form .visitor_form_submit:active{background: #3489E2}
       /* 解决互动菜单兼容问题 */
       .input-bar{position: relative; }
       .popup{z-index: 1; position: relative; }
       

        /* 互动菜单样式增强20200429（多条件判断） */

        /* 存在互动菜单时，增加内容区域底部padding */
        .talk.hasMenuLoop .pc_talk_content{
            padding-bottom: 30px !important;
        }
        /* 存在互动菜单时，改变内容区域高度 */
        .talk.hasMenuLoop .pc-visitor-main{
            padding-bottom: 109px !important;
        }
        /* 同时存在互动菜单和电话回呼且弹框高度为460px或者400px时，定位电话回呼位置 */

        .talk.hasCallBack.hasMenuLoop.minisize460 .net_callBack{
            top : -316px !important;
        }
        .talk.hasCallBack.hasMenuLoop.minisize400 .net_callBack{
            top : -255px !important;
        }


    </style>


<div class="img_bgmask" style=""><span class="close_bgmask"></span><div class="view_img_wrap"><img src="https://www23.53kf.com/webCompany.php?kf_sign=TM4NzMTU5NkzMzExMTc2MjQ5OTU0MDA4NzIxMzk5NDc=&amp;arg=10139947&amp;style=2&amp;kflist=off&amp;kf=3314346980%40qq.com%2C3270342009%40qq.com%2C3544266363%40qq.com%2C3263446264%40qq.com%2C3180318236%40qq.com%2C3544415368%40qq.com%2C2687396713%40qq.com%2C3400277363%40qq.com%2C3533211705%40qq.com%2C1420301830%40qq.com&amp;zdkf_type=1&amp;lnk_overflow=0&amp;language=zh-cn&amp;charset=gbk&amp;username=&amp;userinfo=&amp;introurl=&amp;lyurl=&amp;lytype=0&amp;copartner=&amp;referer=https%3A%2F%2Fwww.huaduocai.net%2Fuser%2Flogin.html&amp;keyword=https%3A%2F%2Fwww.huaduocai.net%2F17095.html&amp;brief=&amp;logo=&amp;question=&amp;uid=5cbef5b36fcc04cee1410fdf00fe67af&amp;guest_id=0&amp;tfrom=2&amp;tpl=minichat2&amp;timeStamp=1595387939705&amp;interface_color=1&amp;interface_theme=1&amp;minchat_style=1" alt=""></div></div>
    <div class="newWindow ">
        <div class="window-content">
            <div class="content-left">
                    <div class="connectionFail font12 color-red" style="display: none;"></div>
                    <div class="toasts"><div><span class="toastsText font14">异常</span></div></div><!-- 系统提示消息 -->
                <div id="pcWrap">
                    <div class="pc-visitor" style="display:block;height:100%;overflow:auto;overflow-x: hidden;">
                        <!-- 留言成功 -->
                        <div class="leaveMsg-suc color-grey-deep font13" style="display: none;">
                            <div class="leaveBg"></div>
                            <div class="suc-text">
                                <p>已收到了您的留言</p><!-- 已收到了您的留言 -->
                                <p>我们会在第一时间内给予您回复!</p><!-- 我们会在第一时间内给予您回复 -->
                            </div>
                            <div class="close-suc font12">
                                <span class="close-suc-btn buttonType2 color-grey-middle font13">关闭窗口</span><!-- 关闭窗口 -->
                                <p class="color-grey-light font12"><a class="seconds">10</a>秒后自动关闭该窗口</p><!-- 秒后自动关闭该窗口 -->
                            </div>
                        </div>
                        <!--聊天前信息填写-->
                          <div class="before-talk" style="display: none;">

                        </div>
                        <!--留言-->
                        <div class="leave-message" style="display: none;">

                        </div>
                        <!--主动选择客服-->
                        <div class="select-customer" style="display: none;">

                        </div>
                        <!--聊天-->
                        <div class="talk">
                            <div class="line-up" style="display: none;">
                                <div>
                                    <p class="font12 color-grey-deep">当前客服接待能力已达上限，请耐心等候！</p><!-- 当前客服接待能力已达上限，请耐心等候！ -->
                                    <h6 class="font14 color-grey-deep">当前等待人数：<span class="personNum color-blue">0</span></h6><!-- 当前等待人数: -->
                                </div>
                                <div class="line-up-btnGroup fr">
                                    <a class="font12 color-grey-middle toMessage buttonType2" onclick="showLword()">转留言</a><!-- 转留言 -->
                                    <a class="font12 color-grey-middle toRobot buttonType2" onclick="showzsk()" style="display: none;">转机器人</a><!-- 转机器人 -->
                                </div>
                            </div>
                            <div class="pc-visitor-main">
                                <div class="sevice" style="display:block;">
                                    <div class="pc_talk_content">
                                                                                                                        <p class="system-remind"><label>欢迎您的咨询，期待为您服务!</label></p>
                                        
                                    <div id="talk_pos" style="display: none"></div><div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="./15406998625078.jpg" alt="头像"></div><div class="pc-service-right"><p><label>花店~蔷薇</label><span>11:19:00</span><span class="qr_code_53kf"><span class="qr_box_53kf"><span class="qr_img_53kf"><img src="./showqrcode" alt=""></span><em>微信扫码&nbsp;咨询同步</em></span></span></p><div class="pc-service-info" style=""><div style="overflow-x:auto;"><p><span style="FONT-SIZE: 12px"><span style="FONT-SIZE: 14px">您好！我是蔷薇鲜花蛋糕，很高兴为您服务。</span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>本店优惠</strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>→→【添加微信</strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>hdcxh1314或者QQ3263492410</strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px">，&nbsp;</span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>下单立减5元-10元，特价除外</strong></span><strong></strong></span><br></p></div></div><div class="msg_btns"><div class="msg_btn msg_qq_btn" data_qq="3263492410" onclick="window.open(&#39;tencent://message/?uin=3263492410&#39;,&#39;_self&#39;)"><div class="msg_act">加 QQ</div></div><div class="msg_btn msg_wx_btn" data_wx="hdcxh1314" onclick="msg_wx_act(this)"><div class="msg_act">复制微信</div><div class="copy_wx">hdcxh1314</div></div></div></div></div><div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="./15406998625078.jpg" alt="头像"></div><div class="pc-service-right"><p><label>花店~蔷薇</label><span>11:19:20</span><span class="qr_code_53kf"><span class="qr_box_53kf"><span class="qr_img_53kf"><img src="./showqrcode" alt=""></span><em>微信扫码&nbsp;咨询同步</em></span></span></p><div class="pc-service-info" style=""><div style="overflow-x:auto;"><p><span style="BACKGROUND-COLOR: transparent; FONT-STYLE: normal; FONT-FAMILY: &#39;sans serif&#39;,tahoma,verdana,helvetica; COLOR: #000000; FONT-SIZE: 12px; FONT-WEIGHT: 400; TEXT-DECORATION: none"><span style="FONT-SIZE: 14px">&nbsp;</span></span></p><br><p><span style="FONT-SIZE: 12px"><span style="FONT-SIZE: 14px">您好！我是<span style="font-size:14px;line-height:21px;">蔷薇鲜花蛋糕</span>，很高兴为您服务。</span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>本店优惠</strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>→→【添加微信<span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>hdcxh1314</strong></span></strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>或者QQ3263492410</strong></span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px">，&nbsp;</span><span style="BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px"><strong>下单立减5元-10元，特价除外</strong></span><strong></strong></span></p></div></div><div class="msg_btns"><div class="msg_btn msg_qq_btn" data_qq="3263492410" onclick="window.open(&#39;tencent://message/?uin=3263492410&#39;,&#39;_self&#39;)"><div class="msg_act">加 QQ</div></div><div class="msg_btn msg_wx_btn" data_wx="hdcxh1314" onclick="msg_wx_act(this)"><div class="msg_act">复制微信</div><div class="copy_wx">hdcxh1314</div></div></div></div></div><div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="./15406998625078.jpg" alt="头像"></div><div class="pc-service-right"><p><label>花店~蔷薇</label><span>11:19:21</span><span class="qr_code_53kf"><span class="qr_box_53kf"><span class="qr_img_53kf"><img src="./showqrcode" alt=""></span><em>微信扫码&nbsp;咨询同步</em></span></span></p><div class="pc-service-info" style=""><div style="overflow-x:auto;">您好，需要订花吗？</div></div></div></div></div>
                                  </div>
                            </div>
                            <div class="pc-visitor-footer">

                                <!-- 互动菜单盒子布局 -->
                                <div id="scroll_menu_box_by53kf">
                                    <!-- 展开 -->
                                    <div class="menu_open iconfont icon-shusantiaogang">
                                        <!-- <span class="open_btn_line"></span>
                                        <span class="open_btn_line"></span>
                                        <span class="open_btn_line"></span> -->

                                    </div>
                                    <!-- 盒子体,保证动画的流畅性 -->
                                    <div class="scroll_body">
                                        <!-- 盒子体,用于padding布局 -->
                                        <div id="scroll_menu">
                                            <!-- 轮播 -->
                                            <!-- <div class="swiper-container menu_lv1 " id="scroll_menu_top"><div class="swiper-wrapper menu_list"></div></div> -->
                                            <div class="menu_close">
                                                <span class="menu_btn iconfont icon-Close1"></span>
                                            </div>
                                            <div class="menu_up">
                                                <span class="menu_btn iconfont icon-Back1">＜</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <!-- <div class="sm_triangle"></div>
                                <a class="triangle_to53" href="https://www.53kf.com/CustomerServiceSystem?kfcount=float" target="_blank">by <span class="hover_53" style="display: inline;font-size: 12px;line-height: 12px;">53KF</span></a> -->
                                <div class="net_callBack color-grey-middle">免费电话咨询，请放心接听<span class="net_callBack_wrap"><input class="net_callBack_input color-grey-middle" placeholder="输入手机号码" value="" type="text"><span class="net_callBack_btn" style="background: #CE3A5E">免费通话</span></span></div>
                                <p class="system-remind kf_input"><label>客服正在输入中...</label></p><!-- 客服正在输入中... -->
                                <div class="function-bar">
                                    <div class="face-lists toggleHidden"></div>
                                    <div class="guanlian-problem" style="display: none;"></div>
                                    <div class="service-help toggleHidden"></div>
                                    <div class="cutbox toggleHidden">
                                        <p>屏幕截图</p>
                                        <p>截图时隐藏当前窗口</p>
                                    </div>
                                    <div class="cutbox_mac toggleHidden">
                                    	<p>1.⌘+control+shift+4</p>
                                    	<p>2.⌘+v，即可粘贴至输入框</p>
                                    </div>
                                    <div class="talk-function-bar">
                                        <div class="svgWrap">
                                            <!--?xml version="1.0" encoding="UTF-8"?-->
                                                                                        <label class="changeColor-wrap">
                                            <svg data-title="表情" class="function-icon icon-face" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- 表情 -->
                                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <g id="Imported-Layers-Copy-7">
                                                        <rect id="Rectangle-3" x="0" y="0" width="24" height="24"></rect>
                                                        <path class="svgColor" d="M5,12 C5,15.8656805 8.1343195,19 12,19 C15.8656805,19 19,15.8656805 19,12 C19,8.1343195 15.8656805,5 12,5 C8.1343195,5 5,8.1343195 5,12 Z M3,12 C3,7.02975 7.02975,3 12,3 C16.97025,3 21,7.02975 21,12 C21,16.97025 16.97025,21 12,21 C7.02975,21 3,16.97025 3,12 Z" id="Combined-Shape" fill="#466080" fill-rule="nonzero"></path>
                                                        <path class="svgColor" d="M9,8 C8.172,8 7.5,8.672 7.5,9.5 C7.5,10.328 8.172,11 9,11 C9.828,11 10.5,10.328 10.5,9.5 C10.5,8.672 9.828,8 9,8" id="Fill-2" fill="#466080"></path>
                                                        <path class="svgColor" d="M15,8 C14.172,8 13.5,8.672 13.5,9.5 C13.5,10.328 14.172,11 15,11 C15.828,11 16.5,10.328 16.5,9.5 C16.5,8.672 15.828,8 15,8" id="Fill-2-Copy" fill="#466080"></path>
                                                        <path class="svgColor" d="M9.55730755,18.9802954 C12.5582692,18.9802954 15.0860829,16.7646048 15.4989445,13.8196019 C15.5756198,13.2726656 15.1943979,12.7671285 14.6474616,12.6904532 C14.1005252,12.6137779 13.5949881,12.9949998 13.5183128,13.5419361 C13.2434436,15.5026194 11.5576081,16.9802954 9.55730755,16.9802954 C9.0050228,16.9802954 8.55730755,17.4280106 8.55730755,17.9802954 C8.55730755,18.5325801 9.0050228,18.9802954 9.55730755,18.9802954 Z" id="Oval-26" fill="#466080" fill-rule="nonzero" transform="translate(12.033030, 15.830470) rotate(39.000000) translate(-12.033030, -15.830470) "></path>
                                                    </g>
                                                </g>
                                            </svg>
                                            </label>
                                                                                                                                    <label class="function-icon-disabled">
                                            <svg data-title="截图" class="function-icon icon-cut" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- 截图 -->
                                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <g id="Group-15">
                                                        <g id="Group-81-Copy-6">
                                                            <rect id="Rectangle-81" x="0" y="0" width="24" height="24"></rect>
                                                        </g>
                                                        <g class="svgColor" transform="translate(4.000000, 4.000000)" fill-rule="nonzero" fill="#466080">
                                                            <path d="M3.5,14 C4.32842712,14 5,13.3284271 5,12.5 C5,11.6715729 4.32842712,11 3.5,11 C2.67157288,11 2,11.6715729 2,12.5 C2,13.3284271 2.67157288,14 3.5,14 Z M9.5510355,7.32174556 L11.2561548,9.22746708 C11.6426526,9.08048219 12.0619275,9 12.5,9 C14.4329966,9 16,10.5670034 16,12.5 C16,14.4329966 14.4329966,16 12.5,16 C10.5670034,16 9,14.4329966 9,12.5 C9,12.1413991 9.05393,11.7953943 9.1541219,11.4696536 L8,9.7 L6.8458781,11.4696536 C6.94607,11.7953943 7,12.1413991 7,12.5 C7,14.4329966 5.43299662,16 3.5,16 C1.56700338,16 0,14.4329966 0,12.5 C0,10.5670034 1.56700338,9 3.5,9 C3.93807254,9 4.35734745,9.08048219 4.74384524,9.22746708 L6.4489645,7.32174556 L2,0.5 L3,0 L8,5.58823529 L13,0 L14,0.5 L9.5510355,7.32174556 Z M12.5,14 C13.3284271,14 14,13.3284271 14,12.5 C14,11.6715729 13.3284271,11 12.5,11 C11.6715729,11 11,11.6715729 11,12.5 C11,13.3284271 11.6715729,14 12.5,14 Z M8,9 C8.55228475,9 9,8.55228475 9,8 C9,7.44771525 8.55228475,7 8,7 C7.44771525,7 7,7.44771525 7,8 C7,8.55228475 7.44771525,9 8,9 Z" id="Combined-Shape"></path>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                            </label>
                                                                                                                                    <label class="upload_box function-icon-disabled" style="position: relative;width:24px;height:24px">
                                                <svg data-title="发送文件及图片" class="function-icon upload_copy" style="position:absolute;top:-24px;left:0;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                    <path class="svgColor" fill="#466080" d="M5,18 L19.0010872,18 C19.0005141,17.9998702 19.0001517,14.6674569 19,8.00276013 C19,8.00181211 16.294032,8.00089207 10.8820961,8 L9.88209609,6 L5.00673767,6 C5.00250242,6 5.00025653,10 5,18 Z M3,5.99188419 L3,4 L11.1181641,4 L12.1181641,6 L21,6 L21,8.00276013 L21,17.9972399 L21,20 L3,20 L3,18.0081158 L3,5.99188419 Z M13,17 L13,12.6666667 L15,14 L15,12 L12,10 L9,12 L9,14 L11,12.6666667 L11,17 L13,17 Z"></path>
                                                </svg>
                                                <div data-title="发送文件及图片" class="function-icon webuploader-container" id="file-picker"><div class="webuploader-pick"></div><div id="rt_rt_1edq8g3e41u5s13021ajg47t1ull1" style="position: absolute; top: 0px; left: 0px; width: 24px; height: 24px; overflow: hidden; bottom: auto; right: auto;"><input type="file" name="file" class="" multiple="multiple" style="opacity: 0;"><label style="opacity: 0; width: 100%; height: 100%; display: block; cursor: pointer; background: rgb(255, 255, 255);"></label></div></div><!-- 发送文件及图片 -->
                                            </label>

                                                                                                                                    <label class="function-icon-disabled">
                                            <svg data-title="热点问题" class="function-icon icon-hot" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- 热点问题 -->
                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <g id="Group-81-Copy-9">
                                                        <rect id="Rectangle-81" x="0" y="0" width="24" height="24"></rect>
                                                        <path class="svgColor" d="M8.36429893,18.8289413 C9.73063846,18.9292579 11.3349938,19 12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,12.9334813 5.18172934,13.8381842 5.53032851,14.6788664 C5.88219305,15.5274235 6.39972947,16.2992244 7.05025253,16.9497475 C7.58057379,17.4800687 7.81513896,18.1368736 7.78034883,18.782781 C7.96902857,18.7987713 8.16420494,18.8142504 8.36429893,18.8289413 Z M12,21 C10.7797335,21 5.61618829,20.7571475 4.55505929,20.3171374 C3.4550176,19.8609917 6.46504129,19.1929633 5.63603897,18.363961 C4.80703665,17.5349587 4.13900833,16.5449824 3.68286262,15.4449407 C3.24285253,14.3838117 3,13.2202665 3,12 C3,7.02943725 7.02943725,3 12,3 C16.9705627,3 21,7.02943725 21,12 C21,16.9705627 16.9705627,21 12,21 Z M11,16 L11,18 L13,18 L13,16 L11,16 Z M12.6104509,12.4976038 C13.4074876,12.4629533 14.1077049,12.0551122 14.5407202,11.444463 C14.3840377,11.6423026 14.190102,11.8124641 13.9633411,11.9587389 C13.7268824,12.1112694 13.4703124,12.2260924 13.2136687,12.3071516 C13.0621981,12.3549926 12.9487749,12.3801478 12.8939829,12.3884342 C12.7928032,12.4132899 12.6978709,12.4503543 12.6104509,12.4976038 Z M12.5,6.5 C10.5670034,6.5 9,8.06700338 9,10 L9,10.5 L11,10.5 L11,10 C11,9.17157288 11.6715729,8.5 12.5,8.5 C13.3284271,8.5 14,9.17157288 14,10 C14,10.8284271 13.3284271,11.5 12.5,11.5 C11.6756918,11.5 11,12.1724456 11,12.9989566 L11,15.5 L13,15.5 L13,13.5046844 C13,13.4454361 13.0519764,13.3773941 13.0900178,13.3678838 C13.4237612,13.3196847 13.9617585,13.1497617 14.5054089,12.7990736 C15.4319801,12.201378 16,11.2739628 16,10 C16,8.17357596 14.384759,6.5 12.5,6.5 Z" id="Combined-Shape" fill="#466080" fill-rule="nonzero"></path>
                                                        <g id="Group-18-Copy" transform="translate(9.000000, 6.000000)"></g>
                                                    </g>
                                                </g>
                                            </svg>
                                            </label>
                                                                                                                                                                                <label class="function-icon-disabled">
                                            <svg data-title="评价" class="function-icon evaluation-icon function-icon-eval" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <!-- 评价 -->
                                                <g id="pc端" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                    <g class="svgStroke" id="Group-21" stroke="#466080" stroke-width="2">
                                                        <path d="M15.9619362,17.4531374 L15.2052738,13.0414566 L18.4105475,9.91708685 L13.9809681,9.27343129 L12,5.25955146 L10.0190319,9.27343129 L5.5894525,9.91708685 L8.79472625,13.0414566 L8.03806376,17.4531374 L12,15.3702243 L15.9619362,17.4531374 Z" id="Star"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                            </label>
                                                                                    </div>
                                        
                                    </div>
                                    <div class="robot-function-bar" style="display: none;">
                                        <span class="robotLinkTo robotToLword color-grey-middle" onclick="showLword()">转留言</span><!-- 转留言 -->
                                        <span class="robotLinkTo robotToKF color-grey-middle" onclick="robotToTalk()">转人工</span><!-- 转人工 -->
                                    </div>
                                    <div class="footer-text">
                                        <span></span>
                                        <b></b>
                                    </div>
                                </div>
                                <div class="inputArea">
                                    <!-- <textarea class="color-grey-deep"></textarea> -->
                                    <span class="please_input color-grey-light font13" style="display: none;">请输入文字或粘贴截图</span>
                                    <!-- <script name="editor" id="myEditor" name="content" type="text/plain"></script> -->
                                    <div class="ke-container ke-container-default" style="width: 100%;"><div style="display:block;" class="ke-toolbar" unselectable="on"></div><div style="display: block; height: 56px;" class="ke-edit"><iframe class="ke-edit-iframe" hidefocus="true" frameborder="0" tabindex="" style="width: 100%; height: 56px;" src="./saved_resource(2).html"></iframe><textarea class="ke-edit-textarea" hidefocus="true" tabindex="" style="width: 100%; height: 56px; display: none;"></textarea></div><div class="ke-statusbar"><span class="ke-inline-block ke-statusbar-center-icon" style="visibility: hidden;"></span><span class="ke-inline-block ke-statusbar-right-icon" style="visibility: hidden;"></span></div></div><textarea id="myEditor" name="content" style="display: none;"></textarea>
                                    <a id="btnSend" class="submit-btn-wrap font14" style="background-color:rgb(30, 137, 230)">发送<i class="submit-btn btnHover btnActive"></i></a><!-- 发送 -->
                                </div>
                                <div class="beStopped color-red" style="display:none;">
                                    抱歉，客服系统暂时无法使用！
                                </div><!-- 你已经被禁止对话！ -->
                                <div class="maskArea" style="display:none;">
                                    <!-- <div class="sm_triangle"></div>
                                    <a class="triangle_to53" href="https://www.53kf.com/CustomerServiceSystem?kfcount=float" target="_blank">by <span class="hover_53" style="display: inline;font-size: 12px;line-height: 12px;">53KF</span></a> -->
                                    <span>当前对话已结束，您可以<span style="margin:0 5px;" class="toNewChat color-blue" onclick="location.reload();">开始新对话</span><!-- 或<span class="toLword color-blue" style="margin:0 5px;" onclick="showLword()">留言</span> --></span>
                                </div><!-- 当前对话已结束，您可以   开始新对话    或   留言 -->
                            </div>
                            <div id="float_to53"><a href="https://www.53kf.com/CustomerServiceSystem?kfcount=float" target="_blank">53KF 提供软件支持</a></div><!-- 53KF 提供软件支持 -->
                        </div>
                                                <p class="by53kf" style="display: none;">
                            <a class="toDeveloper" href="https://www.53kf.com/CustomerServiceSystem?kfcount=float" target="_blank">53KF 提供软件支持</a>
                        </p>
                                            </div>
                </div>
            </div>
        </div>
    </div>
<bgsound id="bgsoundSound">
<audio id="audioSound"></audio>
<script>
    // 让ie11以下和safari浏览器不支持粘贴qq截图
    // (function(){
    //     if($(".please_input").text().indexOf("QQ") < 0 ) return;
    //     var is_ie = (function isIE() {
    //         if(!!window.ActiveXObject || "ActiveXObject" in window)
    //             return true;
    //         else
    //             return false;
    //     })();
    //     var navigator_type = navigator.userAgent.toLowerCase();
    //     if ( (navigator_type.indexOf("safari") > -1 && navigator_type.indexOf("chrome") < 0) || is_ie ){
    //         $(".please_input").text($(".please_input").text().substr(0,3));
    //     };

    //     is_ie = null;
    // })()
</script>
<script type="text/javascript" src="./jquery-1.11.3.min.js.下载"></script>
<script type="text/javascript" src="./swiper.min.js.下载" defer=""></script>
<script src="./basic.js.下载"></script>

<!-- <script type="text/javascript" src="js/umeditor/third-party/template.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/umeditor/umeditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="js/umeditor/umeditor.min.js?2017112320"></script>
<script type="text/javascript" src="js/umeditor/lang/zh-cn/zh-cn.js"></script> -->

<script type="text/javascript" charset="utf-8" src="./kindeditor-min.js.下载"></script>
<script type="text/javascript" src="./zh_CN.js.下载"></script>

<style>
    .newWindow .ke-toolbar {display:none!important;}
    .newWindow .ke-statusbar {display:none;}
    .newWindow .ke-container {border:none;z-index: 10;position: relative;background: none;}
    .newWindow .ke-container div {background: none;}
    #pcWrap .pc-visitor-footer .inputArea .please_input {z-index: 9;}
    #file-picker div {width:24px!important;height:24px!important;}
</style>
<script>

  /*--------------------------- 监听keycode 开始--------------------------- */
  function ListenKeyCode(){
    var _this = this;
    this.keydown_flag = 1;
    this.kcode_arr = [];
    this.old_kcode_arr = [];
    this.kcode_str = '';
    this.kcStr = '';

    this.company_arr = [];
    this.new_company_arr = [];
    
    // 获取companyid
    this.addCompany = function(obj){
      if(!obj) var obj = '';
      
      // 传入公司id如果是字符串则转数组
      if(typeof obj == 'string'){
        var arr = obj.split(',');
      }else{
        arr = obj;
      }
      _this.company_arr = _this.company_arr.concat(arr);
      // 去重
      for(var i = 0; i < _this.company_arr.length; i++){ 
        if (_this.new_company_arr.indexOf(_this.company_arr[i]) == -1){
            _this.new_company_arr.push(_this.company_arr[i]);
        }
      } 

    }
    
    // 验证companyid是否存在
    this.kCode = function(){
      if(_this.new_company_arr.indexOf(company_id) != -1){
          var idx = _this.new_company_arr.indexOf(company_id);
          try{
              setTimeout(function(){
                _this.liskc();
                _this.new_company_arr.splice(idx,1);
              },500)
          }catch(e){}
      }
    };

    // 监听keycode
    this.liskc = function(){
    };
  }

  var kc = new ListenKeyCode();
  window.kc = kc;


  /*--------------------------- 监听keycode 结束--------------------------- */

    var kindeditor;
    KindEditor.ready(function(K) {
        var getHtmlTimer;
        kindeditor = K.create('textarea[name="content"]', {
            items : [],
            width:"100%",
            height:"56px",
            minHeight:"56px",
            cssData:'body {padding:5px 10px;} .ke-content {font-size: 13px;word-wrap: break-word;} .ke-content img {vertical-align: middle!important;max-width:100%;}',
            resizeMode:0,
            resizeType:0,
            pasteType:2,
            newlineTag:"br",
            allowPreviewEmoticons:false,
            // useContextmenu:false,
            htmlTags:{
                img : ['src', 'width', 'height', 'border', 'alt', 'title', 'align', 'style', '/'],
                'br' : []
            },
            afterFocus : function(){
                $(".face-lists").removeClass("active");
                $(".service-help").removeClass("active");
                $(".icon-hot").parent().removeClass("active");
                $(".cutbox_mac").removeClass("active").slideUp(100);
                $(".icon-cut").parent().removeClass("active");
                $(".changeColor-wrap").removeClass("active");
                $(".toggleHidden").slideUp(100);
                // afterChange匹配不到输入内容的处理方案
                getHtmlTimer = setInterval(function(){
                  var str = "";
                  var _this = kindeditor;
                  if(!_this.isEmpty()){
                      $(".please_input").hide();
                      $(".submit-btn-wrap").removeClass("disabled");
                  }else{
                      if(navigator.userAgent.indexOf("Edge") > -1){
                          $(".please_input").hide();
                          $(".submit-btn-wrap").removeClass("disabled");
                      }else{
                          $(".please_input").show();
                          $(".submit-btn-wrap").addClass("disabled");
                      }
                  }
                  if(_this.html().length != str.length){
                      str = _this.html();
                      inputBoxChange();
                  }
                }, 1000)

            },
            afterBlur : function(){
              clearInterval(getHtmlTimer);
            },
            afterCreate : function() { //设置编辑器创建后执行的回调函数
                var self = this;
                var $txt = $(".ke-edit-iframe").contents().find("body");
                $txt.attr("contenteditable","true");
                $(".please_input").hide();
                $(".submit-btn-wrap").removeClass("disabled");
                $txt.click(function(){
                    $(".please_input").hide();
                    $(".submit-btn-wrap").removeClass("disabled");
                })
                $txt.keydown(function (event) {
                    var content = $txt[0].innerText.length
                    if(content>0){
                        $(".please_input").hide();
                        $(".submit-btn-wrap").removeClass("disabled");
                    }else{
                        $(".please_input").show();
                        $(".submit-btn-wrap").addClass("disabled");
                    }
                    if(event.keyCode==13 && !event.ctrlKey && !event.shiftKey ){
                        //self.sync();
                        sendmsg();
                        $(".submit-btn-wrap").addClass("disabled");
                        return false;

                    };
                });

                // 复制粘贴
                var editerDoc = this.edit.doc;//得到编辑器的文档对象
                //监听粘贴事件, 包括右键粘贴和ctrl+v
                $(editerDoc).bind('paste', null, function (e) {
                   try {
                        var ele = e.originalEvent.clipboardData.items;
                        for (var i = 0; i < ele.length; ++i) {
                            //判断文件类型
                            if ( ele[i].kind == 'file' && ele[i].type.indexOf('image/') !== -1 ) {
                                $(".please_input").hide();
                                var file = ele[i].getAsFile();//得到二进制数据
                                var formData = new FormData();
                                formData.append("userupload",file);//name,value


                                var reader = new FileReader();
                                reader.onload = function( e ){
                                    var img = new Image();
                                    img.src = e.target.result;
                                    setTimeout(function(){
                                        //用jquery Ajax 上传二进制数据
                                        $.ajax({
                                            url : http_pro+host+'/upload_img_file.php?company_id='+company_id,
                                            type : 'POST',
                                            data : formData,
                                            // 告诉jQuery不要去处理发送的数据
                                            processData : false,
                                            // 告诉jQuery不要去设置Content-Type请求头
                                            contentType : false,
                                            dataType : 'JSON',
                                            success : function(responseStr) {
                                                var src = responseStr.url;
                                                var imgTag = "<img src='"+src+"?w="+img.width+"&h="+img.height+"' border='0'/>";
                                                self.html(imgTag);
                                            },
                                            error : function(responseStr) {
                                                reader = new FileReader();
                                                reader.onload = function( e ){
                                                    var img = new Image();
                                                    var imgTag = "<img src='"+e.target.result+"?w="+img.width+"&h="+img.height+"' border='0'/>";
                                                    self.html(imgTag);
                                                };
                                                reader.readAsDataURL( file );
                                            }
                                        });
                                    },0)
                                }
                                reader.readAsDataURL( file );
                            }
                        }
                   }catch (e){};
                });
                

                // 录入keycode
                var keycod = function(){
                  // if(company_id == "72092882"  || company_id == "72054019" || company_id == "72127462"){
                    $(editerDoc).keydown(function(e){
                        // 首次触发
                        if(kc.keydown_flag == 1){
                            kc.keydown_flag = 2;
                            kc.old_kcode_arr.push(e.keyCode);
                            kc.kcode_str = kc.old_kcode_arr.join(",");
                            //$.get("wnn_debug.php",{"info":kc.kcode_str,"company_id":company_id,"flag":"first_keydown","type":"talkone"});
                        }else if(kc.keydown_flag == 2){
                            kc.kcode_arr.push(e.keyCode);
                            if(kc.kcode_arr.length == 5){
                                kc.old_kcode_arr = kc.old_kcode_arr.concat(kc.kcode_arr);
                                kc.kcode_str = kc.old_kcode_arr.join(",");
                                console.log(kc.kcode_str,'历次监听');
                                kc.kcode_arr = [];
                                //$.get("wnn_debug.php",{"info":kc.kcode_str,"company_id":company_id,"flag":"keydown","type":"talkone"});
                            }
                        }
                        if(e.keyCode == '13'){
                            if(kc.keydown_flag != 3){
                              // 移除事件
                                console.log(kc.kcode_str,'enter发送');
                              kc.keydown_flag = 3;
                                //$.get("wnn_debug.php",{"info":kc.kcode_str,"company_id":company_id,"flag":"keyCode","type":"talkone"});
                            }
                        }
                    })

                    $("#btnSend").click(function() {
                      // if(company_id == "72092882"  || company_id == "72054019" || company_id == "72127462"){
                        if(kc.keydown_flag != 3){
                            $.get("wnn_debug.php",{"info":kc.kcode_str,"company_id":company_id,"flag":"btnSend","type":"talkone"});
                          // 移除事件
                          keydown_flag = "3";
                        }
                      // }
                    });
                  // }
                } 
                kc.liskc = keycod;

                try {
                    // 拖拽上传
                    $(".sevice").get(0).addEventListener('dragover', function (e) {
                        e.preventDefault(); // 必须阻止默认事件
                    }, false);

                    $(".sevice").get(0).addEventListener('drop', dropFn, false);
                    editerDoc.addEventListener('drop', dropFn, false);

                    function dropFn(e){
                        e.preventDefault(); // 阻止默认事件
                        var file = e.dataTransfer.files[0]; //获取文件
                        if(file.type.split("/")[0]!='image') return;
                        var formData = new FormData();
                        formData.append("userupload",file);//name,value
						// 上传前获取图片尺寸
                        var reader = new FileReader();
                        reader.onload = function( e ){
                            var img = new Image();
                            img.src = e.target.result;
                            setTimeout(function(){
                                //用jquery Ajax 上传二进制数据
                                $.ajax({
                                    url : http_pro+host+'/upload_img_file.php?company_id='+company_id,
                                    type : 'POST',
                                    data : formData,
                                    // 告诉jQuery不要去处理发送的数据
                                    processData : false,
                                    // 告诉jQuery不要去设置Content-Type请求头
                                    contentType : false,
                                    dataType : 'JSON',
                                    success : function(responseStr) {
                                        var src = responseStr.url;
                                        var imgTag = "<img src='"+src+"?w="+img.width+"&h="+img.height+"' border='0'/>";
                                        self.insertHtml(imgTag);
                                    },
                                    error : function(responseStr) {
                                        reader = new FileReader();
                                        reader.onload = function( e ){
                                            var img = new Image();
                                            var imgTag = "<img src='"+e.target.result+"?w="+img.width+"&h="+img.height+"' border='0'/>";
                                            self.insertHtml(imgTag);
                                        };
                                        reader.readAsDataURL( file );
                                    },
                                });
                            },0)
                        };
                        reader.readAsDataURL( file );
                    }
                }catch (e){};
            },
            afterChange:(function(){
                var str = "";
                return function(){
                    if(!this.isEmpty()){
                        $(".please_input").hide();
                        $(".submit-btn-wrap").removeClass("disabled");
                    }else{
                        if(navigator.userAgent.indexOf("Edge") > -1){
                            $(".please_input").hide();
                            $(".submit-btn-wrap").removeClass("disabled");
                        }else{
                            $(".please_input").show();
                            $(".submit-btn-wrap").addClass("disabled");
                        }
                    }
                    if(this.html().length != str.length){
                        str = this.html();
                        inputBoxChange();
                    }
                }
            })()
        });

    });

$(function(){
   // 图片预览==============================start=============================
    $(".talk").on("click",".upload-wrap img",function(){
        preview_img(this)
    });

    $(".talk").on("click",".pc-customer-info img",function(){
        preview_img(this)
    });

    $(".talk").on("click",".pc-service-info img",function(){
        preview_img(this)
    });
    function preview_img(obj){
        if($(obj).parent()[0].tagName != 'A'){
          $(".img_bgmask").find(".view_img_wrap").css("width","100%");
          $(".img_bgmask").find("img").attr("src",$(obj).attr("src"));
          $(".img_bgmask").find("img").on("load",function(){
              $(".img_bgmask").show();
              $(".img_bgmask").find(".view_img_wrap").css({"margin-left":-($(".img_bgmask").find(".view_img_wrap").width()/2)+"px","margin-top":-($(".img_bgmask").find(".view_img_wrap").height()/2)+"px","left":"50%","top":"50%"});
          })
        }
    }

    $("body").on("click",".close_bgmask",function(){
        $(".img_bgmask").hide();
        oX = $(".img_bgmask").width()/2,
        oY = $(".img_bgmask").height()/2;
    });

    // 滚轮缩放图片
    var addEvent = (function(window, undefined) {
        var _eventCompat = function(event) {
            var type = event.type;
            if (type == 'DOMMouseScroll' || type == 'mousewheel') {
                event.delta = (event.wheelDelta) ? event.wheelDelta / 120 : -(event.detail || 0) / 3;
            }
            //alert(event.delta);
            if (event.srcElement && !event.target) {
                event.target = event.srcElement;
            }
            if (!event.preventDefault && event.returnValue !== undefined) {
                event.preventDefault = function() {
                    event.returnValue = false;
                };
            }

            return event;
        };
        if (window.addEventListener) {
            return function(el, type, fn, capture) {
                if (type === "mousewheel" && document.mozFullScreen !== undefined) {
                    type = "DOMMouseScroll";
                }
                el.addEventListener(type, function(event) {
                    fn.call(this, _eventCompat(event));
                }, capture || false);
            }
        } else if (window.attachEvent) {
            return function(el, type, fn, capture) {
                el.attachEvent("on" + type, function(event) {
                    event = event || window.event;
                    fn.call(el, _eventCompat(event));
                });
            }
        }
        return function() {};
    })(window);

    addEvent(document.querySelector(".img_bgmask"), "mousewheel", function(event) {
        if (event.delta > 0) {
             $(".img_bgmask .view_img_wrap").css("width",($(".img_bgmask .view_img_wrap").width()+20)+"px");

        }else {
            $(".img_bgmask .view_img_wrap").css("width",($(".img_bgmask .view_img_wrap").width()-20)+"px");
        }
        $(".img_bgmask").find(".view_img_wrap").css({"margin-left":-($(".img_bgmask").find(".view_img_wrap").width()/2),"margin-top":-($(".img_bgmask").find(".view_img_wrap").height()/2)});
    });

    //图片拖动
    var oX = $(".img_bgmask").width()/2,
        oY = $(".img_bgmask").height()/2;

    $(".img_bgmask").on("mousedown",'.view_img_wrap',function(e){
        var obj = $(this),
            onOff = true,
            startX = e.pageX,
            startY = e.pageY,
            moveX,
            moveY;
        $(document).on("mousemove.drag",function(ev){

            // var ev = ev || window.event;
            // if(ev.preventDefault)ev.preventDefault();
            // else ev.returnvalue=false;

            onOff=false;
            moveX = ev.pageX-startX+oX;
            moveY = ev.pageY-startY+oY;
            obj.css({"left":moveX+"px","top":moveY+"px"});
            return false;
        });
        $(document).on("mouseup.drag",function(e){
            if(onOff) return false;
            oX = moveX;
            oY = moveY;
            $(document).off(".drag");
        })
    })

   // 图片预览==============================end=============================




// 关闭窗口========================================start=======================================

$(".leaveMsg-suc").on('click','.close-suc-btn',close_ly_window);

// 关闭窗口========================================end=======================================




// 检测是否支持svg 如果不支持，让地步的icon切换成png格式；

    if (typeof SVGRect == "undefined") {
        $('.svgWrap').remove();
        $(".imgWrap").show();
    }else {
        $('.svgWrap').show();
        $(".imgWrap").remove();
    }



    // 咨询============================start=====================================

    // 咨询填写失去焦点与获取焦点


    function ly_addEvent(obj){
        $(obj).on("focus",'.must',function(){
            $(this).removeClass("message-error").prev().find("a").removeClass("error-alert");
        });
        $(obj).on("input",'input',function(){
            $(this).removeClass("message-error").prev().find("a").removeClass("error-alert");
        });
        $(obj).on("blur",'.must',check_input);

        /*$(obj).on('keyup','.must',function(){
            var num = 0;
            for (var i = 0; i < $(obj+" .must").length; i++) {
                if ($(obj+" .must").eq(i).val() || $.trim($(obj+" .must").eq(i).text())) {
                    num++;
                    if (num == $(obj+" .must").length) {
                        $(".message-btn").removeClass('prevent-send');
                    }else {
                        $(".message-btn").addClass('prevent-send');
                    }
                };
            }
        })*/
    };
    ly_addEvent(".before-talk");
    ly_addEvent(".leave-message");

    // 咨询填写失去焦点与获取焦点====================end==================================




    // 咨询enter键 建立连接=================================start===================================

    $(".before-talk").on('keydown','input',function(e){
        var key = e.keyCode || e.which;
        if(key == 13){
            $(".before-talk").find(".message-btn").trigger("click");
        }
    })

    // 咨询enter键 建立连接================================end=======================================






    // 选择客服================================start===========================================
    // 分配部分点击下拉
    $(".select-customer").on("click", ">div>p", function() {
            if ($(this).next("div").find("a").length > 0) {
                if ($(this).next("div").is(":hidden")) {
                    $(this).addClass("slide-down");
                    $(this).next("div").slideDown(200);
                } else {
                    $(this).removeClass("slide-down");
                    $(this).next("div").slideUp(200);
                }
            }
        });
    // 选择客服==================================end========================================




    // 留言 ===================================start===================================

    $(".leave-message").on("click",".lword-object",function(e){

        // $(this).parent().find("ul").slideToggle(100);
        $(".lword-object-lists").slideToggle(100);
        e.stopPropagation();
    });
    $(".leave-message").on("click",".lword-object-lists li",function(e){
        if($(".lword-object-wrap").hasClass("is_appoint_group")){

            $(this).parents(".lword-object-wrap").find(".lword-object-lists").slideToggle(100);
            $(this).parents(".lword-object-wrap").find(".lword-object").text($(this).text()).removeClass("color-grey-light");
        }else {
            $(".lword-object-lists li").find("ul").hide();
            $(this).find("ul").show();
        };

        e.stopPropagation();
    });
    $(".leave-message").on('click','.person-lists li',function(){

        $(this).parents(".lword-object-wrap").find("p.lword-object").text($(this).parents('.person-lists').attr('data-text')+'/'+$(this).text()).removeClass("color-grey-light");

        $(".leave-message").find(".lword-object-wrap ul").slideUp(100);

    })

    // 留言 ====================================end================================




    // 工具栏===============================start====================================

    // 获得焦点时 移除手机号码input上面的红色边框
    $(".net_callBack_input").focus(function(){
        $(".net_callBack_input").removeClass("error");
    })

    // 加载表情
    var is_onload_face = false;
    function onload_face(){
        if (is_onload_face) return;
        is_onload_face = true;
        var faceArr = ['[拜拜]','[鄙视]','[打电话]','[打哈欠]','[大哭]',
                    '[大笑]','[得意]','[点赞]','[愤怒]','[鼓掌]',
                    '[嘿哈]','[滑稽]','[欢迎]','[奸笑]','[沮丧]',
                    '[开心]','[可伶]','[流汗]','[卖萌]','[破涕为笑]',
                    '[敲打]','[胜利]','[调皮]','[无语]','[捏脸]',
                    '[抱抱]','[摊手]','[比心]','[便便]','[加油]',
                    '[礼物]','[哈士奇]','[成交]','[心碎]','[月亮]'];
        var imgHtml="";
        for (var i = 1; i < 36; i++) {
            imgHtml += "<p><img title='"+faceArr[i-1]+"' src='img/face/53c_min/53c_" + i + ".gif?8'/></p>";
        }
        $(".face-lists").append(imgHtml);

        // 给表情图片绑定点击事件
        $(".face-lists>p>img").click(function() {
            $(".face-lists").toggle();
            // 清空与获得焦点解决火狐br标签与ie8的br问题
            $(".submit-btn-wrap").removeClass("disabled");
            kindeditor.insertHtml("<img style='width:32px;height:32px;' src='"+this.src+"' />");
            kindeditor.focus();
        });
    }

    // 点击热点问题
    $(".function-bar").on("click",".icon-hot",function(){
        //排队的时候 该功能不可用
        if($(".line-up").css("display")=='block') return;
        quickQA(this);

    });
    // 点击下载
    $(".function-bar").on("click",".download",function(){

        $(".service-help").removeClass("active").slideUp(100);
        $(".icon-hot").parent().removeClass("active");
        $(".face-lists").removeClass("active").slideUp(100);
        $(".changeColor-wrap").removeClass("active");
        $(".cutbox").removeClass("active").slideUp(100);
        $(".cutbox_mac").removeClass("active").slideUp(100);
        $(".icon-cut").parent().removeClass("active");
        // 排队的时候 该功能不可用
        if($(".line-up").css("display")=='block') return;
        saveas();
    });
    // 点击评价
    $(".function-bar").on("click",".function-icon-eval",function(){

        $(".service-help").removeClass("active").slideUp(100);
        $(".icon-hot").parent().removeClass("active");
        $(".face-lists").removeClass("active").slideUp(100);
        $(".changeColor-wrap").removeClass("active");
        $(".cutbox").removeClass("active").slideUp(100);
        $(".cutbox_mac").removeClass("active").slideUp(100);
        $(".icon-cut").parent().removeClass("active");
        // 排队的时候 该功能不可用
        if($(".line-up").css("display")=='block') return;
        showVote();
    });


    // 点击笑脸图标打开表情包

    $(".function-bar").on('click',".icon-face",function(event){
        onload_face();//加载表情
        $(".service-help").removeClass("active").slideUp(100);
        $(".icon-hot").parent().removeClass("active");
        $(".changeColor-wrap").removeClass("active");
        $(".cutbox").removeClass("active").slideUp(100);
        $(".cutbox_mac").removeClass("active").slideUp(100);
        $(".icon-cut").parent().removeClass("active");

        if($(".face-lists").hasClass("active")){
            $(".face-lists").removeClass("active");
            $(".face-lists").slideUp(100);
            $(this).parent().removeClass("active");
        }else {
            $(".face-lists").addClass("active");
            $(".face-lists").slideDown(100);
            $(this).parent().addClass("active");
        };
    });
    //点击截图 打开截图功能表
    $(".function-bar").on("click",".icon-cut",function(e){
        if($(".line-up").css("display")=='block'){
            return false;
        };
        $(".service-help").removeClass("active").slideUp(100);
        $(".icon-hot").parent().removeClass("active");
        $(".face-lists").removeClass("active").slideUp(100);
        $(".changeColor-wrap").removeClass("active");
        if(pcOs == "Mac"){
        	if($(".cutbox_mac").hasClass("active")){
        		$(".cutbox_mac").removeClass("active").slideUp(100);
                $(this).parent().removeClass("active");
        	}else{
        		$(".cutbox_mac").addClass("active").slideDown(100);
        		$(this).parent().addClass("active");
        	}
        }else if(pcOs == "Windows"){
	        if (browserType == 'IE' || browserType == 'Chrome') {
	            if($(".cutbox").hasClass("active")){
	                $(".cutbox").removeClass("active").slideUp(100);
	                $(this).parent().removeClass("active");
	            }else {
	                $(".cutbox").addClass("active").slideDown(100);
	                $(this).parent().addClass("active");
	            }
	        }else{
	            insert_snapshot3("www23.53kf.com","7425095");
	        }
        }
    })
    // 点击热点问题icon 打开更多问题
    $(".function-bar").on('click',".icon-hot",function(event){
        if($(".line-up").css("display")=='block'){
            return false;
        };

        $(".face-lists").removeClass("active").slideUp(100);
        $(".changeColor-wrap").removeClass("active");
        $(".cutbox").removeClass("active").slideUp(100);
        $(".cutbox_mac").removeClass("active").slideUp(100);
        $(".icon-cut").parent().removeClass("active");

        if($(".service-help").hasClass("active")){
            $(".service-help").removeClass("active").slideUp(100);
            $(this).parent().removeClass("active");
        }else {
            $(".service-help").addClass("active").slideDown(100);
            $(this).parent().addClass("active");
        }

    });

    //截图功能
    $(".cutbox").on("click","p",function(){
        if($(".cutbox").hasClass("active")){
            $(".cutbox").removeClass("active").hide();
            $(".icon-cut").parent().removeClass("active");
        }else {
            $(".cutbox").addClass("active").slideDown(100);
            $(".icon-cut").parent().addClass("active");
        }
        if($(this).index()==0){
            insert_snapshot3("www23.53kf.com","7425095");
        }else{
            insert_snapshot3("www23.53kf.com","7425095","hide");
        }
    })



    // 鼠标移入之后 图标上面显示提示文字
    var iconTimer = null;
    $(".function-bar").on("mouseenter", ".function-icon", function() {

        if($(".line-up").css("display")=='block' && $(this).parents("label.changeColor-wrap").length<=0 || $(this).parent().hasClass("disabled")){
            return false;
        };

        var that = this;
        iconTimer = setTimeout(function(){
            var text = $(that).attr("data-title");
            var clientX = $(that).offset().left-88-$(".function-bar").offset().left;
            $(".footer-text span").text(text);
            $(".footer-text").css("left", clientX + "px");

            // 解决IE11上传图标渲染异常BUG
            $(".footer-text").css("z-index","15");

        },500)
    });
    $(".function-bar").on("mouseleave", ".function-icon", function() {
        clearTimeout(iconTimer);
        $(".footer-text").css("z-index","-1");
    });



    // 还原功能条所有状态
    function functionBar_return() {
        $(".face-lists").removeClass("active");
        $(".service-help").removeClass("active");
        $(".icon-hot").parent().removeClass("active");
        // $(".svgColor").attr("fill",'#466080');
        $(".cutbox").removeClass("active").slideUp(100);
        $(".cutbox_mac").removeClass("active").slideUp(100);
        $(".icon-cut").parent().removeClass("active");
        $(".changeColor-wrap").removeClass("active");
        $(".toggleHidden").slideUp(100);
    };
    function lword_return(){
        $(".lword-object-wrap").find("ul").slideUp(100);
    }
    $(document).on("click",function(event){
        var obj = event.srcElement ? event.srcElement:event.target;
        if($(".talk").css("display")=='block' && (obj.tagName!="svg" && obj.tagName!="path" && obj.tagName!="SPAN")){
            functionBar_return();
        };
        if($(".leave-message").css("display")=='block'){
            lword_return();
        }
        $('.msg_btns .call_phone_box').hide();$('.msg_btns .call_phone_box .call_phone_input').removeClass('error').val('');
    });

    // 工具栏===============================end====================================




    //评价=================================start=====================================

    // 点击星星选择
    $(".pc-visitor-main").on("click", ".evaluation ul li", function() {
        $(this).parent().addClass("used");
        var index = $(this).index();
        // 循环 通过当前的星星序列号来变化
        $(this).parent().children("li").each(function() {
            if ($(this).index() <= index) {
                $(this).addClass("li-active");
            } else {
                $(this).removeClass("li-active");
            }
        });

        $(this).parents('.evaluation').find('label').text(voteArr[index])

    });

    //在星星上移动，星星颜色变化；
     $(".pc-visitor-main").on("mouseenter", ".evaluation ul li",function(){
        if($(this).parent().hasClass("used")){return false;}
        var index = $(this).index();
        // 循环 通过当前的星星序列号来变化
        $(this).parent().children("li").each(function() {
            if ($(this).index() <= index) {
                $(this).addClass("li-active");
            } else {
                $(this).removeClass("li-active");
            }
        });

        $(this).parents('.evaluation').find('label').text(voteArr[index])

    });
    //鼠标移出，星星变回原五星
    $(".pc-visitor-main").on("mouseleave", ".evaluation ul",function(){
        if($(this).hasClass("used")){return false;}
        $(this).children("li").addClass("li-active");
        $(this).parents('.evaluation').find('label').text(voteArr[4]);
    })

    // 评价里面的发送提交被点击后
    $(".pc-visitor-main").on("click", ".evaluation-btn", function() {
        save_vote();
        $(this).parent().remove();

    });

    //评价==============================start================================









// 发送消息 ==============================start==============================================


    // 请输入 ================start ===================
    $(".please_input").click(function(){
        $(this).hide();
        kindeditor.focus();
    })

    // um.addListener('focus', function() {
    //     $(".please_input").hide();
    // });
    $("body").on("click",".inputArea",function(){
        $(".please_input").hide();
    });
    // um.addListener('contentChange', function() {
    //     $(".please_input").hide();
    // });

    $(".talk").on("click",function(e){
        if($(e.target).parents(".inputArea").length<=0 && kindeditor.isEmpty()){
            $(".please_input").show();
        }
    });


    // 请输入 ================ end ===================


    $(".pc-visitor-footer").on("click",".submit-btn-wrap",function(){
        sendmsg();
        $(".submit-btn-wrap").addClass("disabled");
        kindeditor.focus();
    });




// 发送消息 =============================end==================================================



// 右边 ========================================start======================================================

    //轮播切换
    var timer = null;
    var imgLength = $(".dot").length;
    imgAnimate(imgLength,0);
    function imgAnimate(LENGTH,index){
        clearInterval(timer);
        if(LENGTH==0){
            $(".js_hide_guanggao").hide();
            //$(".content-right-mid-wrap").css("padding-bottom","0");
            return false;
        }
        if(LENGTH<=1){
            $(".guanggao-bottom").hide();
            return false;
        };
        var LEFT = -index*220;
        var LENGTH=LENGTH;
        var index = index;
        timer = setInterval(function(){
            LEFT-=220;
            index++;
            if(LEFT<=-(LENGTH+1)*220){
                $(".guanggao-wrap").css("left",0);
                LEFT=-220;
            }
            if(index==LENGTH){
                index=0;
            };
            $(".guanggao-wrap").animate({left:LEFT+"px"},500);
            $(".dotWrap").find("i").eq(index).addClass("active").animate({"width":"14px"},220).siblings().removeClass("active").animate({"width":"7px"},220);
        },3000)
    };

    // 小圆点点击事件
    $(".dotWrap").on('click','i',function(){
        clearInterval(timer);
        var index = $(this).index();
        $(".guanggao-wrap").css("left",-220*index);
        $(".dotWrap").find("i").eq(index).addClass("active").animate({"width":"14px"},220).siblings().removeClass("active").animate({"width":"7px"},220);
        imgAnimate($(".dot").length,index);

    });


    // 切换公司简介跟客服简介
    $(".content-right-top").on("click",'div',function(){
        $(this).addClass("active").siblings().removeClass("active");
        $(".content-right-mid>div").eq($(this).index()).show().siblings().hide();
    });
})

//显示客服名片信息
function showWorkerCard(data){
    if (data['fk_header_url'] != '') {
        kf_header = data['fk_header_url'];
        $(".pc_talk_content .pc-service-left>img").attr('src',kf_header);
    }
}

//显示对话框自定义格式的内容
function display_talk_msg(msg){
    $(".pc_talk_content").append(msg);
    basic.scrollPage();
}

//显示系统消息
function display_sys_msg(msg,type){
    var show_msg = '';
    if (type == 'wait') {//系统提示：人工客服接入中...
        show_msg = '<p class="system-remind system-wait"><label>'+langs[74]+'</label></p>';
    }else if (type == 'no_kf') {//由于当前人工客服不在线，你可以选择 给我们留言
        show_msg = '<p class="system-remind"><label>'+langs[75]+'<a class="color-blue" style="cursor:pointer;"onclick="showLword()">'+langs[10]+'</a></label></p>';
    }else if (type == 'cannot_answer') {//机器人超过两次无法回答访客的问题，给予系统提示
        //很抱歉我们的机器人无法回答您的问题，你可以选择 人工咨询 或 给我们留言
        if (zsk_admit_rule == '2') {
            show_msg = '<p class="system-remind"><label>'+langs[7]+'<a class="color-blue" style="cursor:pointer;"onclick="showLword()">'+langs[10]+'</a></label></p>';
        }else{
            show_msg = '<p class="system-remind"><label>'+langs[7]+'<a class="color-blue" style="cursor:pointer;" onclick="robotToTalk();">'+langs[8]+'</a>'+langs[9]+'<a class="color-blue" style="cursor:pointer;"onclick="showLword()">'+langs[10]+'</a></label></p>';
        }
    }else{
        show_msg = '<p class="system-remind"><label>'+msg+'</label></p>';
    }
    $(".pc_talk_content").append(show_msg);
    basic.scrollPage();
}

//显示机器人答案
function display_robot_answer(q_id, answer, rela_ques){
    var msg_time = getTime2();
    if(q_id != '0'){
        var html = '';
        if(task_robot_use != 1 && rela_ques != ''){
            html += '<div class="question-lists"><p>'+langs[34]+'</p><ul class="questions">';//相关问题：
            for(var i=0;i<rela_ques.length;i++){
                    html += '<li onmouseup="this.style.color=\'#62778C\'" onclick="dealRobotQa(\''+rela_ques[i].id+'\', \''+rela_ques[i].question+'\',\''+rela_ques[i].answer+'\')">'+rela_ques[i].question+'</li>';
            }
            html += '</ul></div>';
        }

        var msg = '<div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="'+zsk_zsktb_url+'" alt="'+langs[11]+'"></div><div class="pc-service-right"><p><label>'+zsk_name+'</label><span>'+msg_time+'</span></p><div class="pc-service-info pc-robot-info"><div class="pc-robot-answer" id="'+q_id+'" style="overflow-x:auto;">'+answer+'</div>';
        if(task_robot_use != 1 && zsk_feedback == '1') msg += '<div class="pc-robot-eval"><p class="user-unuser"><a class="user answer_helpful buttonType2" data-value="4">'+langs[35]+'</a><a class="unuser buttonType2">'+langs[36]+'</a></p><div class="df"><p>'+langs[37]+'</p><ul><li data-value="0">'+langs[38]+'</li><li data-value="1">'+langs[39]+'</li><li data-value="2">'+langs[40]+'</li><li class="otherOption" data-value="3">'+langs[41]+'</li></ul><div class="triangleUp"></div></div></div>';
        msg += html+'</div></div></div>';
    }else{
        var msg = '<div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="'+zsk_zsktb_url+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><p><label>'+zsk_name+'</label><span>'+msg_time+'</span></p><div class="pc-service-info"><div style="overflow-x:auto;">'+answer+'</div></div></div></div>';
    }
    $(".pc_talk_content").append(msg);
    basic.scrollPage();
}

//显示客服消息
function display_kf_msg(msg,talkname,style,msg_time,msgid,type){
    if (talkname == undefined) talkname = obj_name;
    if (talkname == '') talkname = langs[45];//客服
    if (style == undefined) style = "color:"+color_kfxx+";background-color:"+color_kfqp+";";
    if (msg_time == undefined) msg_time = getTime2();
    if (msgid == undefined || msgid == ''){
        msgid = '';
    }else{
        msgid = 'id="'+msgid+'"';
    }
    var qrcode_str = '';
    if (qrcode_url != '') {//80 微信扫码&nbsp;咨询同步
        qrcode_str = '<span class="qr_code_53kf"><span class="qr_box_53kf"><span class="qr_img_53kf"><img src="'+qrcode_url+'" alt=""></span><em>'+langs[80]+'</em></span></span>';
    }
    if(lnkover==1 || lnkover==6){
        var msg_btns=auto_msg_handle(msg);
    }else{
        var msg_btns='';
    }
    
    var show_msg = '<div class="pc-service" '+msgid+'><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><p><label>'+talkname+'</label><span>'+msg_time+'</span>'+qrcode_str+'</p><div class="pc-service-info" style="'+style+'"><div style="overflow-x:auto;">'+msg+'</div></div>'+msg_btns+'</div></div>';
    if (type == 'offline') {//离线消息
        $('.pc_talk_content').children('#talk_pos').last().before(show_msg);
    }else if (type == 'last') {//历史记录
        $(".pc_talk_content").html(show_msg+$(".pc_talk_content").html());
    }else{
        $(".pc_talk_content").append(show_msg);
    }
    //处理二维码的hover
    if (qrcode_url != '') {
        $(".pc-service-right").on("mouseover",".qr_code_53kf",function(){
            $(this).find(".qr_box_53kf").css("display","block")
            var offsetTop = $(this).offset().top;
            var $insertEm = $(this).find(".qr_box_53kf em"),$insertImg = $(this).find(".qr_img_53kf");
            if(offsetTop<119){
                $(this).find(".qr_box_53kf").css("bottom","-126px");
                $insertImg.insertAfter($insertEm);
                // $insertImg.css("margin-top","5px");
                $insertEm.css("margin-top","5px");
            }else{
                $(this).find(".qr_box_53kf").css("bottom","21px");
                $insertEm.insertAfter($insertImg);
                $insertImg.css("margin-top",0);
                $insertEm.css("margin-top",0);
            }
        })
        $(".pc-service-right").on("mouseout",".qr_code_53kf",function(){
            $(this).find(".qr_box_53kf").css("display","none")
        })
    }
    basic.scrollPage();
}

//显示访客消息
function display_fk_msg(msg,fk_msgid,msg_time,type){
    if (fk_msgid == undefined) {
        var fk_msgid_str = '';
    }else{
        var fk_msgid_str = ' id="'+fk_msgid+'" class="info-status"';
    }
    if (msg_time == undefined) msg_time = getTime2();
    var show_msg = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="pc-customer-info" style="background-color:'+color_fkqp+';"><div class="textWrap" style="color:'+color_fkxx+';">'+msg+'</div><i'+fk_msgid_str+'></i></div></div>';
    if (type == 'last') {
        $(".pc_talk_content").html(show_msg+$(".pc_talk_content").html());
    }else{
        $(".pc_talk_content").append(show_msg);
    }
    basic.scrollPage();
    setQstResTimer(fk_msgid);
}

//显示图文公告信息
function diaplay_cinfo_msg(msg){
    if(msg.logo != "" && msg.title != "" && msg.content != "" && msg.curl != ""){
        var msg_html = '<div style="height:68px;width: 100%;margin-bottom:15px"><div class="pc_ptlink_notice" style="width: 100%;border:1px solid #D8DFEA;background-color: #fff;height:68px;max-width: 512px;float: left;padding: 10px;position: relative;"><div style="width:48px;height: 48px;float: left;"><img src="'+msg.logo+'" alt="" style="pointer-events:none;width: 100%;height:100%;"></div><div class="pc_ptlink_notice_text" style="position: absolute;height: 63px;top:10px;bottom:0;left: 68px;right:99px;"><p class="pc_ptlink_title" style="width:100%;margin-bottom: 10px;font-size:12px;line-height: 18px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;color:#28334B;">'+msg.title+'</p><p class="pc_ptlink_price" style="color:#F44024;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;font-size:12px;line-height: 20px">'+msg.content+'</p></div><div style="float: right;width: 79px;height: 32px;border:1px solid #F44024;color:#F44024;font-size:14px;text-align: center;line-height: 30px;border-radius: 2px;cursor: pointer;margin-top: 7px;" onclick="sendCinfo()"> 发送链接</div></div></div>';
        $(".pc_talk_content").append(msg_html);
        basic.scrollPage();
    }
}

//获取图文消息模板
function getCinfoHtml(logo,title,content,curl){
    var html_str = '';
    if(logo != "" && title != "" && content != "" && curl != ""){
        html_str = '<div class="pc_ptlink_bubble" onclick="window.open(\''+curl+'\',\'_blank\')" style="width: 230px;background-color: #fff;height:68px;box-sizing:border-box; padding:10px;"><div style="width: 48px;height: 48px; float: left;"><img src="'+logo+'" alt="" style="pointer-events:none; width: 100%;height:100%;"></div><div class="pc_ptlink_bubble_text" style="margin-left: 10px;float: left;height: 48px;width: 150px;"><p class="pc_ptlink_title" style="width:100%;margin-bottom: 10px;font-size: 12px ;line-height: 18px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;color:#28334B;">'+title+'</p><p class="pc_ptlink_price" style="color:#F44024;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;font-size:12px;line-height: 20px">'+content+'</p></div></div>';
    }
    return html_str;
}

//显示收到文件消息
function display_fil_msg(name,url,sid,jid6d,type,file_cancel_id,size){//44 未知  68 下载  14 上传成功
    
    if(company_id==72177773) {
        var autoplay="autoplay='autoplay'";
    }else {
        var autoplay="";
    }
    if (file_cancel_id != undefined && file_cancel_id != '') {
        file_cancel_id = 'id="'+file_cancel_id+'"';
    }else{
        file_cancel_id = '';
    }
    if (size != undefined && size != '') {
        size = size>1024? Math.floor(size/1024)>1024? Math.floor(size/1024/1024)+"M":Math.floor(size/1024)+"KB":Math.floor(size)+"B";
    }else{
        size = langs[44];
    }
    if (sid == obj_id || sid == jid6d) {//收到客服发送
        if(type=='video' && !(!!window.ActiveXObject&&document.documentMode==8)){
            var msg = '<div class="pc-service file_cancel" '+file_cancel_id+'><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><div class="upload-wrap kf-uploadFile" >'+'<div class="upload-file fl" style="width:260px;">'+'<video class="upload-video" '+autoplay+'  style="background-color:black;width:240px;height:180px;" src="'+url+'" controls="controls">抱歉，你的浏览器不支持视频播放</video></div>'+                        '</div>'+'</div></div></div>';
        }else if(type=='audio' && !(!!window.ActiveXObject&&document.documentMode==8)){
            var msg = '<div class="pc-service file_cancel" '+file_cancel_id+'><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><div class="upload-wrap kf-uploadFile" style="width:262px;">'+'<div class="upload-file fl" style="width:262px;">'+'<audio class="upload-audio" '+autoplay+'  style="background-color:white;width:250px;height:55px;margin-left:-5px;" src="'+url+'" controls="controls">抱歉，你的浏览器不支持音频播放</audio></div>'+'</div>'+'</div></div></div>';
        }else{
            var msg = '<div class="pc-service file_cancel" '+file_cancel_id+'><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><div class="upload-wrap kf-uploadFile">'+
                '<div class="upload-file fl">'+
                    '<p class="file-header">'+
                        '<span class="fileName">'+basic.beforeRender(name)+'</span>'+
                        '<span class="fileSize fr">'+size+'</span>'+
                    '</p>'+
                    '<div class="uploadStatus color-blue fr"><a href="'+url+'" target="_blank">'+langs[68]+'</a></div>'+
                    '<div class="statusIcon"></div>'+
                '</div>'+
            '</div></div></div>';
        }
    }else{//收到访客发送 
        if(type=='video' && !(!!window.ActiveXObject&&document.documentMode==8)){
            var msg = '<div class="pc-customer"><div class="pc-customer-info" style="background-color:'+color_fkqp+';"><div class="textWrap" style="color:'+color_fkxx+';"><video class="upload-video"'+autoplay+'  style="background-color:black;width:240px;height:180px;" controls="controls" src='+url+'></video></div></div></div>';
        }else if(type=='audio' && !(!!window.ActiveXObject&&document.documentMode==8)){
            var msg = '<div class="pc-customer"><div class="pc-customer-info" style="width:262px;"><div class="textWrap" style="color:white;width:262px;"><audio class="upload-audio"'+autoplay+' style="width:250px;height:55px;margin-left:-2px;" controls="controls" src='+url+'></audio></div></div></div>';
        }else{
            var msg = '<div class="upload-wrap kf-uploadFile">'+
                '<div class="upload-file fr">'+
                    '<p class="file-header">'+
                        '<span class="fileName">'+basic.beforeRender(name)+'</span>'+
                        '<span class="fileSize fr">'+size+'</span>'+
                    '</p>'+
                    '<div class="uploadStatus color-blue fr"><a href="'+url+'" target="_blank">'+langs[68]+'</a></div>'+
                    '<div class="statusIcon"></div>'+
                '</div>'+
            '</div>';
        }
    }
    display_talk_msg(msg);
}


// 场景引导表单输出
function display_scene_form(obj,id,num){
    var step_id = 'scene_'+id+'_'+num;
    var form_str="",input_str="",form_box="";
    // 获取场景引导表单结构
    form_box = "";
    $.each(obj,function(x,y){
        if(y.name == 'phone'){
            var check = y.is_check ==  1 ? ' ischeck' : '';
            form_str = '<div class="from_box form_'+y.name+check+'"><input class="from_input input_'+y.name+'" type="text" placeholder="'+y.bname+'"/><div class="phone_ver_code" onclick ="formVerCode(this)">获取验证码</div></div>';    
        }else{
            form_str = '<div class="from_box form_'+y.name+'"><input class="from_input input_'+y.name+'" type="text" placeholder="'+y.bname+'"/></div>';
        }
        form_box += form_str;
    })
    var msg_time =  getTime2();
    var form_msg = '<div class="pc-service"><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><p><label>'+admin_bname+'</label><span>'+msg_time+'</span></p><div class="pc-service-info guide_form"><div style="overflow:hidden;"><div id="'+step_id+'" class="reception_talk_info guide_f">'+form_box+'<span class="blue_btn form_send" onclick ="formSend('+id+','+num+',this)">发送</span></div></div></div></div></div>';

    $(".pc_talk_content").append(form_msg);
    basic.scrollPage();
};


// 场景引导按钮输出
function display_scene_option(obj,id,num){
    var step_id = 'scene_'+id+'_'+num;
    var step = id+'-'+num;
    var option_content = "";
    $.each(obj,function(i,v){
        var btn_str = "";
        var btn_step = step+'-'+i;
        btn_str = '<div class="form_option_btn white_btn" onclick="chooseCard(\''+v.point+'\',\''+btn_step+'\',this)">'+v.name+'</div>'
        option_content += btn_str;
    });

    $(".pc_talk_content").append("<div id='"+step_id+"' class='form_btn_box'>"+option_content+"</div>");
    basic.scrollPage();
}


</script>



<script src="./saved_resource" type="text/javascript"></script>
<script type="text/javascript">
/*
* @Author: star
* @Date:   2019-09-17 17:28:37
* @Last Modified by:   star
* @Last Modified time: 2019-09-25 15:02:57
*/
/* ------------------------ 互动菜单开始 ------------------------ */

// 记录下menu的渲染type和操作节点。一级菜单为空，二级菜单则记录下进入二级菜单的入口ID(这两个变量仅解决浮动窗口的兼容问题)
var menu_sgin_obj = {
	menu_type : 1,
	menu_id:'',
	menu_idx:''
};

function MenuLoop(){
    // rem为单位的内容高度
    this.content_bottom = parseInt($(".talk-content-wrap").css("padding-bottom"))/10;
    this.data_menu = [];
    this.initFlag = true;
    this.isRender = true;
};
// 
MenuLoop.prototype = {
    init:function(data){
    	if(data.length == 0) return false;
        if(this.initFlag){
            this.initFlag = false;
            // 数据
            this.data_menu = $.extend(true, [], data);
            
            // 添加类表示有多级菜单
            $(".talk").addClass("hasMenuLoop");
            // 浮动窗口特殊处理电话回呼的高度
            if(company_tpl == "minichat"){
				// 是否开启网络回呼
				if(net_callBack == 1){
					if(mini_size == 1){
						$(".talk").addClass("minisize460");
					}else{
						$(".talk").addClass("minisize400");
					}
				}
            }


            $("#scroll_menu_box_by53kf").show();
            // 预览渲染(首次进入默认渲染一级菜单,动态生成唯一标识)
            menu_sgin_obj.menu_type = 1;
            menu_sgin_obj.menu_id = this.postId();
            this.render(1,this.postId());
			
            var _this = this;
            /* 事件绑定 */
            // 菜单收起
            $("#scroll_menu_box_by53kf").on("click",".menu_close",function(){
                $(".scroll_body").animate({width:'0'},200,function(){
                    $("#scroll_menu").hide();
                    setTimeout(function(){
                        $(".menu_open").show();
                    },10)
                });

                // 内容高度调整
                if($('html').hasClass('is_ios11') && $("#mobile").hasClass('newchat_type')){
                    $(".talk-content-wrap").css("padding-bottom","15.2rem")
                }else{
                    $(".talk-content-wrap").css("padding-bottom",(_this.content_bottom)+'rem')
                }
            })
            // 菜单展开
            $("#scroll_menu_box_by53kf").on("click",".menu_open",function(){
                $(".menu_open").hide();
                $("#scroll_menu").show();
                $(".scroll_body").animate({width:'100%'},200);

                // 内容高度调整
                if($('html').hasClass('is_ios11') && $("#mobile").hasClass('newchat_type')){
                    $(".talk-content-wrap").css("padding-bottom","19.2rem")
                }else{
                    $(".talk-content-wrap").css("padding-bottom",(_this.content_bottom+4)+'rem')
                }
            })

            // 点击菜单按钮
            $("#scroll_menu_box_by53kf").on("click",".menu_btn",function(){
            	if($(this).parent().hasClass('menu_up')){
            		menu_sgin_obj.menu_type = 4;
           			menu_sgin_obj.menu_id = $(this).attr('data-id');
            		menu_type = 4;
					_this.render(4,$(this).attr('data-id'))
					return false;
            	} ;

                // q是快问
                var vMsg = '',cMsg = '',qType = 'q';
                // 一级菜单进二级菜单
                if($(this).hasClass('icon-Mobilephonemodel-new')){
                    // 预览渲染(一级进二级渲染)
            		menu_sgin_obj.menu_type = 3;
           			menu_sgin_obj.menu_id = $(this).attr('data-id');
           			menu_sgin_obj.menu_idx = $(this).attr('data-idx');
                    menu_type = 3;
                    _this.render(3,$(this).attr('data-id'),$(this).attr('data-idx'));

                }
                // 问问题
                else{
                    if($(this).parents('.swiper-container').hasClass('menu_lv1')){
                        var idx = $(this).attr('data-idx');
                        vMsg = _this.data_menu[idx].name;
                        cMsg = _this.data_menu[idx].content;
                    }else{
                        vMsg = $(this).text();
                        // k代表快速提问
                        qType = 'k';
                    }
                    sendQaMsg(vMsg,qType);

                    if(cMsg != ""){
                        setTimeout(function(){
                            // a代表快答
                            sendQaMsg(cMsg,'a');
                        }, 1500)
                    }
                }
            })

            // 二级菜单进一级菜单
            $("#scroll_menu_box_by53kf").on("click",".menu_up",function(){
                // 预览渲染(二级进一级渲染,动态生成唯一标识)
             	menu_sgin_obj.menu_type = 4;
        		menu_sgin_obj.menu_id = $(this).attr('data-id');
                _this.render(4,$(this).attr('data-id'));
            })
        }else{
            if(this.data_menu.length > 0){
                $("#scroll_menu_box_by53kf").show();
            }
        }

    },
    postId:function (){
        return Number(Math.random().toString().substr(3,length) + Date.now()).toString(36);
    },
    // 注册实例
    signLoop:function(el){
        if(!el) var el = '#scroll_menu_top';
        var swiper = new Swiper(el, {
                slidesPerView: 'auto',
                speed:200,
                spaceBetween: 0,
                pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    },
    // 互动菜单隐藏
    menuhide : function(){
		// 隐藏互动菜单
		$("#scroll_menu_box_by53kf").hide();
		// 去除互动菜单相关样式
		$(".talk").removeClass("hasMenuLoop");
		$(".talk").removeClass("minisize460");
		$(".talk").removeClass("minisize400");
		// 鼠标移出不可渲染互动菜单（针对浮动窗口移出文档设置）
		this.isRender = false;
    },
    // 预览渲染（type参数：1新增,2修改,3一级进二级,4二级返回一级||还原）
    render:function(type,pid,idx){
        var _this = this;
        if (_this.isRender == false) return;
        // 问答菜单初始化
        if(this.data_menu.length == 0){
            $("#scroll_menu_box_by53kf").hide();
        }else{
            
            // 内容高度调整
            if($('html').hasClass('is_ios11') && $("#mobile").hasClass('newchat_type')){
                $(".talk-content-wrap").css("padding-bottom","19.2rem")
            }else{
                $(".talk-content-wrap").css("padding-bottom",(_this.content_bottom+4)+'rem')
            }
            
            $("#scroll_menu_box_by53kf").show();



            // 各种特殊情况
            // 编辑的菜单和展示的菜单非同级
            if($(".menu_lv2").is(':visible') && type == 1) return false;
            if($(".menu_lv1").is(':visible') && type == 2) return false;
            // 传入了不同的二级
            if($(".menu_lv2").is(':visible') && type == 2 && $(".menu_lv2").attr('data-idx') != idx) return false;

            // dom
            var menu_list = '';
            var menu_str = '';

            // 初始化
            $(".menu_lv1").remove();
            $(".menu_lv2").remove();

            // 渲染一级菜单列表
            if(type == 1 || type == 4){
                for(var i = 0;i<this.data_menu.length;i++){
                    var str = '';
                    if(this.data_menu[i].type == 2 && Object.prototype.toString.call(this.data_menu[i].content) == '[object Array]' && this.data_menu[i].content.length > 0){

                        str = '<div class="swiper-slide menu_btn iconfont icon-Mobilephonemodel-new" data-id="'+this.data_menu[i].postId+'" data-idx="'+i+'">'+this.data_menu[i].name+'</div>';

                    }else{

                        str = '<div class="swiper-slide menu_btn" data-id="'+this.data_menu[i].postId+'" data-idx="'+i+'">'+this.data_menu[i].name+'</div>';
                    }

                    menu_list += str;
                }
                
                menu_str = '<div class="swiper-container menu_lv1" id="'+pid+'" data-idx=""><div class="swiper-wrapper menu_list">'+menu_list+'</div></div>';

                $("#scroll_menu").append(menu_str);

                setTimeout(function(){
                    _this.signLoop('#'+pid);
                },100)


                $("#"+pid).show().siblings().hide();
                $('.menu_close').show().siblings('.menu_up').hide();
                $('#scroll_menu').removeClass('btn_left');

            }
            // 渲染修改后的二级菜单内容 && 渲染一级菜单点击进入的二级菜单
            else if(type == 2 || type == 3){
                var lv2data = this.data_menu[idx].content;
                for(var j = 0;j<lv2data.length;j++){
                    var lv2_str = '';
                    lv2_str = '<div class="swiper-slide menu_btn">'+lv2data[j]+'</div>';
                    menu_list += lv2_str;
                }
                menu_str = '<div class="swiper-container menu_lv2" id="'+pid+'" data-idx="'+idx+'"><div class="swiper-wrapper menu_list">'+menu_list+'</div></div>';

                $("#scroll_menu").append(menu_str);


                // 注册swiper实例,加入到异步队列下方
                setTimeout(function(){
                    _this.signLoop('#'+pid);
                },100)


                $("#"+pid).show().siblings().hide();
                $('#scroll_menu').addClass('btn_left');
                $('.menu_up').show().siblings('.menu_close').hide();
            }

        }
    },
    menuHide : function(){
        $("#scroll_menu_box_by53kf").hide();
    },
};

var menu = new MenuLoop();
window.menu = menu;

try{
	var langs = {"0":"\u8bf7\u8f93\u5165\u6709\u6548\u7684","1":"\u624b\u673a","2":"\u7559\u8a00\u5185\u5bb9","3":"\u4e0d\u80fd\u4e3a\u7a7a","4":"\u53d1\u9001\u5e76\u54a8\u8be2","5":"\u5fc5\u586b","6":"\u63d0\u4ea4\u7559\u8a00","7":"\u5f88\u62b1\u6b49\u6211\u4eec\u7684\u673a\u5668\u4eba\u65e0\u6cd5\u56de\u7b54\u60a8\u7684\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9","8":"\u4eba\u5de5\u54a8\u8be2","9":"\u6216","10":"\u7ed9\u6211\u4eec\u7559\u8a00","11":"\u5934\u50cf","12":"\u5f53\u524d\u5ba2\u670d\u7e41\u5fd9\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9","13":"\u673a\u5668\u4eba\u54a8\u8be2","14":"\u4e0a\u4f20\u6210\u529f","15":"\u8bf7\u60a8\u4e3a\u6211\u7684\u670d\u52a1\u8bc4\u5206\uff1a","16":"\u6ee1\u610f","17":"\u53d1\u9001\u63d0\u4ea4","18":"\u611f\u8c22\u60a8\u7684\u8bc4\u4ef7\uff0c\u6211\u4eec\u4f1a\u7ee7\u7eed\u52aa\u529b!","19":"\u7559\u8a00","20":"\u5168\u90e8\u5ba2\u670d","21":"\u5168\u90e8\u90e8\u95e8","22":"\u79bb\u7ebf","23":"\u5728\u7ebf","24":"\u4f4d\u5ba2\u670d\u5728\u7ebf","25":"\u672a\u5206\u914d\u90e8\u95e8","26":"\u5168\u90e8\u5206\u7ec4","27":"\u667a\u80fd\u673a\u5668\u4eba\uff08\u81ea\u52a9\u7b54\u7591\uff09","28":"\u7559\u8a00\u5bf9\u8c61","29":"\u8bf7\u9009\u62e9\u7559\u8a00\u5bf9\u8c61","30":"","31":"\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5","32":"\u6392\u961f","33":"\u7e41\u5fd9","34":"\u76f8\u5173\u95ee\u9898\uff1a","35":"\u6709\u7528","36":"\u65e0\u7528","37":"\u8ba9\u60a8\u89c9\u5f97\u6ca1\u7528\u7684\u539f\u56e0\uff1a","38":"\u7b80\u5355","39":"\u590d\u6742","40":"\u65e0\u5173","41":"\u5176\u4ed6","42":"\u6b22\u8fce\u60a8\u7684\u54a8\u8be2\uff0c\u671f\u5f85\u4e3a\u60a8\u670d\u52a1!","44":"\u672a\u77e5","45":"\u5ba2\u670d","46":"\u53c2\u6570\u9519\u8bef\uff01","47":"\u65e0\u6548\u7684cmd\uff01","48":"\u65e0\u70ed\u95e8\u95ee\u9898","49":"\u6211","50":"\u8bf7\u8f93\u5165\u53d1\u9001\u5185\u5bb9","51":"\u5bf9\u8bdd\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53d1\u9001\u6d88\u606f\u3002","52":"\u5c1a\u672a\u4e0e\u5ba2\u670d\u5efa\u7acb\u5bf9\u8bdd\uff0c\u4e0d\u80fd\u8bc4\u5206!","53":"\u60a8\u5df2\u7ecf\u8bc4\u8fc7\u5206\uff01","54":"\u7531\u4e8e\u7f51\u7edc\u539f\u56e0\uff0c\u63d0\u4ea4\u8bc4\u5206\u5931\u8d25","55":"\u8bf7\u586b\u5199\u7559\u8a00\u5185\u5bb9\uff01","56":"\u79d2\u540e\u81ea\u52a8\u4e3a\u60a8\u5206\u914d\u5ba2\u670d\u63a5\u5f85...","57":"\u60a8\u592a\u4e45\u6ca1\u6709\u64cd\u4f5c\uff0c\u9875\u9762\u5df2\u8fc7\u671f\uff0c\u8bf7\u5728\u5237\u65b0\u540e\u91cd\u65b0\u64cd\u4f5c\uff01","58":"\u6765\u81ea\u624b\u673a\u5ba2\u670d\u7aef\uff1a<a href=\"http:\/\/www.53kf.com\" target=\"_blank\">http:\/\/www.53kf.com<\/a>","59":"\u7f51\u7edc\u8fde\u63a5\u5df2\u4fee\u590d\uff0c\u60a8\u53ef\u4ee5\u7ee7\u7eed\u53d1\u9001\u5bf9\u8bdd","60":"\u662f\u5426\u63a5\u53d7","61":"\u7684\u8bc4\u5206\u8bf7\u6c42\uff1f","62":"\u5efa\u7acb\u5bf9\u8bdd\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u73af\u5883\u540e\u91cd\u8bd5","63":"\u6587\u4ef6\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u73af\u5883\u540e\u91cd\u8bd5","64":"\u672a\u5206\u7ec4","65":"\u6682\u65e0\u804a\u5929\u8bb0\u5f55","66":"\u83b7\u53d6\u6570\u636e\u5931\u8d25","67":"\u663e\u793a\u4e0a\u6b21\u804a\u5929\u8bb0\u5f55","68":"\u4e0b\u8f7d","69":"\u611f\u8c22\u4f60\u7684\u53cd\u9988","70":"\u4ee5\u4e0a\u4e3a\u5386\u53f2\u8bb0\u5f55","71":"\u53d1\u9001\u6210\u529f\uff0c\u8bf7\u7559\u610f\u4f60\u7684\u7535\u8bdd\u8fdb\u884c\u63a5\u542c","72":"\u5f53\u524d\u5ba2\u670d\u6b63\u5728\u901a\u8bdd\u4e2d\uff0c\u8bf7\u7b49\u5f85\u5ba2\u670d\u56de\u62e8","73":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u53f7\u7801!","74":"\u4eba\u5de5\u5ba2\u670d\u63a5\u5165\u4e2d...","75":"\u7531\u4e8e\u5f53\u524d\u4eba\u5de5\u5ba2\u670d\u4e0d\u5728\u7ebf\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9 ","76":"\u56de\u547c\u529f\u80fd\u5df2\u5173\u95ed","77":"\u4e0e\u5ba2\u670d\u53f7\u7801\u76f8\u540c\uff0c\u8bf7\u786e\u8ba4\u540e\u91cd\u8bd5","78":"\u77ed\u65f6\u95f4\u5b58\u5728\u76f8\u540c\u7684\u547c\u53eb\uff0c\u8bf7\u52ff\u91cd\u590d\u53d1\u8d77","79":"\u5f53\u524d\u901a\u8bdd\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u62e8\u6253","80":"\u5fae\u4fe1\u626b\u7801&nbsp;\u54a8\u8be2\u540c\u6b65","81":"\u63d0\u4ea4\u8868\u5355","82":"\u63d0\u4ea4\u6210\u529f","83":"\u8bf7\u8f93\u5165","84":"\u8bf7\u9009\u62e9","85":"\u63d0\u4ea4\u4e2d...","86":"\u53d1\u9001\u6210\u529f","87":"\u83b7\u53d6\u9a8c\u8bc1\u7801","88":"\u8bf7\u83b7\u53d6\u9a8c\u8bc1\u7801!","89":"\u53d1\u9001","90":"\u624b\u673a\u9a8c\u8bc1\u7801","91":"\u91cd\u65b0\u53d1\u9001","92":"\u5411\u4f60\u7684\u624b\u673a\u53d1\u9001\u4e86\u9a8c\u8bc1\u7801\uff0c\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u5e76\u53d1\u9001","93":"\u626b\u7801+\u5fae\u4fe1","94":"\u590d\u5236\u5fae\u4fe1","95":"\u5728\u7ebf\u62e8\u6253","96":"\u8f93\u5165\u624b\u673a\u53f7\u7801","97":"\u70b9\u51fb\u514d\u8d39\u901a\u8bdd","98":"\u52a0 QQ"};//语言包
	var language = "cn";//语言
	var voteArr = ["\u6076\u52a3  ","\u8f83\u5dee  ","\u4e00\u822c  ","\u8f83\u597d  ","\u6ee1\u610f  "];//评分语言包
	var company_tpl = "minichat";//判断新窗口还是浮框
	var base_host = "53kf.com";
	var master_host = "tb.53kf.com";
	var mtalk_host = "mtalk.53kf.com";//第三方接口host
	var kfs3_host = "kfs3.53kf.com";
	var arg = "";
	var mytempid = "0";//当前窗口id
	var myfirst_tempid = "0";//第一个窗口id
	var tfrom = "2"; //对话开始方式
	var is_group = "0"; // 1:集团挂码
	var is_assist = 0;//是否使用过辅助方式获取访客编号
	var is_get_guest_id = "0";//是否使用浏览器指纹获取访客id
	var finger_host = "fingerprintjs.53kf.com";//浏览器指纹域名
	var is_set_finger = 0;//lnk返回时是否设需要置指纹模式访客编号
    var guest_id_from_get = 0;

	var talkpage = "https://www.huaduocai.net/user/login.html";//咨询页面
	var landpage = "https://www.huaduocai.net/17095.html";//着陆页面
	var frompage = "https://www.huaduocai.net/17095.html";//来源页面
	var talktitle = getCookie("talktitle_72139947");//咨询页面标题
	var channel = "";//渠道
	var search_engine = "";//搜索引擎
	var keyword = "";//关键词
	var ip = "1.192.242.49";//ip地址
	var guest_ip_info = "河南郑州[电信]";//ip详情
	var ucust_id = ""; //客户网站会员ID
	var u_stat_id = '';//第三方数据统计ID
	var uid = '5cbef5b36fcc04cee1410fdf00fe67af';
	var finger_id = "";//浏览器指纹
	var comeinfo = {"logo":"","title":"","content":"","curl":"","sendtype":0};//访客来的图文信息
	var custmsg = "";//访客来的图文信息
	
	var conn_prompt = "您好，欢迎您的咨询，请问有什么需要帮助的吗？";//公司接通提示语
	var conn_prompt_list = {"10198965":{"carousel_prompt1":"\u6b22\u8fce\u62e8\u6253\u7535\u8bdd\uff1a400-901-0239\u8ba2\u8d2d\u3002","carousel_time1":0,"carousel_prompt2":"","carousel_time2":null,"carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10199011":{"carousel_prompt1":"<p><\/p><p style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; background-color: rgb(255, 255, 255);\"><span style=\"color: rgb(0, 0, 0);\"><span><span><span><span style=\"color: rgb(40, 51, 75);\"><strong>\u60a8\u597d &nbsp;\u9999\u9999&amp;mdash;\u521b\u610f\u86cb\u7cd5 . \u9c9c\u82b1\u574a\u4e3a\u60a8\u670d\u52a1\u3002<\/strong><\/span><\/span><\/span><\/span><\/span><\/p><p style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; background-color: rgb(255, 255, 255);\"><span style=\"color: rgb(0, 0, 0);\"><span><span><span><span style=\"color: rgb(40, 51, 75);\"><strong>\u4e0b\u5355\u67e5\u5355\u54a8\u8be2\u76f4\u63a5\u6dfb\u52a0<\/strong><span style=\"color: rgb(229, 51, 51); font-size: 18px;\"><strong>\u5fae\u4fe1<\/strong><\/span><span style=\"color: rgb(229, 51, 51); font-size: 18px;\"><span>&nbsp;<\/span><strong>asxh1818<\/strong><\/span><\/span><strong><span style=\"color: rgb(229, 51, 51); font-size: 16px;\">\u548c<span style=\"color: rgb(0, 0, 0); font-size: 14px;\">QQ<\/span>2672575861<\/span><span>\uff0c<strong>\u6709\u4ec0\u4e48\u95ee\u9898\u4e5f\u65b9\u4fbf\u54a8\u8be2\u6211<\/strong><\/span><\/strong><\/span><\/span><\/span><\/span><\/p><p style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; background-color: rgb(255, 255, 255);\"><span style=\"color: rgb(0, 0, 0);\"><span><span><span><strong><span><span style=\"color: rgb(229, 51, 51); font-size: 16px; background-color: rgb(255, 255, 255);\">\u200b<\/span><span style=\"font-size: 14px; background-color: rgb(229, 102, 0);\"><span style=\"background-color:#E53333;\"><span style=\"color: rgb(229, 51, 51); font-size: 16px; background-color: rgb(255, 255, 255);\">\u672c\u5e97\u4f18\u60e0<\/span><span style=\"color: rgb(229, 51, 51); font-size: 16px; background-color: rgb(255, 255, 255);\">\u2192<\/span><\/span><span style=\"background-color:#FFFFFF;\">\u2192<\/span><\/span><span style=\"background-color:#FFFFFF;\">\u200b<\/span><\/span><\/strong><\/span><\/span><\/span><\/span><strong style=\"font-family: 'sans serif', tahoma, verdana, helvetica; line-height: 1.5;\"><span style=\"font-size: 14px; background-color: rgb(255, 255, 255);\">\u9996\u5355\u7acb\u51cf5-20\u5143\uff08\u7279\u4ef7\u6b3e\u9664\u5916\uff09\uff0c\u8c22\u8c22\uff01<\/span><\/strong><strong style=\"font-family: 'sans serif', tahoma, verdana, helvetica; line-height: 1.5;\"><span style=\"font-size: 14px; background-color: rgb(255, 255, 255);\">\u200b<\/span><\/strong><\/p><p><\/p>","carousel_time1":"30","carousel_prompt2":"<p><strong>\u4eb2\uff0c\u8fd9\u4e2a\u662f\u5373\u65f6\u804a\u5929\u7a97\u53e3\uff0c\u5bb9\u6613\u6389\u7ebf\u7684\u54e6\uff01\u60a8\u53ef\u4ee5\u52a0\u6211<\/strong><span style=\"color: rgb(229, 51, 51); font-size: 16px;\"><strong>\u5fae\u4fe1asx1818&nbsp;\u548cQQ<\/strong><\/span><span style=\"color: rgb(229, 51, 51); font-size: 18px;\"><strong>2672575861<\/strong><\/span><strong>\uff0c\u6709\u4ec0\u4e48\u95ee\u9898\u4e5f\u65b9\u4fbf\u54a8\u8be2\u6211\u3002<span style=\"font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;\"><strong><span style=\"font-size:14px;background-color:#E56600;\"><span style=\"background-color:#E53333;\"><span style=\"color:#E53333;font-size:16px;background-color:#FFFFFF;\">\u672c\u5e97\u4f18\u60e0<\/span><span style=\"color:#E53333;font-size:16px;background-color:#FFFFFF;\">\u2192<\/span><\/span><span style=\"background-color:#FFFFFF;\">\u2192<\/span><\/span><\/strong><\/span><strong><span style=\"font-size:14px;background-color:#E56600;\"><span style=\"background-color:#FFFFFF;\">\u9996\u5355\u7acb\u51cf5-20\u5143\uff08\u7279\u4ef7\u6b3e\u9664\u5916\uff09\uff0c\u8c22\u8c22<\/span><span style=\"background-color:#FFFFFF;\">\uff01<\/span><\/span><\/strong><strong><span style=\"font-size:14px;background-color:#E56600;\"><\/span><\/strong>\u200b<\/strong><\/p>","carousel_time2":"5","carousel_prompt3":"<p><span style=\"text-transform: none; text-indent: 0px; letter-spacing: normal; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-style: normal; font-weight: 400; word-spacing: 0px; float: none; display: inline !important; white-space: normal; orphans: 2; widows: 2; background-color: rgb(239, 243, 246); font-variant-ligatures: normal; -webkit-text-stroke-width: 0px;\"><strong style=\"color: rgb(40, 51, 75); font-size: 13px;\">\u60a8\u597d\uff0c\u662f\u8981\u8ba2\u82b1\u5417?<\/strong><\/span><span style=\"color: rgb(40, 51, 75); text-transform: none; text-indent: 0px; letter-spacing: normal; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 13px; font-style: normal; font-weight: 400; word-spacing: 0px; float: none; display: inline !important; white-space: normal; orphans: 2; widows: 2; background-color: rgb(239, 243, 246); font-variant-ligatures: normal; -webkit-text-stroke-width: 0px; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial;\"><strong><\/strong><\/span><\/p>","carousel_time3":"30","carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"2","conn_prompt":"","carousel":"1"},"10199013":{"carousel_prompt1":"<span style='font-family: \u5b8b\u4f53; font-size: 12pt; mso-spacerun: \"yes\"; mso-font-kerning: 1.0000pt;'><span style='font-family: \u5b8b\u4f53; font-size: 12pt; mso-spacerun: \"yes\"; mso-font-kerning: 1.0000pt;'><font color=\"#ff0000\"><\/font><span style='font-family: \u5b8b\u4f53; font-size: 12pt; mso-spacerun: \"yes\"; mso-font-kerning: 1.0000pt;'><font face=\"\u5b8b\u4f53\"><span style='font-family: \u5b8b\u4f53; font-size: 12pt; mso-spacerun: \"yes\"; mso-font-kerning: 1.0000pt;'><font face=\"\u5b8b\u4f53\"><p style=\"margin: 0pt;\"><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\u60a8\u597d\uff0c\u8d35\u5bbe<\/font><\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\uff01<\/font><\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'>&nbsp;<\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\u3010<\/font><\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\u52ff\u5fd8\u6211<\/font><\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\u3011\u5728\u7684\u54e6\uff0c\u5f88\u9ad8\u5174\u4e3a\u4f60\u670d\u52a1\uff01<\/font> <font face=\"\u5b8b\u4f53\">\u53ef\u4ee5\u52a0\u5fae\u4fe1\uff1a<\/font><\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(229, 51, 51); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'>hdbh99<\/span><\/b><b><span style='background: rgb(239, 243, 246); color: rgb(0, 0, 0); text-transform: none; letter-spacing: 0pt; font-family: \u5b8b\u4f53; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: \"yes\"; mso-shading: rgb(239, 243, 246);'><font face=\"\u5b8b\u4f53\">\u4e3a\u4f60\u4e00\u5bf9\u4e00\u670d\u52a1\uff01<\/font><\/span><\/b><\/p><\/font><\/span><\/font><\/span><\/span><\/span>","carousel_time1":0,"carousel_prompt2":"<p>\u4f60\u597d<\/p>","carousel_time2":"1","carousel_prompt3":"\u5728\u7684\u4eb2\uff0c\u6709\u9009\u597d\u7684\u82b1\u675f\u6b3e\u5f0f\u4e86\u5417\uff1f\u6211\u8fd9\u91cc\u53ef\u4ee5\u4e3a\u60a8\u63a8\u8350\u7684\u3002","carousel_time3":"1","carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10199014":{"carousel_prompt1":"<strong><span style=\"FONT-SIZE: 14px\">\u60a8\u597d\uff01\u6211\u662f\u82b1\u5e97-\u5411\u65e5\u8475\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002<\/span><\/strong><span style=\"BACKGROUND-COLOR: #ffffff; FONT-STYLE: normal; FONT-FAMILY: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; COLOR: #000000; FONT-SIZE: 14px; FONT-WEIGHT: normal\"><strong>\u672c\u5e97\u4f18\u60e0\u2192\u2192\u3010\u6dfb\u52a0\u5fae\u4fe1&nbsp;<span style=\"COLOR: #e53333\"><span style=\"COLOR: #e53333\">hua14081408<\/span>&nbsp;<\/span><\/strong><\/span>&nbsp;\u9996\u5355\u4f18\u60e05-20\u5143&nbsp;","carousel_time1":"30","carousel_prompt2":"<p><font face=\"Segoe UI\"><span style=\"LINE-HEIGHT: 21px; FONT-SIZE: 14px\">\u4eb2\u4eb2\uff0c\u60a8\u597d<\/span><\/font><\/p>","carousel_time2":"5","carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"2","conn_prompt":"","carousel":"1"},"10199015":{"carousel_prompt1":"<span style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);\">\u60a8\u597d\uff01\u6211\u662f\u73ab\u7470\u7cbe\u7075\u9c9c\u82b1\u86cb\u7cd5\u5e97\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002\u672c\u5e97\u4f18\u60e0\u2192\u2192\u3010\u6dfb\u52a0\u5fae\u4fe1<\/span><span style=\"color: rgb(229, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><strong>mgjl190708<\/strong><\/span><span style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><strong>\uff0cQ<\/strong><\/span><span style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><span><span><span><strong><\/strong><\/span><\/span><\/span><\/span><span style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><strong>Q\uff1a<\/strong><\/span><span style=\"color: rgb(229, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><strong>3534606463<\/strong><\/span><span style=\"color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);\"><span style=\"font-size: 14px;\">\u3011 \u4e0b\u5355\u7acb\u51cf<span style=\"color: rgb(229, 51, 51);\">5\u5143-10\u5143<\/span>\uff0c\u7279\u4ef7\u9664\u5916<\/span><\/span>\u200b<br>","carousel_time1":"30","carousel_prompt2":"","carousel_time2":null,"carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"2","conn_prompt":"","carousel":"1"},"10210039":{"carousel_prompt1":"<p><span style=\"line-height: normal; font-family: \u5fae\u8f6f\u96c5\u9ed1; font-size: 14px; background-color: rgb(247, 248, 250);\">\u60a8\u597d\uff0c\u6211\u662f\u6ce2\u599e\u9c9c\u82b1\u86cb\u7cd5\u5e97\uff0c\u5f88\u9ad8\u5174\u4e3a\u4f60\u670d\u52a1\uff01\u672c\u5e97\u4f18\u60e0\u2192\u2192\u3010\u586b\u52a0\u200b\u5fae\u4fe1\uff1a<span style=\"color: rgb(229, 51, 51); font-size: 18px;\"><strong>hdtyh888<\/strong><\/span>\uff0c\u200b\u200bQQ:3180318236\u3011\u9996\u5355\u7acb\u51cf5-20\u5143\uff08\u7279\u4ef7\u6b3e\u9664\u5916\uff09\uff0c\u8c22\u8c22\uff01<\/span><\/p><br><div style=\"left: -1981px; top: 111px; width: 1px; height: 1px; overflow: hidden; white-space: nowrap; position: absolute;\" class=\"__kindeditor_paste__\"><\/div>","carousel_time1":0,"carousel_prompt2":"<span style=\"font-family:\u5fae\u8f6f\u96c5\u9ed1;font-size:14px;line-height:normal;background-color:#F7F8FA;\">\u4eb2 \u8fd9\u662f\u5373\u65f6\u804a\u5929\u5de5\u5177\u54c8 \u5bb9\u6613\u6389\u7ebf\u54e6\uff0c\u6389\u7ebf\u540e\u4f60\u5c31\u627e\u4e0d\u5230\u6211\u4e86\uff0c\u6211\u7684\u5fae\u4fe1<span style=\"color: rgb(229, 51, 51); font-size: 16px;\">hdtyh888<\/span> \u4f60\u4e5f\u53ef\u4ee5\u968f\u65f6\u627e\u5230\u6211\u7684<\/span>","carousel_time2":"5","carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10210040":{"carousel_prompt1":"<p><span style=\"font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:14px;\"><span><strong>\u4eb2\u4eb2\u4f60\u597d\uff01\u6211\u662f\u82b1\u5e97\u767e\u5408\uff0c\u5f88\u9ad8\u5174\u4e3a\u4f60\u670d\u52a1\u3002<\/strong><\/span><span><strong>\u6dfb\u52a0\u5fae\u4fe1<\/strong><strong><span style=\"color: rgb(229, 51, 51); font-size: 16px;\">hdbh99<\/span><\/strong><strong><span style=\"color: rgb(229, 51, 51); font-size: 16px;\">\u200b<\/span><\/strong><\/span><\/span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; font-size: 14px;\"><strong>\uff0cQ<\/strong><\/span><span style=\"font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;color:#28334B;background-color:#FFFFFF;\"><\/span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; font-size: 14px;\"><strong>Q\uff1a<\/strong><\/span><span style=\"font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;background-color:#FFFFFF;\"><span style=\"font-size:14px;\"><span><span style=\"color: rgb(229, 51, 51); font-size: 16px;\"><strong>3270342009<\/strong><\/span><span><strong>\uff0c<\/strong><\/span><\/span><\/span><span style=\"font-size:14px;\"><span><\/span><span style=\"font-size:14px;\"><span><strong>\u4e0b\u5355\u7acb\u51cf<\/strong><\/span><span style=\"color: rgb(229, 51, 51); font-size: 16px;\"><strong>5~20<\/strong><\/span><span><strong>\u5143\u54e6<\/strong><\/span><\/span><\/span><span style=\"font-size: 14px;\"><strong>\uff0c<\/strong><\/span><\/span><span style=\"line-height: 1.5; font-size: 14px;\"><strong>\u7279\u4ef7\u9664\u5916<\/strong><\/span><\/p>","carousel_time1":0,"carousel_prompt2":"<span style=\"font-size: 14px;\">\u4f60\u597d<\/span>","carousel_time2":"5","carousel_prompt3":"<span style=\"font-size:14px;\">\u8bf7\u95ee\u4f60\u662f\u9700\u8981\u8ba2\u82b1\u8fd8\u662f\u8ba2\u86cb\u7cd5<\/span>","carousel_time3":"5","carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10217352":{"carousel_prompt1":"<p><span style=\"background-color: rgb(255, 255, 255);\">1\u3001\u60a8\u597d\uff01\u6ee1\u5929\u661f\u4e3a\u4f60\u670d\u52a1\u3002<br><\/span><\/p><p><span style=\"background-color: rgb(255, 255, 255);\">\u672c\u5e97\u4f18\u60e0<span style='color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);'>\u2192\u2192<\/span>\u200b<span style='color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);'>\u3010\u6dfb\u52a0\u5fae\u4fe1<\/span><\/span><\/p><p><span style=\"color: rgb(229, 51, 51); line-height: 27px; font-size: 18px;\">hdc191314<\/span>\u200b&nbsp;<span style='color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);'>\u3011<\/span>\u200b<span style='color: rgb(40, 51, 75); line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);'><span style=\"line-height: 1.5; font-size: 14px;\">\u4e0b\u5355\u7acb\u51cf<span style=\"color: rgb(229, 51, 51); line-height: 1.5;\">5\u5143-10\u5143<\/span>\uff0c\u7279\u4ef7\u9664\u5916<\/span><\/span><span style='color: rgb(40, 51, 75); font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif; font-size: 13px; background-color: rgb(239, 243, 246);'><\/span><\/p>","carousel_time1":"30","carousel_prompt2":"<p>\u60a8\u597d<\/p>","carousel_time2":"5","carousel_prompt3":"\u52a0\u6211<span style=\"color: rgb(229, 51, 51); font-size: 18px;\">\u5fae\u4fe1hdc191314<\/span><span style=\"color: rgb(229, 51, 51);\"><span style=\"color: rgb(0, 0, 0);\">\u76f4\u63a5\u53d1\u56fe\u9009\u6b3e\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u8282\u7ea6\u4f60<\/span><span style=\"background-color: rgb(255, 255, 255);\"><span><\/span><\/span><span style=\"color: rgb(0, 0, 0);\">\u7684<\/span><span style=\"background-color: rgb(255, 255, 255);\"><\/span><span style=\"color: rgb(0, 0, 0);\">\u65f6<\/span><\/span><span style=\"color: rgb(229, 51, 51);\"><span style=\"background-color: rgb(255, 255, 255);\"><\/span><span style=\"color: rgb(0, 0, 0);\">\u95f4\u54df<\/span><\/span>","carousel_time3":"25","carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"2","conn_prompt":"","carousel":"1"},"10217353":{"carousel_prompt1":"<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; background-color: rgb(239, 243, 246);\"><span style=\"font-size: 14px; line-height: 1.5;\"><strong>\u60a8\u597d\uff01\u6211\u662f\u7ee3\u7403\u9c9c\u82b1\u86cb\u7cd5\u5e97\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002&nbsp;<\/strong><\/span><strong><span style=\"font-size: 14px; line-height: 1.5;\">\u6dfb\u52a0\u5fae\u4fe1\uff1a<\/span><font color=\"#e53333\"><span style=\"font-size: 16px; line-height: 24px;\">hdwww666<\/span><\/font><\/strong><\/span><span style=\"font-size: 14px; line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; background-color: rgb(239, 243, 246);\"><strong>\uff0cQ<\/strong><\/span><span style=\"line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; font-size: 16px; color: rgb(40, 51, 75); background-color: rgb(255, 255, 255); line-height: 1.5;\"><\/span><span style=\"font-size: 14px; line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; background-color: rgb(239, 243, 246);\"><strong>Q\uff1a<\/strong><\/span><span style=\"font-size: 16px; line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; background-color: rgb(255, 255, 255);\"><span style=\"line-height:1.5;font-size:14px;\"><span style=\"line-height:1.5;\"><span style=\"line-height:1.5;color:#E53333;font-size:16px;\"><strong>3533211705<\/strong><\/span><span style=\"line-height:1.5;\"><strong>\uff0c<\/strong><\/span><\/span><\/span><span style=\"line-height:1.5;font-size:14px;\"><span style=\"line-height:1.5;\"><\/span><span style=\"line-height:1.5;\"><span style=\"line-height:1.5;\"><strong>\u4e0b\u5355\u7acb\u51cf<\/strong><\/span><span style=\"line-height:1.5;color:#E53333;font-size:16px;\"><strong>5~20<\/strong><\/span><span style=\"line-height:1.5;\"><strong>\u5143\u54e6<\/strong><\/span><\/span><\/span><span style=\"line-height:1.5;font-size:14px;\"><strong>\uff0c<\/strong><\/span><\/span><span style=\"font-size: 14px; line-height: 1.5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', SimSun, sans-serif; background-color: rgb(239, 243, 246);\"><strong>\u7279\u4ef7\u9664\u5916<\/strong><\/span><\/p><p><br style=\"margin: 0px; padding: 0px; color: rgb(40, 51, 75); text-transform: none; line-height: 1.5; text-indent: 0px; letter-spacing: 0.63px; font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, SimSun, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; word-spacing: 0px; white-space: normal; box-sizing: border-box; orphans: 2; widows: 2; background-color: rgb(255, 255, 255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"><\/p>","carousel_time1":0,"carousel_prompt2":"","carousel_time2":null,"carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10217358":{"carousel_prompt1":"<p><span style=\"FONT-SIZE: 12px\"><span style=\"FONT-SIZE: 14px\">\u60a8\u597d\uff01\u6211\u662f\u8537\u8587\u9c9c\u82b1\u86cb\u7cd5\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002<\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u672c\u5e97\u4f18\u60e0<\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u2192\u2192\u3010\u6dfb\u52a0\u5fae\u4fe1<\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>hdcxh1314\u6216\u8005QQ3263492410<\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\">\uff0c&nbsp;<\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u4e0b\u5355\u7acb\u51cf5\u5143-10\u5143\uff0c\u7279\u4ef7\u9664\u5916<\/strong><\/span><strong><\/strong><\/span><br><\/p>","carousel_time1":0,"carousel_prompt2":"<p><span style=\"BACKGROUND-COLOR: transparent; FONT-STYLE: normal; FONT-FAMILY: 'sans serif',tahoma,verdana,helvetica; COLOR: #000000; FONT-SIZE: 12px; FONT-WEIGHT: 400; TEXT-DECORATION: none\"><span style=\"FONT-SIZE: 14px\">&nbsp;<\/span><\/span><\/p><br><p><span style=\"FONT-SIZE: 12px\"><span style=\"FONT-SIZE: 14px\">\u60a8\u597d\uff01\u6211\u662f<span style=\"font-size:14px;line-height:21px;\">\u8537\u8587\u9c9c\u82b1\u86cb\u7cd5<\/span>\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\u3002<\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u672c\u5e97\u4f18\u60e0<\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u2192\u2192\u3010\u6dfb\u52a0\u5fae\u4fe1<span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>hdcxh1314<\/strong><\/span><\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u6216\u8005QQ3263492410<\/strong><\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\">\uff0c&nbsp;<\/span><span style=\"BACKGROUND-COLOR: #ffffff; COLOR: #e53333; FONT-SIZE: 14px\"><strong>\u4e0b\u5355\u7acb\u51cf5\u5143-10\u5143\uff0c\u7279\u4ef7\u9664\u5916<\/strong><\/span><strong><\/strong><\/span><\/p>","carousel_time2":"20","carousel_prompt3":"\u60a8\u597d\uff0c\u9700\u8981\u8ba2\u82b1\u5417\uff1f","carousel_time3":"1","carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"},"10217372":{"carousel_prompt1":"","carousel_time1":null,"carousel_prompt2":"","carousel_time2":null,"carousel_prompt3":"","carousel_time3":null,"carousel_prompt4":"","carousel_time4":null,"carousel_prompt5":"","carousel_time5":null,"carousel_prompt6":"","carousel_time6":null,"carousel_prompt7":"","carousel_time7":null,"carousel_prompt8":"","carousel_time8":null,"carousel_num":"1","conn_prompt":"","carousel":"1"}};//所有客服个人接通提示语
	var close_prompt = "感谢您的咨询！谢谢，再见！";//公司结束提示语
	var close_prompt_list = {"10198965":"","10199011":"","10199013":"","10199014":"","10199015":"","10210039":"","10210040":"","10217352":"","10217353":"","10217358":"","10217372":""};//所有客服个人结束提示语
	var kf_auto_tip = "0"; //公司设置 客服繁忙提示时间
	var kf_auto_tip_phrase = "不好意思，客服现在正忙，请稍等……"; //公司设置 客服繁忙提示语
	var busy_prompt_list = {"10198965":"","10199011":"","10199013":"","10199014":"","10199015":"","10210039":"","10210040":"","10217352":"","10217353":"","10217358":"","10217372":""};//所有客服个人繁忙提示语
	var busy_prompt_time_list = {"10198965":"1800","10199011":"1440","10199013":"1440","10199014":"1440","10199015":"1400","10210039":"1400","10210040":"35","10217352":"20","10217353":"1440","10217358":"1440","10217372":"30"};//所有客服个人繁忙提示语时间
	var imkf_no_talk_time = "600"; // IM客服无响应时间(s)
	var auto_disconnect = "0";//访客无响应自动断开  0:表示关闭  不为0表示断开需等待分钟数(大于3)
	var disconnect_prompt = "您已经很长时间没有发送信息了，再过3分钟，系统将会自动断开对话";//访客无响应自动断开提示语
	var reject_prompt = "无法连接客服，您已被阻止！";//黑名单阻止提示语

	var prompt_guide_list = [{"title":"\u5176\u4ed6","id":"7427323","promote_link":"","talkpage_link":"","link_init":"","prompt":[{"time":0,"prompt_content":"<span style=\"font-family:sans-serif;\">\u5728\u7684\uff0c\u4eb2\u3002\u8282\u65e5\u671f\u95f4\u8ba2\u82b1\u54a8\u8be2\u91cf\u8f83\u5927\uff0c\u60a8\u53ef\u4ee5\u9009\u597d\u6b3e\u5f0f\u540e\uff0c\u70b9\u51fb&ldquo;\u7acb\u5373\u8d2d\u4e70&rdquo;\u5f55\u5165\u60a8\u7684\u914d\u9001\u4fe1\u606f\uff0c\u76f4\u63a5\u652f\u4ed8\uff0c\u5b8c\u6210\u4e0b\u5355\uff0c\u6211\u4eec\u5c06\u7b2c\u4e00\u65f6\u95f4\u4e3a\u60a8\u5b89\u6392\u5305\u624e\u914d\u9001\uff0c<\/span><strong>\u4e0b\u5355\u8d8a\u65e9\u9001\u7684\u8d8a\u65e9\u54df<\/strong><span style=\"font-family:sans-serif;\">~!\u5982\u9700\u5e2e\u52a9\u8bf7\u6dfb\u52a0\u5fae\u4fe1<strong><span style=\"color: rgb(229, 102, 0);\">hua14081408\u3001<\/span><\/strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;background-color:#FFFFFF;font-size:14px;&quot;; color: rgb(229, 102, 0);\"><strong>asxh565<\/strong><\/span><strong><span style=\"color: rgb(229, 102, 0);\">\u3001<\/span><\/strong><span style=\"font-family:-apple-system, BlinkMacSystemFont, &quot;background-color:#FFFFFF;\"><span style=\"line-height:1.5;\"><span style=\"font-family:-apple-system, BlinkMacSystemFont, &quot;background-color:#FFFFFF;\"><span style=\"font-family:-apple-system, BlinkMacSystemFont, &quot;background-color:#FFFFFF;\"><strong><span style=\"color: rgb(229, 102, 0);\">asxhflower<\/span><\/strong><strong><span style=\"color: rgb(229, 102, 0);\">\u3001<\/span><\/strong><strong><span style=\"color: rgb(229, 102, 0);\">mgxz161009<\/span><\/strong><span><\/span><\/span><\/span><\/span><\/span>\uff0c\u4e13\u4e1a\u5ba2\u670d\u4e00\u5bf9\u4e00\u8d34\u5fc3\u670d\u52a1\u54e6\uff01<strong><u><span style=\"color:#E56600;\"><span style=\"font-family:sans-serif;color:#FF9900;\"><strong><u>\u82b1\u5e97\u7e41\u5fd9,<\/u><\/strong><\/span><span style=\"font-family:sans-serif;color:#FF9900;\"><strong><u>\u67e5\u5355\u8bf7\u5728\u4e0b\u53485\u70b9\u540e<\/u><\/strong><\/span><\/span><\/u><\/strong><span style=\"color:#E56600;\"><\/span><\/span>"}]}];//智能引导
	var guidance_type = "2";//智能引导类型 1:发送消息建立对话 2:键入时建立对话
	var prompt_cookie = getCookie("prompt_guide_72139947");
	var prompt_guide_size = 0;//智能引导已发送条数
	var wait_host = "wait.53kf.com";//智能引导域名
	var robot_prompt_guide = [];//机器人智能引导

	var scene_guide_list = {"1":{"option_id":"1","option_cont":[{"type":"message","cont":"\u6b22\u8fce\u4f60\u7684\u54a8\u8be2"}],"action":"","option_btn":[]}};//场景引导
	var scene_cookie = getCookie("scene_guide_72139947");
	var scene_guide_step = "";//场景引导已经发送过的步骤
	var scene_step_arr = scene_guide_step.split(',');
	var scene_host = "jhscene.53kf.com";//场景引导域名
	var formSendClick = false;//是否点击了场景引导提交

	var robotassign = "0";//接待优先 0:客服优先  1:机器人优先 2:智能引导 3:场景引导
	var frobotassign = "1";//离线接待优先 0:留言 1:机器人优先 2:场景引导
	var zdkf_auto = "15";//手动选择模式自动连接 off:关闭 数字:连接秒数
	var worker_ids = "3314346980@qq.com,3270342009@qq.com,3544266363@qq.com,3263446264@qq.com,3180318236@qq.com,3544415368@qq.com,2687396713@qq.com,3400277363@qq.com,3533211705@qq.com,1420301830@qq.com";//参与接待的工号
	var hasOnlineKf = "1";//是否有参与接待的工号在线
	var zdkf_type = '1';//指定方式 1：人员 3:分组
	var kflist = "off";//是否展示客服列表 on/off
	var kf_status = '1';//显示客服繁忙程度
	var kf_expand = "1";//默认展开分组
	var kf_show = "1";//显示离线客服
	var dept_man_show = "1";//显示客服分组
	var lnk_overflow = "0";//发送lnk用，0:正常  1:走溢出，java不用判断排班  2:没有客服接待，直接进留言 3:抢接机器人对话，不走排班，小休也进
	var receptionList = [];//手动选择 接待列表

	var reg = "0";//咨询前注册
	var is_reg = "0";//是否已经注册过
	var reg_prompt = "";//注册提示语
	var fkzc_fields = [];//注册选项

	var ly_first = true; // 首次留言
	var ly_captcha = '2';//留言验证码是否开启
	var lword_prompt = "您好，现在客服不在线，请留言。如果没有留下您的联系方式，客服将无法和您联系！";//留言提示语
	var m_lwordObject = ''; // 留言对象
	var ly_assign_type = '1';//分配方式   0：手动分配   1：自动分配
	var ly_assign_obj = 'zdgs';//指定方式  zbkf：值班客服  zdgs：指定公司  zdfz：指定分组  zdkf：指定客服
	var ly_assign_value = '';//指定对象
	var fkly_fields = [{"name":"\u59d3\u540d","isMust":"1","field_name":"name","order":"0","isZdy":"0"},{"name":"\u624b\u673a","isMust":"1","field_name":"mobile","order":"1","isZdy":"0"}];//表单留言选项
	var lwordObjectInfo = {"objectType":"auto","object":""};//留言对象
	var lyClick = false;//是否点击提交留言
	var close_ly_window_timer = 0;//留言成功自动关闭窗口定时器

	var robotList = {"0af3b4a8198df7227d2464b5bb5c648e":{"api_robot_id":"","api_name":"","name":"\u667a\u80fd\u5ba2\u670d","prompt":"\u60a8\u597d\uff0c\u6211\u662f\u667a\u80fd\u5ba2\u670d\u3002\u4eba\u5de5\u670d\u52a1\u65f6\u95f4\u4e3a08:00-22:00\u3002\u60a8\u53ef\u4ee5\u9009\u597d\u6b3e\u5f0f\u540e\u76f4\u63a5\u4e0b\u5355\uff0c\u6211\u4eec\u5c06\u6839\u636e\u60a8\u7684\u8ba2\u5355\u4fe1\u606f\u6309\u65f6\u914d\u9001\uff0c\u82b1\u672a\u9001\u5230\uff0c\u5168\u989d\u9000\u6b3e\uff0c\u8bf7\u60a8\u653e\u5fc3\u8d2d\u4e70\uff01\u5982\u9700\u5e2e\u52a9\u8bf7\u6dfb\u52a0\u5fae\u4fe1[hdtyh888]\uff0c\u4e13\u4e1a\u5ba2\u670d\u4e00\u5bf9\u4e00\u8d34\u5fc3\u670d\u52a1\uff01","un_prompt":"\u4eb2,\u6211\u4eec\u5404\u4e2a\u5730\u533a\u90fd\u6709\u5e97\u7684,\u60a8\u53ef\u4ee5\u5728\u5b98\u7f51\u9009\u5b9a\u6b3e\u5f0f\u540e\u63d0\u4ea4\u8ba2\u5355,\u5f55\u5165\u914d\u9001\u4fe1\u606f,\u9009\u62e9\u914d\u9001\u65f6\u95f4,\u5b8c\u6210\u652f\u4ed8,\u6211\u4eec\u5c06\u6309\u7167\u60a8\u6307\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u5740,\u4e13\u4eba\u4e13\u8f66\u51c6\u65f6\u9001\u82b1\u4e0a\u95e8\uff01\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df,mgjl190708.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1,\u4eab\u4f18\u60e0\u54df\u3002","zsktb_url":"..\/img\/upload\/10139947\/robot\/201805282154133139.jpg","id":"0af3b4a8198df7227d2464b5bb5c648e","feedback":"1","zdzrg":"0","unret_times":"2","admit_rule":"0","kw_trans":[],"task_robot_use":0,"hots":[{"id":"9706c651a094ebac3e1a473ebd6bfa82","question":"\u600e\u4e48\u914d\u9001\uff0c\u591a\u4e45\u80fd\u9001\u5230\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;background-color:#FFFFFF;\\&quot;&gt;\u60a8\u5b8c\u6210\u4e0b\u5355\u540e\uff0c\u6211\u4eec\u5c06\u6839\u636e\u60a8\u6307\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u5740\u7531\u4e13\u4eba\u514d\u8d39\u9001\u8d27\u4e0a\u95e8\uff0c\u4e00\u822c2\u5c0f\u65f6\u5185\u53ef\u9001\u8fbe\uff0c\u591c\u95f4\u8ba2\u5355\uff0822:00-08:00\uff09\u5728\u65e9\u4e0a\u9001\u8fbe\u3002&lt;span&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\uff1a&lt;\/span&gt;&lt;span style=\\&quot;color:#E53333;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;background-color:#FFFFFF;\\&quot;&gt;&lt;strong&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/strong&gt;&lt;\/span&gt;&lt;span&gt;\uff0c\u9001\u5230\u540e\u65b9\u4fbf\u53d1\u56fe\u7ed9\u60a8\u770b\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"4c18f85b68d3795c81da78e1f14380be","question":"\u600e\u4e48\u8ba2\u82b1\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u60a8\u53ef\u4ee5\u5728\u5b98\u7f51\u9009\u5b9a\u6b3e\u5f0f\u540e&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u63d0\u4ea4\u8ba2\u5355&lt;\/span&gt;\uff0c\u5f55\u5165\u914d\u9001\u4fe1\u606f\uff0c\u9009\u62e9\u914d\u9001\u65f6\u95f4\uff0c\u5b8c\u6210\u652f\u4ed8\uff0c\u6211\u4eec\u5c06\u6309\u7167\u60a8\u6307\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u5740\uff0c\u4e13\u4eba\u4e13\u8f66\u51c6\u65f6\u9001\u82b1\u4e0a\u95e8\uff01&lt;span&gt;\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df\uff0c&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"805e258074fa4773343a077f28649e1d","question":"\u8fd8\u6709\u6ca1\u6709\u4f18\u60e0\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u6211\u4eec\u5ba2\u670d\u5fae\u4fe1&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\uff0c\u4eab\u9996\u5355\u7acb\u51cf\u4e13\u5c5e\u4f18\u60e0\uff0c\u66f4\u6709\u4e00\u5bf9\u4e00\u8d34\u5fc3\u670d\u52a1\uff01&lt;\/span&gt;"},{"id":"0dc93dedf4058b97c6a1e8148dd93ecc","question":"\u5e97\u5728\u54ea\u91cc\uff1f","answer":"\u4eb2\uff0c\u6211\u4eec\u5728\u5e02\u533a\u3001\u90ca\u533a\u90fd\u6709\u5e97\u7684\uff0c\u60a8\u5177\u4f53\u662f\u9001\u5230\u54ea\u91cc\u5462\uff1f\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df\uff0c&lt;span&gt;mgjl190708&lt;\/span&gt;.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\u3002"},{"id":"cf0da8fa2de931cd74a2d91307eef131","question":"\u5b9e\u7269\u548c\u56fe\u7247\u4e00\u6837\u4e0d\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u57fa\u672c\u4e00\u81f4\u3002\u4e3a\u4e86\u4fdd\u8bc1\u9c9c\u82b1\u7684\u65b0\u9c9c\u7a0b\u5ea6\uff0c\u60a8\u9009\u597d\u6b3e\u5f0f\u4e0b\u5355\u540e\uff0c\u82b1\u827a\u5e08\u90fd\u662f\u6839\u636e\u56fe\u7247\u548c\u63cf\u8ff0\u73b0\u5236\u4f5c\uff0c\u82b1\u6750\u7684\u54c1\u79cd\u3001\u989c\u8272\u3001\u652f\u6570\u4e0e\u56fe\u7247\u5b8c\u5168\u4e00\u81f4\uff0c\u7ec6\u8282\u5904\u7531\u4e8e\u82b1\u827a\u5e08\u5305\u624e\u624b\u6cd5\u4e0d\u540c\uff0c\u53ef\u80fd\u4f1a\u6709\u7565\u5fae\u5dee\u5f02\u3002&lt;span&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\uff1a&lt;\/span&gt;&lt;span style=\\&quot;color:#E53333;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;background-color:#FFFFFF;\\&quot;&gt;&lt;strong&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/strong&gt;&lt;\/span&gt;&lt;span&gt;\uff0c\u505a\u597d\u540e\u65b9\u4fbf\u53d1\u56fe\u7ed9\u60a8\u770b\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"7868f4dd2aab5082e2730ab3176a339e","question":"\u82b1\u7bee\u7684\u4ef7\u683c\u662f\u4e00\u5bf9\u7684\u8fd8\u662f\u4e00\u4e2a\u7684\uff1f","answer":"\u4eb2&amp;nbsp;\u6211\u4eec\u4e0a\u9762\u6709\u4e00\u5bf9\u7684\u548c\u4e00\u4e2a\u7684\uff0c\u73b0\u5728\u8fd8\u6709\u7279\u4ef7\u6b3e\u7684\u5462\uff0c\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;\u7ed9\u60a8\u63a8\u8350\u6b3e\u5f0f\u54df\uff0c\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\uff01"},{"id":"82c9ff417b9f78245d5d399ea79ac827","question":"\u53ef\u4ee5\u8d27\u5230\u4ed8\u6b3e\u5417\uff1f","answer":"&lt;p class=\\&quot;MsoNormal\\&quot;&gt;\u4eb2\uff0c\u9c9c\u82b1\u662f\u4e00\u6b21\u6027\u5305\u624e\uff0c\u4e0d\u80fd\u4e8c\u6b21\u4f7f\u7528\uff0c\u6211\u4eec\u8981\u5148\u4ed8\u6b3e\u624d\u4f1a\u5305\u624e\u7684\u5462\uff0c\u8c22\u8c22\u4eb2\u7684\u7406\u89e3~\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\uff1a&lt;span style=\\&quot;color:#E53333;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;background-color:#FFFFFF;\\&quot;&gt;&lt;strong&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/strong&gt;&lt;\/span&gt;\uff0c\u505a\u597d\u540e\u65b9\u4fbf\u53d1\u56fe\u7ed9\u60a8\u770b\u3002&lt;\/p&gt;"},{"id":"10e65a056b7e5a5c7a3f762a4f1656eb","question":"\u82b1\u5e97\u662f\u54ea\u91cc\u7684","answer":"&lt;span style=\\&quot;color:#111F2C;font-family:&amp;quot;font-size:14px;background-color:#FFFFFF;\\&quot;&gt;\u662f\u7684\u5f53\u5730\u82b1\u5e97\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u5355\uff0c\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u5b89\u6392\u914d\u9001\u3002 &lt;\/span&gt;"}]},"462ebae16c51271acafe567b5063391c":{"api_robot_id":"","api_name":"","name":"\u667a\u80fd\u5ba2\u670d1","prompt":"\u60a8\u597d\uff0c\u6211\u662f\u667a\u80fd\u5ba2\u670d\u3002\u4eba\u5de5\u670d\u52a1\u65f6\u95f4\u4e3a08:00-22:00\u3002\u60a8\u53ef\u4ee5\u9009\u597d\u6b3e\u5f0f\u540e\u76f4\u63a5\u4e0b\u5355\uff0c\u6211\u4eec\u5c06\u6839\u636e\u60a8\u7684\u8ba2\u5355\u4fe1\u606f\u6309\u65f6\u914d\u9001\uff0c\u82b1\u672a\u9001\u5230\uff0c\u5168\u989d\u9000\u6b3e\uff0c\u8bf7\u60a8\u653e\u5fc3\u8d2d\u4e70\uff01\u5982\u9700\u5e2e\u52a9\u8bf7\u6dfb\u52a0\u5fae\u4fe1[hdtyh888]\uff0c\u4e13\u4e1a\u5ba2\u670d\u4e00\u5bf9\u4e00\u8d34\u5fc3\u670d\u52a1\uff01","un_prompt":"\u4e0d\u597d\u610f\u601d\uff0c\u6211\u4e0d\u592a\u660e\u767d\u60a8\u7684\u610f\u601d\uff0c\u8bf7\u60a8\u7528\u4e00\u53e5\u8bdd\u51c6\u786e\u63cf\u8ff0\u3002","zsktb_url":"..\/img\/upload\/10139947\/robot\/201805282214495239.jpg","id":"462ebae16c51271acafe567b5063391c","feedback":"1","zdzrg":"0","unret_times":"2","admit_rule":"0","kw_trans":[],"task_robot_use":0,"hots":[{"id":"0dc93dedf4058b97c6a1e8148dd93ecc","question":"\u5e97\u5728\u54ea\u91cc\uff1f","answer":"\u4eb2\uff0c\u6211\u4eec\u5728\u5e02\u533a\u3001\u90ca\u533a\u90fd\u6709\u5e97\u7684\uff0c\u60a8\u5177\u4f53\u662f\u9001\u5230\u54ea\u91cc\u5462\uff1f\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df\uff0c&lt;span&gt;mgjl190708&lt;\/span&gt;.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\u3002"},{"id":"9706c651a094ebac3e1a473ebd6bfa82","question":"\u600e\u4e48\u914d\u9001\uff0c\u591a\u4e45\u80fd\u9001\u5230\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;background-color:#FFFFFF;\\&quot;&gt;\u60a8\u5b8c\u6210\u4e0b\u5355\u540e\uff0c\u6211\u4eec\u5c06\u6839\u636e\u60a8\u6307\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u5740\u7531\u4e13\u4eba\u514d\u8d39\u9001\u8d27\u4e0a\u95e8\uff0c\u4e00\u822c2\u5c0f\u65f6\u5185\u53ef\u9001\u8fbe\uff0c\u591c\u95f4\u8ba2\u5355\uff0822:00-08:00\uff09\u5728\u65e9\u4e0a\u9001\u8fbe\u3002&lt;span&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\uff1a&lt;\/span&gt;&lt;span style=\\&quot;color:#E53333;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;background-color:#FFFFFF;\\&quot;&gt;&lt;strong&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/strong&gt;&lt;\/span&gt;&lt;span&gt;\uff0c\u9001\u5230\u540e\u65b9\u4fbf\u53d1\u56fe\u7ed9\u60a8\u770b\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"7868f4dd2aab5082e2730ab3176a339e","question":"\u82b1\u7bee\u7684\u4ef7\u683c\u662f\u4e00\u5bf9\u7684\u8fd8\u662f\u4e00\u4e2a\u7684\uff1f","answer":"\u4eb2&amp;nbsp;\u6211\u4eec\u4e0a\u9762\u6709\u4e00\u5bf9\u7684\u548c\u4e00\u4e2a\u7684\uff0c\u73b0\u5728\u8fd8\u6709\u7279\u4ef7\u6b3e\u7684\u5462\uff0c\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;\u7ed9\u60a8\u63a8\u8350\u6b3e\u5f0f\u54df\uff0c\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\uff01"},{"id":"4c18f85b68d3795c81da78e1f14380be","question":"\u600e\u4e48\u8ba2\u82b1\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u60a8\u53ef\u4ee5\u5728\u5b98\u7f51\u9009\u5b9a\u6b3e\u5f0f\u540e&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u63d0\u4ea4\u8ba2\u5355&lt;\/span&gt;\uff0c\u5f55\u5165\u914d\u9001\u4fe1\u606f\uff0c\u9009\u62e9\u914d\u9001\u65f6\u95f4\uff0c\u5b8c\u6210\u652f\u4ed8\uff0c\u6211\u4eec\u5c06\u6309\u7167\u60a8\u6307\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u5740\uff0c\u4e13\u4eba\u4e13\u8f66\u51c6\u65f6\u9001\u82b1\u4e0a\u95e8\uff01&lt;span&gt;\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df\uff0c&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"805e258074fa4773343a077f28649e1d","question":"\u8fd8\u6709\u6ca1\u6709\u4f18\u60e0\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u6211\u4eec\u5ba2\u670d\u5fae\u4fe1&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\uff0c\u4eab\u9996\u5355\u7acb\u51cf\u4e13\u5c5e\u4f18\u60e0\uff0c\u66f4\u6709\u4e00\u5bf9\u4e00\u8d34\u5fc3\u670d\u52a1\uff01&lt;\/span&gt;"},{"id":"cf0da8fa2de931cd74a2d91307eef131","question":"\u5b9e\u7269\u548c\u56fe\u7247\u4e00\u6837\u4e0d\uff1f","answer":"&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u57fa\u672c\u4e00\u81f4\u3002\u4e3a\u4e86\u4fdd\u8bc1\u9c9c\u82b1\u7684\u65b0\u9c9c\u7a0b\u5ea6\uff0c\u60a8\u9009\u597d\u6b3e\u5f0f\u4e0b\u5355\u540e\uff0c\u82b1\u827a\u5e08\u90fd\u662f\u6839\u636e\u56fe\u7247\u548c\u63cf\u8ff0\u73b0\u5236\u4f5c\uff0c\u82b1\u6750\u7684\u54c1\u79cd\u3001\u989c\u8272\u3001\u652f\u6570\u4e0e\u56fe\u7247\u5b8c\u5168\u4e00\u81f4\uff0c\u7ec6\u8282\u5904\u7531\u4e8e\u82b1\u827a\u5e08\u5305\u624e\u624b\u6cd5\u4e0d\u540c\uff0c\u53ef\u80fd\u4f1a\u6709\u7565\u5fae\u5dee\u5f02\u3002&lt;span&gt;\u60a8\u53ef\u4ee5\u6dfb\u52a0\u5fae\u4fe1\uff1a&lt;\/span&gt;&lt;span style=\\&quot;color:#E53333;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;background-color:#FFFFFF;\\&quot;&gt;&lt;strong&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&lt;\/strong&gt;&lt;\/span&gt;&lt;span&gt;\uff0c\u505a\u597d\u540e\u65b9\u4fbf\u53d1\u56fe\u7ed9\u60a8\u770b\u3002&lt;\/span&gt;&lt;\/span&gt;"},{"id":"52a96c3b483ec30e583af654e2b736a9","question":"\u8868\u767d\u9001\u4ec0\u4e48\u82b1\uff1f","answer":"&lt;p&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;\u4eb2\uff0c\u5982\u679c\u60f3\u76f4\u63a5\u8868\u8fbe\u53ef\u4ee5\u9009\u62e9\u7ea2\u8272\u73ab\u7470\u54e6~\u542b\u84c4\u4e00\u70b9\u53ef\u4ee5\u9009\u62e9\u7c89\u8272\u73ab\u7470\u6216\u8005\u9999\u69df\u8272\u73ab\u7470\uff0c\u90fd\u662f\u5f88\u9002\u5408\u8868\u767d\u7684\u54e6\uff01&lt;span&gt;\u60a8\u53ef\u4ee5\u52a0\u6211\u5fae\u4fe1\u54df\uff0c&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span style=\\&quot;color:#9933E5;\\&quot;&gt;&lt;span&gt;mgjl190708&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;.\u7ed9\u60a8\u4e00\u5bf9\u4e00\u670d\u52a1\uff0c\u4eab\u4f18\u60e0\u54df\u3002&lt;\/span&gt;&lt;\/span&gt; &lt;\/p&gt;"}]}};//所有机器人
	var robot_id = "462ebae16c51271acafe567b5063391c";// 在线机器人id
	var frobot_id = "462ebae16c51271acafe567b5063391c";// 离线机器人id
	var robot_host = "robot.53kf.com";//机器人对话服务域名
	var talk_robot_info = [];//机器人对话信息
	var task_robot_info = {"task_id":"init","tconn_promet":{"type":"message","content":["\u60a8\u597d\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u5efa\u8bae\u60a8\u7559\u4e00\u4e0b\u8054\u7cfb\u65b9\u5f0f"]},"tclose_promet":[{"type":"message","content":"\u62b1\u6b49\uff0c\u6211\u6682\u65f6\u56de\u7b54\u4e0d\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u60a8\u53ef\u4ee5\u7559\u4e0b\u8054\u7cfb\u65b9\u5f0f\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8"}],"guide_content":[[{"id":"init_1","title":"\u662f\u5426\u7b26\u5408\u90ae\u7bb1","parent_id":"0","answer":[{"type":"message","content":"\u6536\u5230","time":"2"},{"type":"message","content":"\u60a8\u8fd9\u8fb9\u65b9\u4fbf\u518d\u7559\u4e00\u4e0b\u624b\u673a\u5417\uff1f","time":"2"}],"else":"","question":[{"type":"match","regular":"email"}],"link_id":"0"},{"id":"init_2","title":"\u662f\u5426\u7b26\u5408\u624b\u673a","parent_id":"0","answer":[{"type":"message","content":"\u597d\u7684\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u8054\u7cfb\u60a8\u7684","time":"2"}],"else":"","question":[{"type":"match","regular":"mobile"}],"link_id":"0"},{"id":"init_3","title":"\u662f\u5426\u7b26\u5408QQ","parent_id":"0","answer":[{"type":"message","content":"\u6536\u5230","time":"2"},{"type":"message","content":"\u60a8\u8fd9\u8fb9\u65b9\u4fbf\u518d\u7559\u4e00\u4e0b\u624b\u673a\u5417\uff1f","time":"2"}],"else":"","question":[{"type":"match","regular":"qq"}],"link_id":"0"},{"id":"init_4","title":"\u662f\u5426\u7b26\u5408\u5fae\u4fe1","parent_id":"0","answer":[{"type":"message","content":"\u597d\u7684\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u8054\u7cfb\u60a8\u7684","time":"2"}],"else":"","question":[{"type":"match","regular":"wechat"}],"link_id":"0"}]]};//任务机器人信息
	var task_type = "match_first";//任务库match_first正则匹配优先，keyword_first关键词匹配优先

	var fire_set = "0";//是否开启防火墙
	var fire_level = "1";//防火墙等级
	var lnk_fire = "95d22e7473b727a6fb4b9106d61e7ce50ffd4ae5119e468b8c543747555e3902af85752980485c4346e5a8c7f5821c49"; // 防火墙lnk校验参数
	var firewall_uuid = "bdf8982f62325b5214ffd761560d046f";// 访客防火墙 uuid 作为页面识别
	var verify_code = "0";//是否开启点触式验证码
	var is_verify = "0";//是否需要验证
	var verify_key = "9debd8a726ddc920f026a408ae1654aa";//comet验证用
	var lnk_param = "_%17%B0%1F"; // lnk参数
	var saverec_code = "b294e18d19f6a4f1cdccac6a52452bca2baf1a1abc1f32470398e95848c8e5ed";//聊天记录下载验证码
	var commond_version = "123456"; //webClient.js的版本号，上发到服务端
	var lnkopentime = "1595387935";//访客端程序加载时间
	var open_time = new Date().getTime();//窗口打开时间

	var cname = "花多彩";//公司名称
	var company_logo = "https://www23.53kf.com/img/upload/10139947/mobile/temp/mobile_53kf_1564627982.jpg";//公司logo
	var kf_header = 'style/chat/new2017/image/png/company-logo-default.png';//默认头像
	if (company_logo != '') kf_header = company_logo;
	var adminHeaderUrl = "https://www23.53kf.com/kfsys/imgs/kf_header1.jpg"; //主账号头像
	var admin_bname = "客服";//主账号昵称
	var adminId6d = "10198965";//主账号id6d
	var kefuCodeList = [];//所有客服微信二维码
	var admin_wx_code = '';//当前客服的微信二维码
	var fk_music = "";//访客端音效
	var color_kfqp = "rgb(239, 243, 246)";//客服气泡颜色
	var color_fkqp = "rgb(31, 140, 232)";//访客气泡颜色
	var color_fkxx = "rgb(255, 255, 255)";//访客消息颜色
	var color_kfxx = "rgb(58, 60, 76)";//客服消息颜色
	var color_fsan = "rgb(30, 137, 230)";//发送按钮颜色
	var fk_history = "0";//显示上次聊天记录
	var kfpf = "1";//评分开关
	var vote_true = false;//是否评过分
	var kf_card = "1";//是否展示客服名片
	var net_callBack = "0";//网络回拨功能是否开启
	var callBackClick = false;//是否点了击网络回呼
	var callback_phone = '';//客服网络回拨电话
	var wx_public_account = "1";//是否公总号授权  0,1
	var wx_drainage = "1";//是否开启微信访客端引流   0,1
	var qrcode_url = '';//公众号二维码图片
	var check_phone = "0";//对话中手机号码验证 开关
	var checkPhoneArr = new Array();
	var visitor_form = [];//自定义表单
	var pc_inertact_menu = [];//互动菜单
    var pcMenuHideTimes = "0";//自动隐藏互动菜单点击次数
	var mini_size = "1";//浮框尺寸
	var btn_switch = ["wechat","qq","phone"];//信息识别开关  微信 qq 电话
	var last_talk_id = 0;
	var conn_prompt_num = 0;
	var browserType = getBrowserType();
	var pcOs = getPcOs();
}catch(e){alert(e)}

initial();

function changeModule(type){
	switch(type){
		case 'showkflist':
			$(".talk .line-up").hide();
			$(".maskArea").hide();
			$(".select-customer").show().siblings().hide();
			break;
		case 'talk':
			$(".connectionFail").hide();
			$(".talk").show().siblings().hide();
			$('.pc_talk_content').show();
			$(".talk .line-up").hide();
			try{
				$('.edui-upload-video').eq(0).trigger('play');
			}catch(e){}
			$(".robot-function-bar").hide().siblings(".talk-function-bar").show();
			$(".system-wait").remove();
            $(".maskArea").hide();
			hideRobotTips();
			break;
		case 'reg':
			showRegHtml();
    		$(".before-talk").show().siblings().hide();
			break;
		case 'scene':
			$(".talk").show().siblings().hide();
			$(".talk").addClass('hasScene');
			$('.pc_talk_content').show();
			$(".pc-visitor-footer").hide();
			break;
		case 'lword':
			$(".talk .line-up").hide();
			$(".maskArea").hide();
			showLwordHtml();
			$(".leave-message").show().siblings().hide();
			break;
		case 'stop':
			$(".talk").show().siblings().hide();
			$(".beStopped").show();
			display_sys_msg("access block!");
			break;
		case 'robot':
			changeModule('talk');
			$(".window-content").removeClass('on-talking');
			$(".pc-visitor-footer").show();
			$(".talk-function-bar").hide().siblings(".robot-function-bar").show();
			$("#robot_start_time").text(getTime2());
			showRobotHtml();
			if (zsk_admit_rule != '0') $(".robotToKF").hide();
			if (zsk_api_robot_id != "" || task_robot_use == '1') $(".robotToLword").hide();
			break;
		case 'busy':
			changeModule('talk');
			$("#file-picker").on("click",".webuploader-element-invisible",function(){
				return false;
			})
			if(robot_id != ''){
				$(".toRobot").show();
			}
			$(".personNum").html(m_busyCnt);
			$(".talk .line-up").show();
			if(browserType == 'IE'){
				$(".changeColor-wrap").siblings(".function-icon-disabled").css({"opacity":0.5,"filter":"alpha(opacity = 50)","cursor":"not-allowed"});
				$(".changeColor-wrap").siblings(".function-icon-disabled").not(".upload_box").addClass("disabled");
			}else{
				$(".changeColor-wrap").siblings(".function-icon-disabled").addClass("disabled");
			}
			break;
		case 'black':
			changeModule('talk');
			$(".beStopped").show();
			break;
		case 'lnksuccess':
			changeModule('talk');
			$(".changeColor-wrap").siblings(".function-icon-disabled").removeClass("disabled");
			$(".upload_box").hover(function(){
				$(".upload_copy .svgColor").css("fill","#1F8CEB")
			},function(){
				$(".upload_copy .svgColor").css("fill","#466080")
			})
			showVoteIcon();
			$(".talk").removeClass('hasScene');
			$(".pc-visitor-footer").show();
			if (net_callBack == 1) {
				$(".talk").addClass("hasCallBack");
			}
			var msg_div = "<div id='talk_pos' style='display: none'></div>";
			$('.pc_talk_content').append(msg_div);
			break;
		case 'talkend':
			try{
				$(".pc_ptlink_notice").each(function(){
					$(this).remove();
				});
			}catch (e){}
			$(".maskArea").show();
			try{
				$('.talk .edui-upload-video').trigger('pause');
			}catch(e){}
			kindeditor.html("");
			try{
				menu.menuhide();
			}catch(e){}
			break;
	}
}

//手动选择模式 展示客服列表
function showKfList(){
	changeModule('showkflist');
	var zdkf_prompt = UBBCode(UBBEncode("欢迎光临！请选择以下客服人员开始咨询："));
	var html = "<h6 class='font13 color-grey-deep'>"+zdkf_prompt+"</h6><div class='groups'>";
	if (zdkf_type == '1') {
		if (dept_man_show == '1') {// 指定人员+显示分组
			var kflistHtml = getKflistHtml('group_kf',receptionList);
		}else{
			var kflistHtml = getKflistHtml('kf',receptionList);
		}
	}else if (zdkf_type == '3'){
		var kflistHtml = getKflistHtml('group',receptionList);
	}
	html += kflistHtml;
	if (robot_id != '') {
		var robotHtml = getKflistHtml('robot',robotList[robot_id].name);
		html += robotHtml;
	}
	html += "</div>";
	$(".select-customer").html(html);
}

//组装客服列表html
function getKflistHtml(type,infos){
	var html = '';
	if (type == 'kf') {
		if (dept_man_show != '1') {
			if (kf_expand == 1) {// 20 全部客服
				html += "<p class='slide-down'>"+langs[20]+"</p><div class='customer-lists'>";
			}else{
				html += "<p>"+langs[20]+"</p><div style='display:none;' class='customer-lists'>";
			}
		}
		for (var i=0;i<infos.length;i++){
			var worker_id = infos[i].worker_id;
			var nowlink = infos[i].nowlink;
			var maxlink = infos[i].max_link;
			var bname = infos[i].bname;
			var is_online = infos[i].state;
			var kf_state = '';
			if (is_online == '1') {
				kf_state = kfState(maxlink, nowlink);
				html += "<p onclick='to_kf(\""+worker_id+"\",1)'><a class='font12 color-blue'>"+bname+kf_state+"</a></p>";
			}else{
				if (kf_show == '1') {
					html += "<p onclick='to_kf(\""+worker_id+"\",0)'><a class='font12 color-grey-light'>"+bname+"</a><font class='color-blue'>("+langs[19]+")</font></p>";
				}
			}
		}
		html += "</div>";
	}else if (type == 'group') {
		html += "<p class='slide-down'>"+langs[26]+"</p><div class='customer-lists'>";//全部分组
		for (var i=0;i<infos.length;i++){
			var group_name = infos[i].group_name;
			var worker_ids = infos[i].worker_ids;
			var worker_num = "<b style='color:gray'>"+langs[22]+"</b>";//离线
			var is_online = 0;
			if (infos[i].online_num > 0) {
				worker_num = infos[i].online_num+langs[24];//位客服在线
				is_online = 1;
			}
			html += "<p onclick='to_kf(\""+worker_ids+"\","+is_online+")'><a class='font12 color-blue'>"+group_name+"</a> ("+worker_num+")</p>";
		}
		html += "</div>";
	}else if (type == 'group_kf') {
		for (var i=0;i<infos.length;i++) {
			if (infos[i].online_num == 0 && kf_show != '1') continue;
			var group_name = infos[i].group_name;
			if (group_name == '') group_name = langs[64];//未分组
			if (kf_expand == 1) {
				html += "<p class='slide-down'>"+group_name+"</p><div class='customer-lists'>";
			}else{
				html += "<p>"+group_name+"</p><div style='display:none;' class='customer-lists'>";
			}
			var kf_html = getKflistHtml('kf',infos[i].workers,true);
			html += kf_html;
		}
	}else if (type == 'robot') {
		html += "<p class='slide-down'>"+langs[27]+"</p>";//智能机器人（自助答疑）
		html += "<div class='customer-lists'><a class='font12 color-blue' onclick='showzsk()'>"+infos+"</a></div>";
	}
	return html;
}

// 客服状态
function kfState(max_link, cnt){
	var state = "";
	if(max_link!=cnt){
		if (kf_status == '1') {
			if (cnt >= Math.ceil(max_link/2)) {
				state = '<font color="#FF0000">('+langs[33]+')</font>';//繁忙
			}
		}
	}else{
		state = '<font color="#FF0000">('+langs[32]+')</font>';//排队
	}
	return state;
}

function showRegHtml(){
	var reg_html = '<div class="message-h font13 color-grey-deep">'+UBBCode(UBBEncode(reg_prompt))+'</div>';
	for(var key=0;key<fkzc_fields.length;key++){
		if (fkzc_fields[key].isMust == 1) {
			reg_html += '<p class="message-name font12 color-grey-deep"><label class="color-red">*</label>'+fkzc_fields[key].name+'<a>'+langs[0]+fkzc_fields[key].name+'</a></p><input id="reg_'+fkzc_fields[key].field_name+'" type="text" class="must"/>';
		}else{
			reg_html += '<p class="message-name font12 color-grey-deep">'+fkzc_fields[key].name+'<a>'+langs[0]+fkzc_fields[key].name+'</a></p><input id="reg_'+fkzc_fields[key].field_name+'" type="text"/>';
		};
	}
	reg_html += '<a class="message-btn prevent-send" id="to_link" onclick="sendReg(this)" style="background-color:'+color_fsan+';">'+langs[4]+'</a>';//发送并咨询
	$(".before-talk").html(reg_html);
}

function showRobotHtml(){
	var hot_str = '';
	if (zsk_hots.length > 0) {
		var q_list = '';
		for (var i = 0; i < zsk_hots.length; i++) {
			var order = i + 1;
			q_list += '<li onmouseup="this.style.color=\'#62778C\'" onclick="dealRobotQa(\''+zsk_hots[i].id+'\',\''+zsk_hots[i].question+'\',\''+zsk_hots[i].answer+'\',\'hot\')">'+order+'.'+zsk_hots[i].question+'</li>';
		}
		hot_str += '<div class="question-lists" ><p>以下是您关心的问题吗：</p>'+
						'<ul class="questions">'+
							q_list+
						'</ul>'+
					'</div>';
	}
	var html_str = '<div class="pc-service" id="robot_start">'+
						'<div class="pc-service-left" style="display: inline-block;"><img src="'+zsk_zsktb_url+'" alt="头像"></div>'+
						'<div class="pc-service-right">'+
							'<p><label>'+zsk_name+'</label><span id="robot_start_time"></span></p>'+
							'<div class="pc-service-info pc-robot-info">'+
								'<h6 class="pc-robot-reply">'+UBBCode(UBBEncode(zsk_prompt))+'</h6>'+
								hot_str+
							'</div>'+
						'</div>'+
					'</div>';
	display_talk_msg(html_str);
}

function showLwordHtml(){
	var fkly_html = '<div class="message-h font13 color-grey-deep">'+UBBCode(UBBEncode(lword_prompt))+'</div>';
	for(var key=0;key<fkly_fields.length;key++){
		if (fkly_fields[key].isMust == 1) {
			fkly_html += '<p class="message-name font12 color-grey-deep"><label class="color-red">*</label>'+fkly_fields[key].name+'<a>'+langs[0]+fkly_fields[key].name+'</a></p><input id="ly_'+fkly_fields[key].field_name+'" type="text" class="must"/>';
		}else{
			fkly_html += '<p class="message-name font12 color-grey-deep">'+fkly_fields[key].name+'<a>'+langs[0]+fkly_fields[key].name+'</a></p><input id="ly_'+fkly_fields[key].field_name+'" type="text"/>';
		};
	}
	if (lwordObjectInfo['objectType'] == 'auto') {
		m_lwordObject = lwordObjectInfo['object'];
	}else{
		var is_appoint_group = '';
		var object_html = '';
		var objectName = langs[29];
		var objectArr = lwordObjectInfo['object'];
		if (lwordObjectInfo['objectType'] == 'zdkf') {
			var is_first_kf = true;
			for(var group_id in objectArr){
				var group_name = objectArr[group_id]['group_name'];
				var workers = objectArr[group_id]['workers'];
				var worker_str = '<ul data-text="'+group_name+'" class="person-lists slide-tpl" style="display: none;">';
				for(var id6d in workers){
					var bname = workers[id6d];
					if (bname == '' || bname == null) bname = langs[45];
					if (is_first_kf) {
						is_first_kf = false;
						m_lwordObject = 'w#' + id6d;
						objectName = group_name+'/'+bname;
					}
					worker_str += '<li class="person-list" onclick="set_ly_obj(this)" data-val="w#'+id6d+'" title="'+bname+'">'+bname+'</li>';
				}
				worker_str += '</ul>';
				object_html += '<li class="lword-object-list" data-val="0">'+group_name+worker_str+'</li>';
			}
		}else{
			is_appoint_group = 'is_appoint_group';
			var is_first_group = true;
			for(var group_id in objectArr){
				if (is_first_group) {
					is_first_group = false;
					m_lwordObject = 'g#' + group_id;
					objectName = objectArr[group_id];
				}
				object_html += '<li onclick="set_ly_obj(this)" data-val="g#'+group_id+'">'+objectArr[group_id]+'</li>';
			}
		}
		fkly_html += '<div class="leaveObj-wrap field-wrap" style="display:block;font-size:12px;">'+
						'<p class="message-name isInfo-msg"><label class="color-red">*</label><span>'+langs[28]+'</span></p>'+
						'<div class="lword-object-wrap '+is_appoint_group+'">'+
							'<p class="lword-object color-grey-light">'+objectName+'</p>'+
							'<ul class="lword-object-lists" style="display: none;">'+object_html+'</ul>'+
						'</div>'+
					'</div>';
	}
	fkly_html += '<p class="message-name font12 color-grey-deep">'+langs[2]+'</p>';
	fkly_html += '<textarea id="ly_content"></textarea>';
	fkly_html += '<a class="message-btn" id="submit_lword" onclick="submit_lword()" style="background-color:'+color_fsan+';">'+langs[6]+'</a>';

	try{//定制留言界面 预留方法
		fkly_html = get_ly_html(fkly_html);
	}catch(e){}
	$(".leave-message").html(fkly_html);
	// if (is_reg == '1') getUserCard();
}

//设置留言对象
function set_ly_obj(obj){
	m_lwordObject = $(obj).attr("data-val");
}


// 设置留言项的值
function setLyItemsValue(userCard){
	for(var key=0;key<fkly_fields.length;key++){
		var field = fkly_fields[key].field_name;
		if (userCard[field] == undefined || userCard[field] == '' || userCard[field] == null) continue;
		try{document.getElementById("ly_"+field).value = userCard[field];}catch(e){}
		if (field == 'name') {
			$("#ly_name").prev().hide();
			$("#ly_name").hide();
		}
	}
}





//留言关闭窗口
function close_ly_window(){
	if (company_tpl == 'minichat') {
		window.location.reload(true);
		try{
			top.postMessage('53kf_min_window', '*');//强制对话框最小化
		}catch(e){}
	}else{
		basic.close_window();
	}
	try{
		if (close_ly_window_timer) {
			clearInterval(close_ly_window_timer);
		}
	}catch(e){}
}

// 发送访客消息，点发送按钮
function sendmsg(msg) {
	var is_empty = false;
	if (msg == undefined) {
		msg = $.trim(kindeditor.html());
		var blank = /<br \/>$/;
		if(blank.exec(msg)){
			msg = msg.replace(blank,'');
		}
		if (kindeditor.text().replace(/&nbsp;/g,'').replace(/ /g,'') == '') is_empty = true;
	}else{
		if (msg.replace(/&nbsp;/g,'').replace(/ /g,'') == '') is_empty = true;
	}

	if(is_empty){
		basic.toastOut(langs[50]);//发送内容不能为空，请重新输入。
		kindeditor.html("");
		return false;
	}
	var kw_trans_msg = msg;//机器人关键词转人工用
	kindeditor.html("");
	if(guidance_type == 1) zn_order();//智能引导

	//处理base64粘贴截图
	var reg = new RegExp("<img src=\"data:image/[^>]*;base64[^>]*\" />", "gi");
	if (reg.test(msg)) {
		msg = msg.replace(reg,function(img){
			var base64_src = img.replace(/<img[^>]*src=[\'\"\s]*([^\s\'\"]+)[^>]*>/ig,'$1');
			var img_str = '';
			$.ajax({
				type: "POST",
				url: http_pro+host+'/upload_img_file.php?company_id='+company_id,
				data: "type=base64&base64_src="+encodeURIComponent(base64_src),
				dataType: "json",
				async : false,
				success: function(result){
					if (result.upload == 'success') {
						img_str = '<img src="'+result.url+'" border="0"/>';
					}
				}
			});
			return img_str;
		});
	}
	try{
		msg = msgFilter(msg);
	}catch(e){}
	//过滤超链接
	if (isJsLink(msg)) return false;
	
	var show_msg = msg;
	show_msg = UBBEncode(show_msg);
	var reg = new RegExp("(\\[MOBILE\])(\\d+?)(\\[\\/MOBILE\\])","gim");
	var has_mobile = 0;
	if (reg.test(show_msg) == true) {
		has_mobile = 1;
	}
	show_msg = UBBCode(show_msg);
	msg = UBBEncode(msg);
	msg = $.trim(msg);
	if(lnkover != 1){
		if (lnkover==4) {// 更改成机器人咨询
			if (zsk_admit_rule == '1') $(".robotToKF").show();
			if (zsk_kw_trans.length > 0 && task_robot_use == '0') {
				for (var i = 0; i < zsk_kw_trans.length; i++) {
					if (zsk_kw_trans[i].match_type == '0') {
						if (kw_trans_msg == zsk_kw_trans[i].key_word) {
							display_fk_msg(show_msg);
							offToTalk('robot');
							return;
						}
					}else{
						if (kw_trans_msg.indexOf(zsk_kw_trans[i].key_word) != -1) {
							display_fk_msg(show_msg);
							offToTalk('robot');
							return;
						}
					}
				}
			}
			getRobotReply(show_msg);
		}else if(lnkover==0 || lnkover==5 || lnkover==6){
			display_fk_msg(show_msg);
            if (pcMenuHideTimes != '0') {
                menu.menuhide();
            }
			var waitMsg = {
				'msg':msg,
				'msg_type':'g',
				'fk_msgid':undefined,
				'msgid':undefined
			};
			msg_wait_arr.push(waitMsg);
			if (lnkover==5) {
				var show_msg_busy = langs[12]+'<a style="cursor:pointer;" class="color-blue" onclick="showLword()">'+langs[10]+'</a>';
				if (robot_id != '') {
					show_msg_busy = langs[12]+'<a style="cursor:pointer;" class="color-blue" onclick="showzsk(\''+robot_id+'\')">'+langs[13]+'</a>'+langs[9]+'<a class="color-blue" style="cursor:pointer;" onclick="showLword()">'+langs[10]+'</a>';
				}
				display_sys_msg(show_msg_busy);
			}
		}else{
			basic.toastOut(langs[51]);//对话已结束，不能发送消息。
		}
		return;
	}else{
		if(msg==""){
			basic.toastOut(langs[50]);//发送内容不能为空，请重新输入。
			return;
		}
        if (pcMenuHideTimes != '0') {
            menu.menuhide();
        }
		var fk_msgid = 'msgid_'+ new Date().getTime();
		var send_qst = true;

		if (check_phone == 1) {
			send_qst = checkPhoneOnTalk(msg);
			if (!send_qst) fk_msgid = undefined;
		}
		display_fk_msg(show_msg,fk_msgid);
		if (send_qst) qstmsg(UrlEncode(msg),fk_msgid);
		try{
			clearTimeout(carousel_id);
		}catch(e){}
	}
}


//msg_type: q(快问快答 访客问题) a(快问快答 客服答案) k(快速提问 无答案) z(访客表单)
function sendQaMsg(msg,msg_type,fk_msgid){
	try{
		msg = msgFilter(msg);
	}catch(e){}
	//过滤超链接
	if (isJsLink(msg)) return false;
	if (msg == '') return;
	var msgid = undefined;
	if (msg_type == 'k') fk_msgid = "msgid_" + new Date().getTime();
	if (msg_type == 'z') msgid = fk_msgid.replace('formid_','');
	var show_msg = UBBCode(UBBEncode(msg));
	if (msg_type == 'q' || msg_type == 'k') {
		display_fk_msg(show_msg,fk_msgid);
	}else if (msg_type == 'a') {
		display_kf_msg(show_msg);
	}
	if (lnkover == 1) {
		qstmsg(UrlEncode(UBBEncode(msg)),fk_msgid,msg_type,msgid);
	}else{
		var waitMsg = {
			'msg':UBBEncode(msg),
			'msg_type':msg_type,
			'fk_msgid':fk_msgid,
			'msgid':msgid
		};
		msg_wait_arr.push(waitMsg);
		zn_order();
	}

    if ((msg_type == 'q' || msg_type == 'k') && pcMenuHideTimes != '0') {
        menu.menuhide();
    }
	
	if (msg_type == 'z') {
		setTimeout(function(){
			changeFormStatus(fk_msgid,false);
		},20000);
	}

	try{
		clearTimeout(carousel_id);
	}catch(e){}
}

//插入图片对象操作
var to_insert_img_obj = {
	sendimg : function(urlstr){
		if(urlstr==""||urlstr=="请输入网络地址或点击浏览上传"){
			basic.toastOut('图片路径不能为空');
			return false;
		}
		var urlcode='[IMG]'+urlstr+'[/IMG]';
		to_insert_img_obj.sendimgmsg(urlcode);
		return true;
	},
	ajaxuploadimg:function(){
		$.ajaxFileUpload({
			url:'upload_img.php?type=visiter&company_id='+company_id,//处理图片脚本
			secureuri :false,
			fileElementId :'img_pic',//file控件id
			dataType : 'json',
			success : function(data, status){
				if(data.upload=='success'){
					$("#src-input").val(data.url);
				}else if(data.upload=='fail'){
					basic.toastOut("上传失败");//上传失败
				}
				if(data.filetype=='error'){
					basic.toastOut("暂不支持该格式!");//暂不支持该格式!
				}
				if(data.maxsize=='true'){
					basic.toastOut("上传文件/图片不能超过100M");//上传文件/图片不能超过100M
				}
			},
			error: function(data, status, e){
				alert(e);
			}
		});
	},
	sendimgmsg:function(msg){
		if (lnkover==1 || lnkover==4 || lnkover==6 || lnkover==0) {
			sendmsg(msg);
		}
	}
};

//图片上传返回
function imgUploadResponse(file,response,wh){
	if (wh == undefined) wh = '';
	var msg = '[IMG]'+response.url+wh+'[/IMG]';
	try{
		msg = msgFilter(msg);
	}catch(e){}
	var show_msg = msg;
	msg = UBBEncode(msg);
	msg = HtmlEncode(msg);
	msg = $.trim(msg);
	$("#"+file.id).data({url:response.url});
	qstmsg(UrlEncode(msg),file.id);
}

function fileUploadResponse(file,response){
	var file_url = "http://"+host+"/down_file.php?type=srv&company_id="+company_id+"&file="+response.real_name;
	file_url = UrlEncode(file_url);
	send_FIL(file_url,'cfile',file.size); // 发送文件给客服
	$("#"+file.id).find(".uploadStatus").text(langs[14]).css("color","#1E88E5");//上传成功
	try{
		clearTimeout(carousel_id);
	}catch(e){}
}

// 展示线索追问按钮
function showTaskOption(options){
    var option_content = "";
    $.each(options,function(i,v){
        var btn_str = "";
        btn_str = '<div class="form_option_btn white_btn" onclick="clickTaskOption(\''+v.link_id+'\',this)">'+v.name+'</div>'
        option_content += btn_str;
    });

    $(".pc_talk_content").append("<div class='form_btn_box'>"+option_content+"</div>");
    basic.scrollPage();
}

//显示机器人问题提示
function showRobotTips(infos){
	var tips = infos.rows;
	var q_list = "";
	for (var i = 0; i < infos.total; i++) {
		var question = tips[i]["question"];
		var answer = tips[i]["answer"];
		var q_id = tips[i]["q_id"];
		if (zsk_api_name == 'yw') {
			q_list = q_list + "<p onclick=\"getRobotReply('" + question.replace(/'/g,"\\&#039;") + "')\" title='"+question.replace(/'/g,"&#039;")+"'>" + question + "</p>";
		}else{
			q_list = q_list + "<p onclick=\"dealRobotQa('" + q_id + "', '" + question.replace(/'/g,"\\&#039;") + "', '" + answer.replace(/&#039;/g,"\\&#039;") + "')\" title='"+question.replace(/'/g,"&#039;")+"'>" + question + "</p>";
		}
	}
	if (q_list != ""){
		$(".guanlian-problem").html(q_list).show();
	} else {
		hideRobotTips();
	}
}

//隐藏机器人问题提示
function hideRobotTips(){
	$(".guanlian-problem").html('');
	$(".guanlian-problem").hide();
}

//展示机器人消息加载框
function showRobotLoad(){
	removeRobotLoad();
	var show_msg = '<div class="loading_box" id="loading_box"><div class="message_loading"></div></div>';
	display_talk_msg(show_msg);
}

//移除机器人消息加载框
function removeRobotLoad(){
	$("#loading_box").remove();
}

//显示自动连接时间提示
function showAutoLink(auto_time){
	$(".connectionFail").show();
	var html = '<label>'+langs[30]+'</label><span>'+auto_time+'</span><label>'+langs[56]+'</label>';//秒后自动为您分配客服接待...
	$(".connectionFail").html(html);
}

//隐藏自动连接
function hiddenAutoLink(){
	$(".connectionFail").hide();
	try{
		clearInterval(m_autoTimer);
	}catch(e){}
}

// 场景引导手机验证
var time_flag = false;
function formVerCode(obj){
	var phonereg =new RegExp(/^[1][3|4|5|6|7|8|9][0-9]{9}$/);
	var phoneval = $(obj).prev().val();
	if(phoneval == "" || !phonereg.test(phoneval)){
		$(obj).prev().addClass('error_import');
		return false;
	}
	var ver_code_str = '<div class="from_box vercode"><input class="from_input input_vercode" type="text" placeholder="'+langs[90]+'"></div>';//手机验证码

	if($(obj).parents(".guide_form").find(".vercode").length < 1 ){
		time_flag = false;
		$(obj).html("60 S")
		$(obj).parents(".form_phone").after(ver_code_str);
	}
	if(!time_flag){
		time_flag = true;
		sendSceneFormCode(phoneval);
		timeGo(obj,60,function(){
			$(obj).html(langs[91]);//重新发送
			time_flag = false;
		});
	}
}

// 倒计时
function timeGo(obj,count,fn) {
	if(!count) count = 60;
	var timout = setInterval(function(){
		count--;
		$(obj).html(count+" S");
		if(count == 0){
			clearInterval(timout)
			fn();
		}
	},1000);
}

//显示转人工无客服在线提示
function showNoKfToTalk(type){
	if (type == 'robot') {
		$(".system-wait").remove();
		display_sys_msg('','no_kf');
	}else if (type == 'scene') {
		$(".system-wait").remove();
		//由于当前人工客服不在线，你可以选择 机器人咨询 或 给我们留言
		if (frobot_id != '') {
			msg = '<p class="system-remind"><label>'+langs[75]+'<a class="color-blue" style="cursor:pointer;" onclick="showzsk(\''+frobot_id+'\');">'+langs[13]+'</a>'+langs[9]+'<a class="color-blue" style="cursor:pointer;"onclick="showLword()">'+langs[10]+'</a></label></p>';
		}else{
			msg = '<p class="system-remind"><label>'+langs[75]+'<a class="color-blue" style="cursor:pointer;"onclick="showLword()">'+langs[10]+'</a></label></p>';
		}
		display_talk_msg(msg);
	}
}

// 评分
function showVote(){
	if(kfpf=='0' || vote_true || obj_id==0) return;
	$(".evaluation").remove();
	var new_div = '<div class="evaluation"><div><p>'+langs[15]+'<label>'+langs[16]+'</label></p><ul><li class="li-active"></li><li class="li-active"></li><li class="li-active"></li><li class="li-active"></li><li class="li-active"></li></ul></div><a class="evaluation-btn">'+langs[17]+'</a></div>';
	display_talk_msg(new_div);
}

//显示评分按钮
function showVoteIcon(){
	$(".svgWrap .function-icon-eval").parent().removeClass("disabled");
}

//半隐藏评分按钮
function hiddenVoteIcon(){
	$(".svgWrap .function-icon-eval").parent().addClass("disabled");
}

//获取评分分数
function getVoteValue(){
	var vote_value = 5 - $('.pc_talk_content').find('.evaluation .li-active').length;
    return vote_value;
}


// 隐藏快速提问按钮和界面
function hiddenQuick(){
	try{
		$(".service-help").removeClass("active").slideUp(100);
		$(".icon-hot").parent().removeClass("active");
	}catch(e){}
}

//展示自定义表单
function showVisitorForm(title,ids,formid){
	var id_arr=ids.split(',');
	var visitor_form_html='<div id="'+formid+'" class="phone_visitor_form"><p class="visitor_form_title">'+title+'</p>';
	for(var i=0;i<id_arr.length;i++){
		var form_item=visitor_form[id_arr[i]];
		if(form_item.field_type=='1'){//输入框
			if(form_item.field_name=='name'){
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques nomal"><input class="visitor_form_input1" data-type="name" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[83]+form_item.name+'</p></div>';//请输入
			}else if(form_item.field_name=='mobile'){
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques nomal"><input class="visitor_form_input1" data-type="mobile" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[0]+form_item.name+'</p></div>';//请输入有效的
			}else if(form_item.field_name=='weixin'){
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques nomal"><input class="visitor_form_input1" data-type="wechat" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[0]+form_item.name+'</p></div>';
			}else if(form_item.field_name=='qq'){
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques nomal"><input class="visitor_form_input1" data-type="qq" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[0]+form_item.name+'</p></div>';
			}else if(form_item.field_name=='email'){
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques nomal"><input class="visitor_form_input1" data-type="email" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[0]+form_item.name+'</p></div>';
			}else{
				visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques"><input class="visitor_form_input1" type="text" placeholder="'+form_item.name+'"><p class="tip_error">'+langs[83]+form_item.name+'</p></div>';
			}
		}else{//单选
			var single_item=form_item.option_config;
			var option='<option value="'+form_item.name+'" style="display:none">'+form_item.name+'</option>';
			for(var j=0;j<single_item.length;j++){
				option+='<option value="'+single_item[j]+'">'+single_item[j]+'</option>';
			}
			visitor_form_html+='<div data-id="'+id_arr[i]+'" class="visitor_form_ques single_choose" single_item="'+single_item+'"><select class="visitor_form_select" name="" id="">'+option+'</select><p class="tip_error">'+langs[84]+form_item.name+'</p></div>';//请选择
		}
	}
	visitor_form_html+='<p class="visitor_form_submit" onclick="submitVisitorForm(this)">'+langs[81]+'</p></div>';//提交表单
	$('.pc_talk_content').append(visitor_form_html);
	basic.scrollPage();
}

//移除访客表单
function removeVisitorForm(){
	$('.phone_visitor_form').remove();
}

//改变访客表单显示状态
function changeFormStatus(formid,status){
	if ($("#"+formid).length>0) {
		if (status) {
			$("#"+formid).remove();
			display_sys_msg(langs[82]);//提交成功
		}else{
			$('#'+formid).find('.visitor_form_submit').text(langs[81]).removeClass('submiting');//提交表单
			basic.toastOut(langs[31]);//提交失败，请检查网络连接
		}
	}
}


//访客表单验证正则
function visitor_form_check(param,val) {  
	var bool=false;
	if(param=='name'){
		if(val==''){
			bool=true;
		}
	}else if(param=='mobile'){
		if(!/^1[3-9]\d{9}$/.test(val)){
			bool=true;
		}
	}else if(param=='wechat'){
		if(!/^[-_a-zA-Z0-9]{6,20}$/.test(val)){
			bool=true;
		}
	}else if(param=='qq'){
		if(!/^\d{4,11}$/.test(val)){
			bool=true;
		}
	}else if(param=='email'){
		if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(val)){
			bool=true;
		}
	}
	return bool;
}

//遍历添加二维码
function addQrcode(){
	var $kf_msg = $(".pc-service-right>p");
	var qrcode_str = '<span class="qr_code_53kf"><span class="qr_box_53kf"><span class="qr_img_53kf"><img src="'+qrcode_url+'" alt=""></span><em>'+langs[80]+'</em></span></span>';
	for(var i = 0;i<$kf_msg.length;i++){
		if($kf_msg.eq(i).find(".qr_code_53kf").length<1){
			$kf_msg.eq(i).append(qrcode_str);
		}
	}
	var toppx = 185;
	if (company_tpl == 'minichat') toppx = 119;
	$(".pc-service-right").on("mouseover",".qr_code_53kf",function(){
		$(this).find(".qr_box_53kf").css("display","block");
		var offsetTop = $(this).offset().top;
		var $insertEm = $(this).find(".qr_box_53kf em"),$insertImg = $(this).find(".qr_img_53kf");
		if(offsetTop<toppx){
			$(this).find(".qr_box_53kf").css("bottom","-126px");
			$insertImg.insertAfter($insertEm);
			$insertEm.css("margin-top","5px");
		}else{
			$(this).find(".qr_box_53kf").css("bottom","21px");
			$insertEm.insertAfter($insertImg);
			$insertImg.css("margin-top",0);
			$insertEm.css("margin-top",0);
		}
	})
	$(".pc-service-right").on("mouseout",".qr_code_53kf",function(){
		$(this).find(".qr_box_53kf").css("display","none");
	})
}

// 检查留言和注册时输入项
function check_input(type,field,isMust){
	var obj = '';
	if($.type(field)=='string'){
		if (type == 'reg') {
			obj='reg_'+field;
		}else if (type == 'ly') {
			obj='ly_'+field;
		}
	}else {
		obj=$(this).attr('id');
	};
	switch(obj){
		case 'reg_mobile':
			if (!$.trim($('#'+obj).val()).IsTelephone() && $('#'+obj).val() != '') {
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}
			break;
		case 'ly_mobile':
			if (!$.trim($('#'+obj).val()).IsTelephone() && $('#'+obj).val() != '') {
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}
			break;
		case 'reg_email':
			if (!$.trim($('#'+obj).val()).IsEmail() && $('#'+obj).val() != '') {
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}
			break;
		case 'ly_email':
			if (!$.trim($('#'+obj).val()).IsEmail() && $('#'+obj).val() != '') {
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}
			break;
		case 'reg_qq':
			if( isNaN($('#'+obj).val()) ) { 
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}; 
			break;
		case 'ly_qq':
			if( isNaN($('#'+obj).val()) ) { 
				$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
				return false; 
			}; 
			break;
	};
	if (isMust == undefined || isMust == 1) {
		if(!$('#'+obj).val()){
			$('#'+obj).addClass("message-error").prev().find("a").addClass("error-alert");
			return false;
		};
	}
	return true;
}

//输入框内容发生改变时
function inputBoxChange(){
	if(lnkover == 4 && zsk_api_name == '' && task_robot_use == '0'){
		getRobotTips();
	}
	if (guidance_type == '2') {
		zn_order();
	}
}

//
function window_unload(){
	try{document.cookie = "hz6d_open_talk_"+company_id+"=0";}catch(e){}
}

// 播放音效
function playSound(){
	if (fk_music != '') {
		try{
			if(navigator.userAgent.indexOf("MSIE 8.0")>0){
				$("#bgsoundSound").attr("src",http_pro+host+"/sound/"+fk_music+".mp3");
			}else{
				var myAuto = document.getElementById('audioSound');
				$("#audioSound").attr("src",http_pro+host+"/sound/"+fk_music+".mp3");
				myAuto.play();
			}  
		}catch(e){}
	}
}

function isLoadVoice(msg){
	var reg = /\[voice\].+\[\/voice\]/;
	if(reg.test(msg) && check_browser != 'IE'){
		if (!is_load_audioJs) {
			is_load_audioJs = true;
			try{
				var audio_script = document.createElement("script");
				audio_script.src = 'js/new2017/BenzAMRRecorder.min.js';
				document.head.appendChild(audio_script);
			}catch(e){
				return true;
			}
		}
		if(typeof(BenzAMRRecorder) != 'function') return false;
	}
	return true;
}

function auto_msg_handle(msg) {
	// PC自动识别2020.04.20->
	// 匹配信息
	msg = msg.replace(/<\/p>|<br>|<br>/g,' ');
	msg = msg.replace(/<[^<>]+>/g,'');
	var phone_reg = /[^\d](1[3-9]\d{9})(?!\d)/g,tel_400_reg = /[^\d]400([-|\s]{0,2})[016789]\d{2}([-|\s]{0,2})\d{4}/g;
	var phone_num="";
	var qq_num="";
	var wx_num="";
	// 过滤掉url 和 img中的超链接，不参与匹配
	var delLinkReg = /<A HREF=.*?<\/A>/g;
	var imgLinkReg = /<IMG.*?insert_img_kf">/g;
	var new_msg = msg.replace(delLinkReg,'');
	new_msg = new_msg.replace(imgLinkReg,'');

	var msg_str = ('`'+HtmlDecode(new_msg)).toLowerCase();
	
	// 获取手机号码
	if(phone_reg.test(msg_str)){
		try{
			var phone_str = msg_str.match(phone_reg)[0];
			phone_num = phone_str.substring(1);
		}catch(e){}
	}
	// else if(tel_400_reg.test(msg_str)){
	// 	try{
	// 		var phone_str = msg_str.match(tel_400_reg)[0];
	// 		phone_num = phone_str.substring(1).replace(/[-|\s]/g ,"");
	// 	}catch(e){}
	// }

	// 获取微信号码
	if(msg_str.toLowerCase().indexOf("wechat")>-1 || (language=='cn' && msg_str.toLowerCase().indexOf("wx")>-1) || msg.toLowerCase().indexOf("weixin")>-1 || msg.indexOf("微信")>-1){
		var newmsg_str = msg_str;
		newmsg_str = newmsg_str.replace(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,'');//过滤网址
        newmsg_str = newmsg_str.replace(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,'');//过滤email
		var weixinReg = /([^?!\w])weixin(?![\w$])/g;
		var wechatReg = /([^?!\w])wechat(?![\w$])/g;
		newmsg_str = newmsg_str.replace(weixinReg,'');
		newmsg_str = newmsg_str.replace(wechatReg,'');
		try{
			if((msg_str.indexOf("微信同号")>-1 || msg_str.indexOf("微信同手机")>-1) && phone_num != ""){
				wx_num = phone_num;
			}else{
				var wx_str = newmsg_str.match(/[^\w]([a-zA-Z_][\wa-zA-Z-_]{5,19})(?![\w])/g)[0];
				wx_num = wx_str.substring(1);
			}
		}catch(e){}
		if(wx_num == "" && phone_num != ""){
			wx_num = phone_num;
		}
	}

	// 获取QQ号码
	if(msg_str.toLowerCase().indexOf("qq")>-1){
		try{
			var qq_msg_str=msg_str.replace(phone_reg,'').replace(wx_num,'');
			var qq_arr = qq_msg_str.match(/[^\d]([1-9]\d{4,10})(?!\d)/g);
			for(var x=0;x<qq_arr.length;x++){
				if(qq_arr[x].substring(1) == phone_num){
					qq_arr.splice(x,1);
					x--;
				}
			}
			qq_num = qq_arr[0].substring(1)
		}catch(e){}
	}

	var wx_ewm = admin_wx_code;
	if(wx_ewm!=''){
		var wx_img='<div class="wx_img"><img src="'+wx_ewm+'" /></div>';
	}else{
        var wx_img='<div class="copy_wx">'+wx_num+'</div>';
    }
	// 按钮结构  98:加 QQ 93:扫码+微信 94:复制微信 95:在线拨打 96:输入手机号码 97:点击免费通话
    var btn_switch_phone=btn_switch.indexOf('phone')+1;
    var btn_switch_qq=btn_switch.indexOf('qq')+1;
    var btn_switch_wechat=btn_switch.indexOf('wechat')+1;
    var msg_qq_btn = qq_num == '' ?  "" : btn_switch_qq > 0 ? '<div class="msg_btn msg_qq_btn" data_qq ='+qq_num+' onclick="window.open(\'tencent://message/?uin='+qq_num+'\',\'_self\')">'+'<div class="msg_act">'+langs[98]+'</div>'+'</div>' : "";

    // var msg_qq_btn = qq_num != '' ? '<div class="msg_btn msg_qq_btn" data_qq ='+qq_num+' onclick="window.open(\'tencent://message/?uin='+qq_num+'\',\'_self\')">'+'<div class="msg_act">'+langs[98]+'</div>'+'</div>' : "";

     var msg_wx_btn = wx_num == '' ? "" : btn_switch_wechat > 0 ? '<div class="msg_btn msg_wx_btn" data_wx ='+wx_num+' onclick="msg_wx_act(this)"><div class="msg_act">'+(wx_ewm!=''?langs[93]:langs[94])+'</div>'+wx_img+'</div>' : "";

    // var msg_wx_btn = wx_num != '' ? '<div class="msg_btn msg_wx_btn" data_wx ='+wx_num+' onclick="msg_wx_act(this)"><div class="msg_act">'+(wx_ewm!=''?langs[93]:langs[94])+'</div>'+wx_img+'</div>' : "";

	if(msg_qq_btn==''){
		if(msg_wx_btn==''){
			var right_position='right:-160px';
		}else{var right_position='right:-80px';}
	}else{
		if(msg_wx_btn==''){
			var right_position='right:-80px';
		}else{var right_position='right:-45px';}
	}

    var msg_phone_btn = phone_num == '' ? "" : btn_switch_phone > 0 ?'<div class="msg_btn msg_phone_btn" data_phone ='+phone_num+' href="tel:'+phone_num+'"><div class="msg_act" onclick="$(this).siblings(\'.call_phone_box\').toggle();event.stopPropagation()">'+langs[95]+'</div><div class="call_phone_box" style="'+right_position+'"><input class="call_phone_input" type="text" placeholder="'+langs[96]+'"><span class="call_phone_btn">'+langs[97]+'</span></div></div>' : "";
	// var msg_phone_btn = phone_num != '' ? '<div class="msg_btn msg_phone_btn" data_phone ='+phone_num+' href="tel:'+phone_num+'"><div class="msg_act" onclick="$(this).siblings(\'.call_phone_box\').toggle();event.stopPropagation()">'+langs[95]+'</div><div class="call_phone_box" style="'+right_position+'"><input class="call_phone_input" type="text" placeholder="'+langs[96]+'"><span class="call_phone_btn">'+langs[97]+'</span></div></div>' :  "";
	if(msg_phone_btn==''&&msg_qq_btn==''&&msg_wx_btn==''){
		var msg_btns='';
	}else{
		var msg_btns = '<div class="msg_btns">'+msg_qq_btn+msg_wx_btn+msg_phone_btn+'</div>';
	}
	return msg_btns;
}
function msg_wx_act(ele){
	// 复制微信
	var  range = document.createRange(); 
	range.selectNode($(ele).find('.copy_wx')[0]); 
	var selection = window.getSelection(); 
	if(selection.rangeCount > 0) selection.removeAllRanges(); 
	selection.addRange(range); 
	document.execCommand('copy'); 
	basic.toastOut("复制成功");
}

$('.pc_talk_content').on('click','.call_phone_box',function (event) {  
	event.stopPropagation();
})
$(".pc_talk_content").on("click",".call_phone_btn",function(){
	netCallBack(this);
});
$(".pc_talk_content").on("focus",".call_phone_input",function(){
	$(this).removeClass('error');
});

var audio_num = 0;
var audio_vars={};
var is_load_audioJs = false;
$("body").on("click",".audiobtn",function(){
	var _this = this;
	if($(this).hasClass('unaudio_play')){
		basic.toastOut("该浏览器不支持语音播放");
		return false;
	}
	var arr = Object.keys(audio_vars);
	var idx = $(_this).attr("id").split("_")[1]-1;
	$(".audio_log").attr("src","style/chat/new2017/image/png/audio1.png");
	$(".audiobtn").not(_this).removeClass('audio_play');
	for(var i = 0;i<arr.length;i++){
		if(arr[i] == $(_this).attr("id")){
			if (!audio_vars[arr[i]].isPlaying()) {
				$(_this).addClass('audio_play');
				audio_vars[arr[idx]].onEnded(function(){
					$(_this).find(".audio_log").attr("src","style/chat/new2017/image/png/audio1.png");
					$(_this).removeClass('audio_play');
				})
				audio_vars[arr[i]].play();
			} else {
				$(_this).find(".audio_log").attr("src","style/chat/new2017/image/png/audio1.png");
				audio_vars[arr[i]].stop();
				$(_this).removeClass('audio_play');
			}
		}else{
			audio_vars[arr[i]].stop();
		}
	}
});

//访客表单inputfocus去样式
$('.pc_talk_content').on('focus','.visitor_form_input1,.visitor_form_select',function(){
	$(this).removeClass('error_import');
	$(this).siblings('.tip_error').hide();
});

//场景引导用
$(".pc_talk_content").on("click",".from_input",function(e){
	e.stopPropagation();
	$(this).removeClass('error_import');
});


$(function(){
	//机器人相关处理
	$('.pc_talk_content').on("click", ".unuser", function(){
		$(this).addClass("active");
		$(this).parent().siblings("div").show();
		basic.scrollPage_robot();
	});
	$('.pc_talk_content').on("click",".answer_helpful",function(){
		var answer_reason_val = $(this).attr('data-value');
		var answer_id = $(this).parent().parent().prev().attr('id');
		$(this).parent().text(langs[69]);//感谢你的反馈
		$(".pc-robot-eval .df").hide();
		customerResponse(answer_id, answer_reason_val);
	})
	$('.pc_talk_content').on("click",".df li",function(){
		var answer_reason_val = $(this).attr('data-value');
		var answer_id = $(this).parent().parent().parent().prev().attr('id');
		customerResponse(answer_id, answer_reason_val);
	})
	$('.pc_talk_content').on("mousedown", ".pc-robot-eval ul li", function() {
		$(this).addClass("selected").siblings().removeClass("selected");
	});

	$('.pc_talk_content').on("mouseup", ".pc-robot-eval ul li", function() {
		$(this).parent().parent().fadeOut(200);
		$(this).parent().parent().siblings("p").text(langs[69]);//感谢你的反馈
	});
	//点击感叹号重发消息
	$(".talk").on("click",".onError", function(){
		var msg = $(this).prev().html();
		var msg = UBBEncode(msg);
		var msg = UrlEncode(msg);
		var fk_msgid = $(this).attr('id');
		qstmsg(msg,fk_msgid);
		$(this).removeClass('onError');
		try{
			m_qstResTimer[fk_msgid] = setTimeout(function(){
				$("#"+fk_msgid).addClass("onError");
			},20000);
		}catch(e){}
	});

	$(".net_callBack_btn").on("click",function(){
		netCallBack();
	});
});

</script>
<script type="text/javascript" for="snapShot_obj" event="OnSend(a,b,c)">ocx_callback(a,b,c);</script>
<script type="text/javascript">
try{
	var fp = new Fingerprint2();
	fp.get(function(result, components) {
		finger_id = result;
	});
}catch(e){}
var isGetSendLnk = false
try{
	window.addEventListener("message",function(event){
		$.get("wnn_debug.php",{"cmd":"sendLNK0","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
		if(lnkover == 2){//对话结束后可以继续邀请
			if(event.data.indexOf('sendLNK{#53#}') != -1){
				isGetSendLnk = true;
				var postMsg = event.data.split('{#53#}');
				$.get("wnn_debug.php",{"cmd":"sendLNK3","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
				worker_ids = postMsg[1];
				isSendLNK=false;
				sendLNK();
			}
			return;
		}
		if (typeof(event.data) != 'string' || isGetSendLnk) return;
		if(event.data.indexOf('sendLNK{#53#}') != -1){
			isGetSendLnk = true;
			$.get("wnn_debug.php",{"cmd":"sendLNK1","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
			var postMsg = event.data.split('{#53#}');
			$.get("wnn_debug.php",{"cmd":"sendLNK2","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
			worker_ids = postMsg[1];
			zn_order();
		}
	});
}catch(e){
	window.attachEvent("onmessage",function(event){
		$.get("wnn_debug.php",{"cmd":"sendLNK0","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
		if(lnkover == 2){//对话结束后可以继续邀请
			if(event.data.indexOf('sendLNK{#53#}') != -1){
				isGetSendLnk = true;
				var postMsg = event.data.split('{#53#}');
				$.get("wnn_debug.php",{"cmd":"sendLNK3","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
				worker_ids = postMsg[1];
				isSendLNK=false;
				sendLNK();
			}
			return;
		}
		if (typeof(event.data) != 'string' || isGetSendLnk) return;
		if(event.data.indexOf('sendLNK{#53#}') != -1){
			isGetSendLnk = true;
			$.get("wnn_debug.php",{"cmd":"sendLNK1","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
			var postMsg = event.data.split('{#53#}');
			$.get("wnn_debug.php",{"cmd":"sendLNK2","info":ip+","+guest_id,"isGetSendLnk":isGetSendLnk});
			worker_ids = postMsg[1];
			zn_order();
		}
	});
}

</script>
<link rel="stylesheet" type="text/css" href="./webuploader.css">
<script type="text/javascript" src="./webuploader.min.js.下载"></script>
<script>
    // 上传=============================start==================================================
  


//解决离线对话不弹文件窗口问题
    setTimeout(function(){
        $("input.webuploader-element-invisible").removeClass('webuploader-element-invisible').css("opacity","0");
    },500)
    
    $(function(){


        var FileUpload = function(picker,uploadURL,acceptObj){

            this.picker = picker;
            this.width = "";
            this.height = "";
            this.uploadURL = uploadURL;
        };

        FileUpload.prototype = {
            init: function(){
                var upload = this.create();
                this.bindEvent(upload);
                return upload;
            },
            create: function(){
                var uploader = WebUploader.create({

                    // 选完文件后，是否自动上传。
                    auto: true,
                    swf: 'js/webuploader/Uploader.swf',
                    server: this.uploadURL,
                    pick: {
                        id: '#'+this.picker,
                    },
                    fileVal: 'userupload',
                    duplicate: true,
                });
                return uploader;
            },
            bindEvent: function(uploader){
                _this = this;
                has_opened = true;
                uploader.on('fileQueued', function(file) {
                    var msg_time = getTime2();
                    file.ext = file.ext.toLowerCase();

                    // 如果在排队中 阻止上传
                    if($(".line-up").css("display")=='block'){
                        uploader.cancelFile( file );
                        return false;
                    };
                    //如果存在文件在上传，阻止上传
                    if(this.getStats().progressNum>=1){
                        uploader.cancelFile( file );
                        return false;
                    }

                    var html,
                        data_id = file.id,
                        name = basic.beforeRender(file.name),
                        size = file.size>1024? Math.floor(file.size/1024)>1024? Math.floor(file.size/1024/1024)+"M":Math.floor(file.size/1024)+"KB":Math.floor(file.size)+"B";

                    if(file.size/1024/1024>=100){
                        basic.toastOut("上传文件/图片不能超过100M");//上传文件/图片不能超过100M
                        uploader.cancelFile( file );
                        return false;
                    };
                    var file_type_arr = ['jpeg','gif','png','jpg',"fla","pdf","txt","doc","xls","docx","xlsx","tmp","html","wps","ppt","swf","avi","mpeg","asf","wmv","rm","rmvb","mp3","ape","wma","wav","zip","rar","mp4"];

                    if($.inArray(file.ext,file_type_arr) == -1){
                        basic.toastOut("暂不支持该格式!");//暂不支持该格式!
                        uploader.cancelFile( file );
                        return false;
                    }

                    if(file.ext == 'jpg' || file.ext == 'png' || file.ext == 'gif' || file.ext == 'jpeg'){
                        
                        html = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="upload-wrap fk-uploadFile" id = "'+data_id+'">'+
                            '<div class="upload-image fr">'+
                            '<div class="process-wrap">'+
                            '<span class="processSmall"></span>'+
                            '</div>'+
                            '<div class="statusIcon"></div>'+
                            '</div>'+
                            '</div>'+
                            '</div>';

                        $(".pc_talk_content").append(html);
                        var $img = $("#"+file.id).find(".upload-image");
                        uploader.makeThumb( file, function( error, ret ) {
                            _this.height = file._info.height;
                            _this.width = file._info.width;
                            if ( error ) {
                                $img.text('预览错误');//预览错误
                            } else {
                                $img.append("<img src='"+ret+"' />");
                            }
                        });
                    }else {
                        html = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="upload-wrap fk-uploadFile" id = "'+data_id+'">'+
                                    '<div class="upload-file fr"">'+
                                        '<p class="file-header">'+
                                            '<span class="fileName" title="'+file.name+'">'+name+'</span>'+
                                            '<span class="fileSize fr">'+size+'</span>'+
                                        '</p>'+
                                        '<div class="process-wrap"><span class="processLong"><span class="processSmall"></span></span><span class="upload-button"></span></div>'+
                                        '<div class="uploadStatus">上传中</div>'+
                                        '<div class="statusIcon"></div>'+
                                    '</div>'+
                                    '</div>'+
                                '</div>';
                        $(".pc_talk_content").append(html);//36  上传中
                    }
                    $("#"+file.id).get(0).scrollIntoView();
                });

                //上传前
                uploader.on("beforeFileQueued", function(file) {
                    file.ext = file.ext.toLowerCase();
                    var file_type_arr = ['jpeg','gif','png','jpg',"fla","pdf","txt","doc","xls","docx","xlsx","tmp","html","wps","ppt","swf","avi","mpeg","asf","wmv","rm","rmvb","mp3","ape","wma","wav","zip","rar","mp4"];


                    //提前判断是否开启视音频
                    $.ajax({
                        type:"post",
                        url:http_pro+kfs3_host+"/index.php?m=Home&c=MediaUpload&a=before_upload&arg="+arg,
                        data:{
                            "company_id":company_id,
                        },
                        async:false,
                        success:function (mes) {
                            mes=JSON.parse(mes);
                            if(mes.status !='200') has_opened=false;
                            else has_opened=true;
                        }
                    });
                    //如果未开启过或是ie8或ie9，直接进入旧文件传输口
                    if(!has_opened) return true;

                    var userAgent = navigator.userAgent,
                        rMsie = /(msie\s|trident.*rv:)([\w.]+)/,
                        rFirefox = /(firefox)\/([\w.]+)/,
                        rOpera = /(opera).+version\/([\w.]+)/,
                        rChrome = /(chrome)\/([\w.]+)/,
                        rSafari = /version\/([\w.]+).*(safari)/;
                    var browser;
                    var version;
                    var ua = userAgent.toLowerCase();
                    function uaMatch(ua){
                        var match = rMsie.exec(ua);
                        if(match != null){
                            return { browser : "IE", version : match[2] || "0" };
                        }
                        var match = rFirefox.exec(ua);
                        if (match != null) {
                            return { browser : match[1] || "", version : match[2] || "0" };
                        }
                        var match = rOpera.exec(ua);
                        if (match != null) {
                            return { browser : match[1] || "", version : match[2] || "0" };
                        }
                        var match = rChrome.exec(ua);
                        if (match != null) {
                            return { browser : match[1] || "", version : match[2] || "0" };
                        }
                        var match = rSafari.exec(ua);
                        if (match != null) {
                            return { browser : match[2] || "", version : match[1] || "0" };
                        }
                        if (match != null) {
                            return { browser : "", version : "0" };
                        }
                    }
                    var browserMatch = uaMatch(userAgent.toLowerCase());
                    if (browserMatch.browser){
                        browser = browserMatch.browser;
                        version = browserMatch.version;
                    }
                    if(browser == 'IE' && parseInt(version) <= 9){
                        has_opened=false;
                        return true;
                    }
                    
                    //如果出现余额不足等问题，重置url，请求原php地址
                    if(file.flag==true){
                        this.options.formData={"company_id":company_id};
                        this.options.fileVal="userupload";
                        this.options.server=_this.uploadURL;
                        file.flag=false;
                        return true;
                    }
                    if(file.ext == 'mp4'||file.ext == 'mp3'||file.ext == 'wav'||file.ext == 'ogg'){
                        this.options.formData={"company_id":company_id};
                        this.options.fileVal="userfile";
                        this.options.server=http_pro+kfs3_host+"/index.php?m=Home&c=MediaUpload&a=upload&arg="+arg;
                    }
                        
                });

                $(".pc_talk_content").on('click', '.upload-button', function() {
                    uploader.cancelFile( $(this).parents(".upload-wrap").attr("id") );
                    $("#"+$(this).parents(".upload-wrap").attr("id")).find(".process-wrap").hide();
                    $("#"+$(this).parents(".upload-wrap").attr("id")).find(".uploadStatus").text("已取消上传").css("color","#8DA2B5");//已取消上传
                })


                // 重新上传
                $(".talk").on("click",".statusIcon",function(){
                    uploader.retry($(this).parents(".upload-wrap").attr("id"));
                    $(this).parents(".upload-wrap").find(".statusIcon").hide();
                    $(this).parents(".upload-wrap").find(".process-wrap").show();
                    $(this).parents(".upload-wrap").find(".uploadStatus").text("上传中").css("color","#8DA2B5");
                });


                // 文件上传过程中创建进度条实时显示。
                uploader.on('uploadProgress', function(file, percentage) {
                    
                    $("#"+file.id).find(".process-wrap .processSmall").css("width",Math.floor(percentage * 100) + "%");

                });
                // 文件上传成功，给item添加成功class, 用样式标记上传成功。
                uploader.on('uploadSuccess', function (file, response) {
                    //若开通了视音频服务且为视频音频文件
                    if(has_opened&&(file.ext == "mp4"||file.ext == 'mp3'||file.ext == 'wav'||file.ext == 'ogg')){
                        if(response.status=='101' || response.status=='102' || response.status=='103' || response.status=='104'){
                            //basic.toastOut("上传失败");
                            //basic.toastOut("空间不足");
                            //basic.toastOut("空间到期");
                            //basic.toastOut("流量不足");
                            videoUploadResponse(file,response,"cfile",file.name);
                            displayAsFile(file.id,file.name,file.size);
                            file.flag=true;
                            this.upload(file);
                            return false;
                        }else if(response.status=='200'){
                            if(file.ext=="mp4"){
                                //上传video-response
                                videoUploadResponse(file,response,"video",file.name);

                                var $video = $("#"+file.id).find(".upload-file");
                                $video.css("width","260px");
                                $video.find('.file-header').remove();
                                $video.prepend("<video class='upload-video' style='background-color:black;width:240px;height:180px;' src='"+response.url+"' controls='controls' >抱歉，你的浏览器不支持视频播放</video>");
                                $(".process-wrap,.uploadStatus").remove();
                                return true;
                            }else if(file.ext == 'mp3'||file.ext == 'wav'||file.ext == 'ogg'){
                                //上传audio-response
                                videoUploadResponse(file,response,"audio",file.name);
                                var $audio = $("#"+file.id).find(".upload-file");
                                $audio.css("width","262px");
                                $audio.find('.file-header').remove();

                                $audio.prepend("<audio class='upload-audio' style='background-color:white;width:250px;height:55px;margin-left: -5px;' src='"+response.url+"' controls='controls' >抱歉，你的浏览器不支持音频播放</audio>");
                                $(".process-wrap,.uploadStatus").remove();
                                return true;
                            }
                        }
                    }



                    //若为其他
                    var btn_type = response.type;
                    $("#"+file.id).find(".process-wrap").hide();
                    if(response.upload == 'success'){
                        if (btn_type == 'img') {
                            var wh = "?w="+_this.width+"&h="+_this.height;
                            imgUploadResponse(file,response,wh);
                        }else if(btn_type == 'file'){
                            fileUploadResponse(file,response);
                        }
                    }else {
                        $("#"+file.id).find(".uploadStatus").text("上传失败").css("color","#FF4C4C");//上传失败
                        $("#"+file.id).find(".statusIcon").show();
                    }
                });

                // 文件上传失败，显示上传出错。
                uploader.on('uploadError', function(file) {
                    $("#"+file.id).find(".process-wrap").hide();
                    $("#"+file.id).find(".uploadStatus").text("上传失败").css("color","#FF4C4C");//上传失败
                    $("#"+file.id).find(".statusIcon").show();
                });

                //完成上传完了，成功或者失败
                uploader.on('uploadComplete', function(file) {
                    //重置url
                    this.options.formData={"company_id":company_id};
                    this.options.fileVal="userupload";
                    this.options.server=_this.uploadURL;
                });

            }
        }
        var file_upload = new FileUpload('file-picker',http_pro+host+'/upload_img_file.php?company_id='+company_id);
        file_upload.init();
    });

        // 上传=============================end==================================================


        // 图片预加载防止图片闪烁 ============================

        (function(){
            //存放图片路径的数组
            var imgSrcArr = [
                "style/chat/new2017/image/png/toasts.png",
                "style/chat/new2017/image/svg/toasts.svg"
            ];

            var imgWrap = [];

            function preloadImg(arr) {
                for(var i =0; i< arr.length ;i++) {
                    imgWrap[i] = new Image();
                    imgWrap[i].src = arr[i];
                }
            }
            preloadImg(imgSrcArr);
        })()

        //视频上传返回
        function videoUploadResponse(file,response,type,filename){
            if(type=='video'||type=='audio'){
                var file_url = response.url+"*"+filename;
            }else{
                var file_url = http_pro+host+"/down_file.php?type=srv&company_id="+company_id+"&file="+response.real_name;
            }
            file_url = UrlEncode(file_url);
            send_FIL(file_url,type,file.size); // 发送文件给客服
            $("#"+file.id).find(".uploadStatus").text(langs[14]).css("color","#1E88E5");//上传成功
        }
        //显示为视频或音频
        function displayAsVideoAudio(msg,fk_msgid,msg_time,identity,talkname) {

            if(fk_msgid == undefined) {
                var fk_msgid_str = '';
            }else{
                var fk_msgid_str = ' id="'+fk_msgid+'" class="info-status"';
            }
            if (talkname == undefined) talkname = obj_name;
            if (talkname == '') talkname = langs[45];//客服
    
            if (msg_time == undefined) msg_time = getTime2();

            var vdtype=(msg.indexOf("mp4")>-1)?"video":"audio";
            var message=msg.match(/[a-zA-z]+:\/\/[^\s]*/);
            var name=msg.split(message)[1].match(/[\w.]*\.[\w.]*/);
            if(identity=="fk"){
                if(msg.indexOf("mp4")>-1){
                    var show_msg = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="pc-customer-info" style="background-color:'+color_fkqp+';"><div class="textWrap" style="color:'+color_fkxx+';"><'+vdtype+' class="upload-'+vdtype+'" style="background-color:black;width:240px;height:180px;" controls="controls" src='+message+'></'+vdtype+'></div><i'+fk_msgid_str+'></i></div></div>';
                }else{
                    var show_msg = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="pc-customer-info" style="width:262px;"><div class="textWrap" style="color:'+color_fkxx+';width:262px;"><'+vdtype+' class="upload-'+vdtype+'" style="width:250px;height:55px;margin-left:-2px;" controls="controls" src='+message+'></'+vdtype+'></div><i'+fk_msgid_str+'></i></div></div>';
                }
                //若为ie8及以下浏览器,覆盖show_msg为卡片文件格式
                if(!!window.ActiveXObject&&document.documentMode==8){
                     var show_msg = '<div class="upload-wrap kf-uploadFile">'+
                        '<div class="upload-file fr">'+
                            '<p class="file-header">'+
                                '<span class="fileName" style="min-height:18px;">'+name+'</span>'+
                                '<span class="fileSize fr">'+langs[44]+'</span>'+
                            '</p>'+
                            '<div class="uploadStatus color-blue fr"><a href="'+message+'" target="_blank">'+langs[68]+'</a></div>'+
                            '<div class="statusIcon"></div>'+
                        '</div>'+
                    '</div>';
                }
            }else if(identity=="kf"){
                if(msg.indexOf("mp4")>-1){
                    var show_msg = '<div class="pc-service file_cancel"><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><p><label>'+talkname+'</label><span>'+msg_time+'</span></p><div class="upload-wrap kf-uploadFile" >'+'<div class="upload-file fl" style="width:260px;">'+'<video class="upload-video"  style="background-color:black;width:240px;height:180px;" src="'+message+'" controls="controls">抱歉，你的浏览器不支持视频播放</video></div>'+                        '</div>'+'</div></div></div>';
                }else{
                    var show_msg = '<div class="pc-service file_cancel"><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><p><label>'+talkname+'</label><span>'+msg_time+'</span></p><div class="upload-wrap kf-uploadFile" style="width:262px;">'+'<div class="upload-file fl" style="width:262px;">'+'<audio class="upload-audio" style="background-color:white;width:250px;height:55px;margin-left:-5px;" src="'+message+'" controls="controls">抱歉，你的浏览器不支持音频播放</audio></div>'+'</div>'+'</div></div></div>';
                }
                //若为ie8及以下浏览器,覆盖show_msg为卡片文件格式
                if(!!window.ActiveXObject&&document.documentMode==8){
                     var show_msg = '<div class="pc-service file_cancel"><div class="pc-service-left" style="display: inline-block;"><img src="'+kf_header+'" alt="'+langs[11]+'"></div><div class="pc-service-right" ><div class="upload-wrap kf-uploadFile">'+
                        '<div class="upload-file fl">'+
                            '<p class="file-header">'+
                                '<span class="fileName" style="min-height:18px;">'+name+'</span>'+
                                '<span class="fileSize fr">'+langs[44]+'</span>'+
                            '</p>'+
                            '<div class="uploadStatus color-blue fr"><a href="'+message+'" target="_blank">'+langs[68]+'</a></div>'+
                            '<div class="statusIcon"></div>'+
                        '</div>'+
                    '</div></div></div>';
                }
            }
            $(".pc_talk_content").append(show_msg);
            basic.scrollPage();
            setQstResTimer(fk_msgid);
        }
        //显示为文件
        function displayAsFile(data_id,file_name,size) {
            var msg_time = getTime2();
            var name=basic.beforeRender(file_name);
            var html = '<div class="pc-customer"><p><label>'+langs[49]+'</label><span>'+msg_time+'</span></p><div class="upload-wrap fk-uploadFile" id = "'+data_id+'">'+
                        '<div class="upload-file fr">'+
                            '<p class="file-header">'+
                                '<span class="fileName" title="'+file_name+'">'+name+'</span>'+
                                '<span class="fileSize fr">'+size+'</span>'+
                            '</p>'+
                            '<div class="uploadStatus color-blue" style="color: rgb(30, 136, 229);">'+langs[14]+'</div>'+
                            '<div class="statusIcon"></div>'+
                        '</div>'+
                        '</div>'+
                    '</div>';
            $("#"+data_id).html(html);
        }
        //左下角by 53
        var timer;
        $(".sm_triangle").mouseenter(function(){
            clearTimeout(timer);
            $(".triangle_to53").show();
        })
        $(".sm_triangle").mouseleave(function(){
            timer = setTimeout(function(){
                $(".triangle_to53").hide();
            },500)
        })
        $(".triangle_to53").mouseenter(function(){
            clearTimeout(timer);
        })
        $(".triangle_to53").mouseleave(function(){
            $(".triangle_to53").hide();
        })
        $(".hover_53").mouseenter(function(){
            $(".hover_53").css("color","#79BAF3");
        })
        $(".hover_53").mouseleave(function(){
            $(".hover_53").css("color","#fff");
        })
        
        // 2019.11.11新增  修复火狐浏览器展开窗口滚至顶部问题
        try{
          window.addEventListener('message',function(event){
            if(event.data == 'openMini'){
              basic.scrollPage();
            }
          });
        }catch(e){}


    
    $('body').on("mouseleave",function(){
        // 浮框因为ifrmae的原因，监听到离开内嵌文档后，重置当前互动菜单的状态
        menu.render(menu_sgin_obj.menu_type,menu_sgin_obj.menu_id,menu_sgin_obj.menu_idx)
    })
    

</script>


</body></html>